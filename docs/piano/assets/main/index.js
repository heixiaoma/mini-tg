window.__require=function e(t,n,a){function o(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return o(t[i][1][e]||e)},u,u.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<a.length;i++)o(a[i]);return o}({ActionMgr:[function(e,t,n){"use strict";cc._RF.push(t,"e7338TgEnxAH5/b0mhpvBKG","ActionMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../FrameLog"),o=cc.easeInOut,r=function(){function e(){}return e.scaleNode=function(e,t,n){void 0===n&&(n=.5);try{cc.tween(e).to(0,{scale:t,y:-e.height*(1-t)}).to(n,{scale:1,y:0}).start()}catch(t){e.scale=1,e.y=0,a.default.log("shake\u52a8\u753b\u5f02\u5e38",t)}},e.moveUpDownForever=function(e,t,n){void 0===t&&(t=.2),void 0===n&&(n=10),cc.tween(e).repeatForever(cc.sequence(cc.moveBy(t,new cc.Vec2(0,n)),cc.moveBy(t,new cc.Vec2(0,-n)))).start()},e.rotate=function(e,t){void 0===t&&(t=3);try{cc.tween(e).repeatForever(cc.sequence(cc.rotateTo(t,180),cc.rotateTo(t,360))).start()}catch(t){a.default.error("shakeNode\u5f02\u5e38",t,e)}},e.scaleStop=function(e,t,n,o,r,i){void 0===t&&(t=.1),void 0===n&&(n=10),void 0===o&&(o=.3),void 0===r&&(r=1),void 0===i&&(i=1);try{if(!e)return;e.scale=i,cc.tween(e).repeatForever(cc.tween().repeat(r,cc.tween().to(t,{scale:1+o},{easing:"smooth"}).to(t,{scale:i},{easing:"smooth"})).to(t,{angle:0}).delay(n)).start()}catch(t){a.default.error("shakeNode\u5f02\u5e38",t,e)}},e.shakeNode=function(e,t,n,a){void 0===t&&(t=.3),void 0===n&&(n=10),void 0===a&&(a=5),cc.tween(e).repeat(a,cc.tween().to(t,{angle:-n}).to(t,{angle:n})).to(t,{angle:0}).start()},e.shakeNodeForever=function(e,t,n){void 0===t&&(t=4),void 0===n&&(n=10);try{cc.tween(e).repeatForever(cc.sequence(cc.rotateTo(t,-n),cc.rotateTo(t,n))).start()}catch(t){a.default.error("shakeNode\u5f02\u5e38",t,e)}},e.shakeStop=function(e,t,n,o,r){void 0===t&&(t=.1),void 0===n&&(n=10),void 0===o&&(o=10),void 0===r&&(r=5);try{cc.tween(e).repeatForever(cc.tween().delay(n).repeat(r,cc.tween().to(t,{angle:-o}).to(t,{angle:o})).to(t,{angle:0})).start()}catch(t){a.default.error("shakeStop\u5f02\u5e38",t,e)}},e.moveBigIn=function(e,t){if(void 0===t&&(t=.3),!e)return!1;try{e.scale=2,cc.tween(e).to(t,{scale:1},o(1)).start()}catch(t){e.scale=1,a.default.error("moveIn \u5f02\u5e38",t,e)}},e.moveIn=function(e,t,n){if(void 0===t&&(t=.4),void 0===n&&(n=.5),!e)return!1;try{e.scale=n,cc.tween(e).to(t,{scale:1},{easing:"backOut"}).start()}catch(t){e.scale=1,a.default.error("moveIn \u5f02\u5e38",t,e)}},e.moveOut=function(e,t,n){if(void 0===t&&(t=.4),void 0===n&&(n=0),!e)return!1;try{e.scale=1,cc.tween(e).to(t,{scale:n}).start()}catch(t){e.scale=0,a.default.error("moveOut \u5f02\u5e38",t,e)}},e.moveInSide=function(e,t,n,o){if(void 0===t&&(t=this.TWEEN_FROM_SIDE.TOP),void 0===n&&(n=.5),void 0===o&&(o=0),!e)return!1;this._moveSideNodePosition.hasOwnProperty(e.uuid)||(this._moveSideNodePosition[e.uuid]=e.position.clone());try{var r=this._getSideResultPos(e,t);e.position=r,a.default.log("\u8282\u70b9",e.name,"\u754c\u9762\u5916\u5750\u6807\u4e3a\uff1a",r),cc.tween(e).delay(o).to(n,{position:this._moveSideNodePosition[e.uuid].clone()},{easing:"quartIn"}).start()}catch(t){e.position=this._moveSideNodePosition[e.uuid].clone(),a.default.log("move In Side \u5f02\u5e38",t,e)}},e.moveOutSide=function(e,t,n){var o=this;if(void 0===t&&(t=this.TWEEN_FROM_SIDE.TOP),void 0===n&&(n=.5),!e)return!1;this._moveSideNodePosition.hasOwnProperty(e.uuid)||(this._moveSideNodePosition[e.uuid]=e.position);try{var r=this._getSideResultPos(e,t);cc.tween(e).to(n,{position:r},{easing:"quartIn"}).call(function(){e.position=o._moveSideNodePosition[e.uuid].clone(),a.default.log("end move out side",e.position)}).start()}catch(t){e.position=this._moveSideNodePosition[e.uuid].clone(),a.default.log("move Out Side \u5f02\u5e38",t,e)}},e._getSideResultPos=function(t,n){var o,r=cc.winSize,i=r.height,c=r.width;switch(a.default.log("\u5c4f\u5e55\u5c3a\u5bf8\u5927\u5c0f\u4e3a\uff1a",i,c),n){case e.TWEEN_FROM_SIDE.TOP:o=new cc.Vec2(t.x,i+t.height);break;case e.TWEEN_FROM_SIDE.DOWN:o=new cc.Vec2(t.x,-i-t.height);break;case e.TWEEN_FROM_SIDE.LEFT:o=new cc.Vec2(-c-t.width,t.y);break;case e.TWEEN_FROM_SIDE.RIGHT:o=new cc.Vec2(c+t.width,t.y)}return o},e.moveLeftRight=function(t,n,o,r){try{var i=void 0,c=void 0;switch(n){case e.TWEEN_FROM_SIDE.LEFT:case e.TWEEN_FROM_SIDE.RIGHT:i=new cc.Vec2(t.x-o,t.y),c=new cc.Vec2(t.x+o,t.y);break;case e.TWEEN_FROM_SIDE.TOP:case e.TWEEN_FROM_SIDE.DOWN:i=new cc.Vec2(t.x,t.y-o),c=new cc.Vec2(t.x,t.y+o)}cc.tween(t).repeatForever(cc.sequence(cc.moveTo(r,i),cc.moveTo(r,c))).start()}catch(e){a.default.error("moveLeftRight\u5f02\u5e38",e,t)}},e.showGradually=function(e,t,n,o,r){void 0===t&&(t=1),void 0===n&&(n=0),void 0===o&&(o=255),void 0===r&&(r=0);try{cc.tween(e).call(function(){e.opacity=r,e.active=!0}).delay(n).to(t,{opacity:o}).start()}catch(t){e.opacity=o,a.default.error("showGradually\u5f02\u5e38",t,e)}},e.hideGradually=function(e,t,n,o){void 0===t&&(t=1),void 0===n&&(n=0),void 0===o&&(o=50);try{e.active=!0,cc.tween(e).delay(n).to(t,{opacity:o},{easing:"quartIn"}).call(function(){e.active=!1,e.opacity=255}).start()}catch(t){e.opacity=o,a.default.error("showGradually\u5f02\u5e38",t,e)}},e.TWEEN_FROM_SIDE={TOP:1,DOWN:2,LEFT:3,RIGHT:4},e._moveSideNodePosition={},e}();n.default=r,cc._RF.pop()},{"../FrameLog":"FrameLog"}],AdvBase:[function(e,t,n){"use strict";cc._RF.push(t,"a81b4GFxx9G64jaOzvR06l5","AdvBase");var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator.ccclass,r=function(){function e(){this._isInit=!1,this._isShow=!1,this._isError=!1}return e.prototype.getAdvInfo=function(){return null},e.prototype.update=function(){},e.prototype.isError=function(){return this._isError},e.prototype.isShow=function(){return this._isShow},e.prototype.isInit=function(){return this._isInit},e._instance=null,e=a([o],e)}();n.default=r,cc._RF.pop()},{}],AdvFree:[function(e,t,n){"use strict";cc._RF.push(t,"16a0dTWJ1VEz7pr3pSK0WUA","AdvFree");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./AdvBase"),i=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,t.instance=function(){return null===this._instance&&(this._instance=new n),this._instance},t.prototype.getNode=function(){return null},t.prototype.init=function(e){},t.prototype.hide=function(){},t.prototype.show=function(e){},t=n=o([i],t)}(r.default);n.default=c,cc._RF.pop()},{"./AdvBase":"AdvBase"}],AppApi:[function(e,t,n){"use strict";cc._RF.push(t,"beb45flYR9NnJYY2PVAdah+","AppApi"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../FrameLog"),o=e("../LocalMgr"),r=e("../ViewMgr"),i=e("../DisplayMgr"),c=e("../../../Display/TipDisplay/ToastDisplay"),s=e("../../../Display/TipDisplay/ModalDisplay"),l=function(){function e(){}return e.onShow=function(e){cc.game.on(cc.game.EVENT_SHOW,function(){"function"==typeof e&&e({scene:"",query:"",shareTicket:""})})},e.onHide=function(e){cc.game.on(cc.game.EVENT_HIDE,function(){"function"==typeof e&&e()})},e.isInitAdSdk=function(){return this._hasInitAdSdk},e.navigateToMiniProgram=function(){},e.showModal=function(e){i.default.closeUI(s.default,!1),i.default.openUI(s.default,r.default.tipView,e)},e.showToast=function(e){i.default.closeUI(c.default,!1),i.default.openUI(c.default,r.default.tipView,e)},e.getStorageSync=function(e){return o.default.read(e)},e.setStorage=function(e){return o.default.save(e.key,e.data)},e.setStorageSync=function(e,t){return o.default.save(e,t)},e.getLaunchOptionsSync=function(){return null},e.removeStorageSync=function(e){o.default.rm(e)},e.login=function(e){var t=this.getStorageSync("session_info"),n="new_user";t&&t.openid&&(n=t.openid),e.success&&e.success({code:n})},e.request=function(e){var t=new XMLHttpRequest;t.timeout=e.timeout,t.onerror=function(){a.default.error("xhr error",t.readyState,e.url),"function"==typeof e.fail&&e.fail({readyState:t.readyState})},t.onabort=function(){a.default.error("xhr abort",t.readyState,e.url),"function"==typeof e.fail&&e.fail({readyState:t.readyState})},t.ontimeout=function(){a.default.error("xhr timeout",t.readyState,e.url),"function"==typeof e.fail&&e.fail({readyState:t.readyState})},t.onreadystatechange=function(){if(4===t.readyState)if(a.default.log("xhr ready state is 4",t.readyState,t.status,e.url),200===t.status){var n=t.responseText;if(n){var o={};t.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(e){var t=e.split(": "),n=t.shift();o[n]=t.join(": ")});var r=JSON.parse(n);a.default.log("xhr post success",t.status,e.url),"function"==typeof e.success&&e.success({statusCode:t.status,data:r,header:o})}else a.default.log("xhr post fail",e,t.readyState,t),"function"==typeof e.fail&&e.fail({readyState:t.readyState})}else a.default.log("xhr post fail system",e,t.readyState,t),"function"==typeof e.fail&&e.fail({readyState:t.readyState});else a.default.error("xhr ready state is not 4",t.readyState,e.url)},e.method?t.open(e.method,e.url,!0):t.open("POST",e.url,!0);var n=JSON.stringify(e.data);for(var o in e.header)e.header.hasOwnProperty(o)&&t.setRequestHeader(o,e.header[o]);t.send(n)},e.getSystemInfoSync=function(){return{benchmarkLevel:10,version:cc.sys.osVersion}},e._hasInitAdSdk=!1,e}();n.default=l,cc._RF.pop()},{"../../../Display/TipDisplay/ModalDisplay":"ModalDisplay","../../../Display/TipDisplay/ToastDisplay":"ToastDisplay","../../FrameLog":"FrameLog","../DisplayMgr":"DisplayMgr","../LocalMgr":"LocalMgr","../ViewMgr":"ViewMgr"}],BannerDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"7cfc3K14JFCybPuMxRjc+ka","BannerDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/FrameLog"),c=e("../../Frame/Manager/Tools"),s=e("../../Frame/Manager/Event/EventMgr"),l=e("../../Frame/Global"),u=e("../../Frame/Manager/Event/EventData"),d=e("../../Frame/Manager/API/WechatApi"),f=cc._decorator.ccclass,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t._nodeGameBoxItem=null,t._scrollView=null,t._nodeGameBox=null,t._gameBox=null,t.iosContent=null,t}return a(t,e),t.getUrl=function(){return"bannerDisplay"},t.prototype.initUI=function(){var e=this;this.isCanClose=!1,this.iosContent=this.getNode("ios"),this.content=this.getNode("content"),cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.ANDROID||(this.iosContent.active=!1),this._nodeGameBoxItem=this.getNode("content/gameBox/item"),this._nodeGameBoxItem.active=!1,this._nodeGameBox=this.getNode("content/gameBox"),this._scrollView=this._nodeGameBox.getComponent(cc.ScrollView),this._nodeGameBox.active=!1,this.node.y=(1334-cc.winSize.height)/2,cc.winSize.height>1472&&(this.node.y=this.node.y+30),s.default.instance().on(u.default.GET_CONFIG,function(){e._initGameBox()},this),s.default.instance().on(u.default.BANNER_ERROR,function(){e._nodeGameBox.active=!0,e.show(null)},this),s.default.instance().on(u.default.BANNER_SUCCESS,function(){e._nodeGameBox.active=!1},this),l.default.has_init.config&&this._initGameBox(),c.default.initNodeWordSpacePosition(this.content),c.default.initNodeWordSpacePosition(this.iosContent)},t.prototype._initGameBox=function(){var e=[];if(null===this._gameBox){for(var t=0;t<l.default.config.game_box.length;t++){var n=cc.instantiate(this._nodeGameBoxItem);n.active=!0,e.push(n),this._scrollView.content.addChild(n)}this._gameBox=new d.default.gameBox,this._gameBox.init(e,null,"banner\u5bfc\u51fa"),null!==this._gameBox&&this._gameBox.show(),this.schedule(this._scrollBox,2.5)}this._nodeGameBox.active=e.length>0},t.prototype._scrollBox=function(){try{if(!1===this._nodeGameBox.active)return;c.default.scrollViewOneItem(this._scrollView,"h")}catch(e){i.default.error("bannerAdvView error",e)}},t.prototype.show=function(e){try{this.node.active=!0}catch(e){i.default.error("\u663e\u793a\u5f02\u5e38",e)}},t.prototype.hide=function(){this.node.active=!1},t.prototype.playIn=function(){},t.prototype.playOut=function(){},t=o([f],t)}(r.default);n.default=h,cc._RF.pop()},{"../../Frame/FrameLog":"FrameLog","../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel"}],ConstData:[function(e,t,n){"use strict";cc._RF.push(t,"3a829pquIVDnZkHtPOnLEDG","ConstData"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.getUnlockActionName=function(t){var n="\u89e3\u9501-"+t;switch(t){case e.UNLOCK_TYPE.PASS_GAME:n="\u8df3\u8fc7\u5173\u5361";break;case e.UNLOCK_TYPE.TIPS:n="\u63d0\u793a";break;case e.UNLOCK_TYPE.NEXT_LEVEL:n="\u89e3\u9501\u5173\u5361";break;case e.UNLOCK_TYPE.GET_STRENGTH:n="\u83b7\u53d6\u4f53\u529b";break;case e.UNLOCK_TYPE.DOUBLE_STRENGTH:n="\u53cc\u500d\u4f53\u529b";break;case e.UNLOCK_TYPE.GET_GOLD:n="\u83b7\u53d6\u91d1\u5e01";break;case e.UNLOCK_TYPE.DOUBLE:n="\u53cc\u500d\u5956\u52b1";break;case e.UNLOCK_TYPE.TRY_SKIN:n="\u8bd5\u7528\u76ae\u80a4"}return n},e.WX_ADV_CONF={BANNER_MIN_WIDTH:300,BANNER_MIN_HEIGHT:100,GAME_ICON_WIDTH:72,GAME_ICON_HEIGHT:90,BANNER_INIT_DELAY:5,GAME_ICON_INIT_DELAY:10,BANNER_INTERVAL:1,GAME_BANNER_INTERVAL:1.5,GAME_ICON_INTERVAL:4.3,REPLACE_COUNT:1e5,REPLACE_TIME_OUT:3},e.UNLOCK_WAY={NONE:0,VIDEO:1,SHARE:2},e.BANNER_TYPE={NOT_DEFINE:0,BANNER:1,GRID:2},e.REWARDED_VIDEO_END_TYPE={END:1,NOT_END:2,ERROR:3},e.GAME_BOX_IMAGE_URL={BANNER:"banner_url",SCREEN:"page_url",ICON:"icon_url"},e.UNLOCK_TYPE={PASS_GAME:1,TIPS:2,GET_STRENGTH:3,DOUBLE_STRENGTH:4,NEXT_LEVEL:5,GET_GOLD:6,DOUBLE:7,TRY_SKIN:8},e.GAME_BOX_TWEEN_TYPE={SHAKE_STOP:1,SHAKE_FOREVER:2},e.GAME={Over:2,bool:!1,isBegin:!1},e}();n.default=a,cc._RF.pop()},{}],DisplayMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ae129sR51xAO5SNhcySWGs6","DisplayMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./PoolMgr"),o=e("../FrameLog"),r=e("./ViewMgr"),i=e("./UI/ViewPanel"),c=e("./Event/EventMgr"),s=e("./Event/EventData"),l=e("./API/WechatApi"),u=function(){function e(){}return e.openUI=function(e,t,n,c){var s=this;void 0===t&&(t=r.default.gameView);var u=e.getUrl();this.loadingUI[u]||this.uiList[u]?o.default.warn("ui\u52a0\u8f7d\u4e2d--\x3e...",null==this.loadingUI[u]," ui\u5df2\u5728\u663e\u793a\u5217\u8868--\x3e",null==this.uiList[u],u):(l.default.bannerAdv.hide(),this.loadingUI[u]=1,a.default.getAsyncNodeToPool(u,function(e){delete s.loadingUI[u];var a=e.getComponent(i.default);a.isInit||(a.initUI(),a.isInit=!0),s.showUI(u,e,t,n),c&&c()}),o.default.log("open view",u))},e.closeAllUI=function(){for(var e in this.uiList)this.uiList.hasOwnProperty(e)&&this._closeUI(e,this.uiList[e],!1,null)},e._closeUI=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);var l=t.getComponent(i.default);l?l.isCanClose&&(l&&!0===l.hide(r)&&(n=!0),l.scheduleOnce(function(){n?t.destroy():a.default.putNodeToPool(e,t),r.is_emit&&c.default.instance().emit(s.default.VIEW_CLOSE,e)},l.playOutTime),delete this.uiList[e],o.default.log("close View",e)):o.default.warn("close UI error",l,e,t)},e.closeUI=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null);var a=this.getUI(e),o=e.getUrl();a&&this._closeUI(o,a,t,n)},e.getUI=function(e){var t=e.getUrl();return this.uiList[t]?this.uiList[t]:null},e.showUI=function(e,t,n,a){void 0===a&&(a=null);try{t.parent=n;var r=t.getComponent(i.default);r&&r.show(a),this.uiList[e]=t,c.default.instance().emit(s.default.VIEW_OPEN,e)}catch(a){o.default.error(a,e,t,n)}},e.uiList=Object.create({}),e.loadingUI={},e}();n.default=u,cc._RF.pop()},{"../FrameLog":"FrameLog","./API/WechatApi":"WechatApi","./Event/EventData":"EventData","./Event/EventMgr":"EventMgr","./PoolMgr":"PoolMgr","./UI/ViewPanel":"ViewPanel","./ViewMgr":"ViewMgr"}],EndDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"7a635yO6fZCwr1i47Nu19p8","EndDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Global"),c=e("../../Frame/Manager/API/WechatApi"),s=e("../../Frame/Manager/ViewMgr"),l=e("../../Frame/Manager/DisplayMgr"),u=e("./HomeDisplay"),d=e("../../Frame/Manager/GameMgr"),f=e("../../Frame/Manager/Tools"),h=e("../../Frame/Manager/ResMgr"),_=e("../../Frame/Manager/Event/EventMgr"),p=e("../../Frame/Manager/Event/EventData"),g=e("../AdvDisplay/FullDisplay"),m=e("../AdvDisplay/PopBoxDisplay"),v=e("../AdvDisplay/MenuBoxDisplay"),y=cc._decorator.ccclass,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetPosition=null,t._percentage_num=0,t._nodeGameBox=null,t._buttons=null,t._nodeGameBoxItem=null,t._scrollView=null,t._config=null,t._gameBox=null,t._onCloseBox=function(e){e!==m.default.getUrl()&&e!==g.default.getUrl()&&e!==v.default.getUrl()||t._handle()},t._handle=function(){var e=t._config;c.default.bannerAdv.hide(),0===i.default.config.ad_move_conf.is_show||f.default.checkBannerIsError()?(t._buttons.setPosition(t._targetPosition.clone()),c.default.bannerAdv.show()):f.default.changeNode(f.default.delayShowCloseBtn(t._buttons,e.btn_showTime),t._buttons,i.default.config.ad_move_conf.page.end,t),f.default.settingGameBox("end",t._gameBox,!0)},t}var n;return a(t,e),n=t,t.getUrl=function(){return"endDisplay"},t.prototype.initUI=function(){this._percentage_num=0,this._buttons=this.getNode("button"),this._targetPosition=this._buttons.getPosition().clone(),this._config=i.default.config.ad_move_conf.page.end,this._nodeGameBox=this.getNode("gameBox"),0===i.default.orderStr.end.length&&(this._nodeGameBox.active=!1),this._scrollView=this._nodeGameBox.getComponent(cc.ScrollView),this._nodeGameBoxItem=this._scrollView.content.children[0],this._nodeGameBoxItem.position=new cc.Vec3(0,0,0),this._nodeGameBoxItem.active=!1;for(var e=[],t=0;t<i.default.config.game_box.length;t++){var n=cc.instantiate(this._nodeGameBoxItem);n.active=!0,e.push(n),this._scrollView.content.addChild(n)}this._gameBox=new c.default.gameBox,this._gameBox.init(e,null,"end",!0,this),f.default.checkNodeIsShow()&&f.default.changeNodePosition([this._buttons])},t.prototype.show=function(e){var t;this._paramData=e,_.default.instance().on(p.default.VIEW_CLOSE,this._onCloseBox,this),f.default.gameExport("end",this._gameBox),this._nodeGameBox.active=i.default.config.box_conf.end.is_box,this._paramData.isSuccess?(d.default.addLevel(),t="victory"):t="defeat",h.default.setSpriteGame(this._buttons.getComponent(cc.Sprite),"end/"+t),this.onTouch(this._buttons,function(){l.default.openUI(u.default,s.default.homeView,{},function(){l.default.closeUI(n,!0,{is_emit:!0})})}),this.playIn(),0===i.default.orderStr.end.length&&this._handle()},t.prototype.playIn=function(){var e=this;this.schedule(function(){f.default.scrollViewOneItem(e._scrollView,"v")},i.default.config.ad_move_conf.page.end.update_time)},t.prototype.playOut=function(){},t.prototype.hide=function(e){_.default.instance().off(p.default.VIEW_CLOSE,this._onCloseBox,this)},t=n=o([y],t)}(r.default);n.default=b,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/DisplayMgr":"DisplayMgr","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/GameMgr":"GameMgr","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel","../../Frame/Manager/ViewMgr":"ViewMgr","../AdvDisplay/FullDisplay":"FullDisplay","../AdvDisplay/MenuBoxDisplay":"MenuBoxDisplay","../AdvDisplay/PopBoxDisplay":"PopBoxDisplay","./HomeDisplay":"HomeDisplay"}],EventData:[function(e,t,n){"use strict";cc._RF.push(t,"c8d22ka13NOoa6UW47Lz5+q","EventData"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.CHANGE_UNLOCK_TYPE="change_unlock_type",e.VIEW_CLOSE="view_close",e.UPDATE_WX_USER_INFO="update_wx_user_info",e.VIEW_OPEN="view_open",e.BANNER_ERROR="banner_error",e.BANNER_SUCCESS="banner_success",e.GET_CONFIG="get_config",e.CLOSE_LOADING="close_loading",e.STRENGTH_CHANGE="strength_change",e.GAME_CLOSE="game_close",e.CHANGE_SKIN="change_skin",e.START_GAME="start_game",e.GAME_BEGIN="home_view_hide",e.GAME_OVER="game_over",e.CreateITEM="create_item",e.HOME_BEGIN="home_begin",e.LONG_START="long_start",e.LONG_END="long_end",e.CHANGE_SECTION_INDEX="changeSectionIndex",e.UPDATE_BLOOD="update_blood",e}();n.default=a,cc._RF.pop()},{}],EventMgr:[function(e,t,n){"use strict";cc._RF.push(t,"47ab0gbRwZJ2bIbThAjrGLf","EventMgr");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var n=e.call(this)||this;return t._instance?n:(t._instance=n,n)}return a(t,e),t.instance=function(){return this._instance},t._instance=new t,t}(e("./EventPar").default);n.default=o,cc._RF.pop()},{"./EventPar":"EventPar"}],EventPar:[function(e,t,n){"use strict";cc._RF.push(t,"5ae2au8zgdDkrzcTzaXSKta","EventPar");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../FrameLog"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.on=function(t,n,a,r){if(t&&a)return e.prototype.on.call(this,t,n,a,r);o.default.error("\u4e8b\u4ef6\u5bf9\u8c61|\u7c7b\u578b\u4e3a\u7a7a===> type = ",t,"target =",a)},t.prototype.once=function(t,n,a){if(t&&a)return e.prototype.once.call(this,t,n,a);o.default.error("\u4e8b\u4ef6\u5bf9\u8c61|\u7c7b\u578b\u4e3a\u7a7a===> type = ",t,"target =",a)},t.prototype.off=function(t,n,a){if(t&&a)return e.prototype.off.call(this,t,n,a);o.default.error("\u4e8b\u4ef6\u5bf9\u8c61|\u7c7b\u578b\u4e3a\u7a7a===> type = ",t,"target =",a)},t.prototype.targetOff=function(t){if(t)return e.prototype.targetOff.call(this,t);o.default.error("\u4e8b\u4ef6\u5bf9\u8c61===>  target =",t)},t.prototype.emit=function(t,n,a,o,r,i){return e.prototype.emit.call(this,t,n,a,o,r,i)},t}(cc.EventTarget);n.default=r,cc._RF.pop()},{"../../FrameLog":"FrameLog"}],FrameLog:[function(e,t,n){"use strict";cc._RF.push(t,"6a6d4hK0/1Gy51Z4m4zWRms","FrameLog"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Global"),o=function(){function e(){}return e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.IS_DEBUG&&console.log.apply(cc.log,e)},e.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.IS_DEBUG&&console.warn.apply(cc.warn,e)},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(cc.error,e)},e}();n.default=o,cc._RF.pop()},{"./Global":"Global"}],FullDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"e583cWcGvBAqYoOBublWYuW","FullDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/API/WechatApi"),c=e("../../Frame/Global"),s=e("../../Frame/Manager/Tools"),l=e("../../Frame/FrameLog"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._param=null,t._nodeContinueBtn=null,t._nodeGameBoxItem=null,t._targetPosition=null,t._scrollView=null,t._nodeGameBox=null,t._nodeContainer=null,t._gameBox=null,t}var n;return a(t,e),n=t,t.getUrl=function(){return"fullDisplay"},t.prototype.initUI=function(){this._nodeContainer=this.getNode("table"),this._nodeContinueBtn=this.getNode("table/button"),this._targetPosition=this._nodeContinueBtn.getPosition().clone(),this._nodeGameBox=this.getNode("table/gameBox"),this._scrollView=this._nodeGameBox.getComponent(cc.ScrollView),this._nodeGameBoxItem=this._scrollView.content.children[0],this._nodeGameBoxItem.position=new cc.Vec3(0,0,0),this._nodeGameBoxItem.active=!1;for(var e=[],t=0;t<c.default.config.game_box.length;t++){var n=cc.instantiate(this._nodeGameBoxItem);n.active=!0,e.push(n),this._scrollView.content.addChild(n)}this._gameBox=new i.default.gameBox,this._gameBox.init(e,null,"\u597d\u53cb\u90fd\u5728\u73a9"),s.default.checkNodeIsShow()&&s.default.changeNodePosition([this._nodeContinueBtn]),this.getNode("bg").color=this.node.color.fromHEX(c.default.config.ad_move_conf.page.full_box.color)},t.prototype.show=function(e){var t=this;try{this._param=e,this.node.active=!0,null!==this._gameBox&&this._gameBox.show(),this.onTouch(this._nodeContinueBtn,function(){s.default.viewExport(t._param.data,n)}),this.playIn()}catch(e){l.default.error("\u663e\u793a\u5f02\u5e38",e)}},t.prototype.hide=function(){this.unscheduleAllCallbacks(),null!==this._gameBox&&this._gameBox.hide(),this.playOut()},t.prototype.playIn=function(){var e=this,t=c.default.config.ad_move_conf.page.full_box,n=s.default.delayShowCloseBtn(this._nodeContinueBtn,t.btn_showTime);0===c.default.config.ad_move_conf.is_show||s.default.checkBannerIsError()||!s.default.checkIsShow(t.per)?(0===c.default.config.ad_move_conf.is_show?this._nodeContinueBtn.setPosition(this._targetPosition.clone()):s.default.setExportPos(this._nodeContinueBtn),i.default.bannerAdv.show()):-1===c.default.config.box_conf.force.indexOf("full")?s.default.changeNode(n,this._nodeContinueBtn,t,this):s.default.forceExport(function(){cc.tween(e._nodeContinueBtn).by(.1,{y:200},{easing:"smooth"}).start()},function(){s.default.changeNode(n,e._nodeContinueBtn,t,e)}),this.schedule(function(){s.default.scrollViewOneItem(e._scrollView,"v")},c.default.config.ad_move_conf.page.menu_box.update_time)},t.prototype.playOut=function(){},t=n=o([u],t)}(r.default);n.default=d,cc._RF.pop()},{"../../Frame/FrameLog":"FrameLog","../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel"}],GameBoxDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"818f9vwAlxHoJPCnpm8dKvw","GameBoxDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewUI"),i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t=o([c],t)}(r.default));n.default=s,cc._RF.pop()},{"../../Frame/Manager/UI/ViewUI":"ViewUI"}],GameDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"c3076y4Y4hOJ6t/KXwawrNG","GameDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/Event/EventMgr"),c=e("../../Frame/Manager/Event/EventData"),s=e("../../Frame/Global"),l=e("../../Frame/Manager/Tools"),u=e("../../Frame/Manager/DisplayMgr"),d=e("../../Frame/Manager/ViewMgr"),f=e("../AdvDisplay/TreaBoxDisplay"),h=e("./EndDisplay"),_=e("../../Frame/Manager/API/WechatApi"),p=e("../../Frame/Manager/SoundMgr"),g=e("../../Frame/Manager/LockMgr"),m=e("../../Frame/Data/ConstData"),v=e("../AdvDisplay/FullDisplay"),y=e("../AdvDisplay/MenuBoxDisplay"),b=e("../AdvDisplay/PopBoxDisplay"),w=e("../../Frame/Manager/ResMgr"),A=cc._decorator,E=A.ccclass,I=A.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.L=null,t.K=null,t.J=null,t.L1=null,t.K1=null,t.J1=null,t.item=null,t._paramData={},t._gameBox=null,t.lastItem=null,t.itemIndex=0,t._long=null,t._bpm=0,t._sectionIndex=-1,t._bpmList=[],t._musicIndex=0,t._touchPointIndex=0,t._touchData=[],t._itemType=[0,2,5],t._baseNode=null,t._isLong=!1,t._movePos=0,t._GameBegin=function(){i.default.instance().off(c.default.GAME_BEGIN,t._GameBegin,t),l.default.checkPer(s.default.config.box_conf.game.is_banner)?_.default.bannerAdv.show():_.default.bannerAdv.hide()},t._onCloseTreasure=function(e){e===f.default.getUrl()&&i.default.instance().emit(c.default.GAME_BEGIN)},t._onCloseBox=function(e){e!==b.default.getUrl()&&e!==v.default.getUrl()&&e!==y.default.getUrl()||l.default.settingGameBox("game",t._gameBox)},t._GameOver=function(e){var a;s.default.isOver||(s.default.isOver=!0,a=e?"victory":"defeat",p.default.playAudioGame(a).then(),t._paramData.isSuccess=e,l.default.vibrateLong(),t.scheduleOnce(function(){u.default.openUI(h.default,d.default.gameView,t._paramData,function(){u.default.closeUI(n,!0,{is_emit:!0})})},m.default.GAME.Over))},t}var n;return a(t,e),n=t,t.getUrl=function(){return"gameDisplay"},t.prototype.initUI=function(){var e=this;s.default.isOver=!1,s.default.ItemIndex=0,this._long=this.getNode("long"),this._baseNode=this.getNode("base"),i.default.instance().on(c.default.CreateITEM,function(t,n){e.itemIndex++;var a=cc.instantiate(e.item),o=258.5;switch(t.first.type){case"L":break;case"K":o*=2;break;case"J":o*=4;break;case"M":-1!==l.default.M&&(a=e.lastItem);break;case"m":-1!==l.default.M&&(e.itemIndex--,a=e.lastItem)}a.height=o,a.parent=e.getNode("base"),a.zIndex=-e.itemIndex,n.parent=a,n.x=l.default.getIndex(t.first.type),e.lastItem=a},this),i.default.instance().on(c.default.CHANGE_SECTION_INDEX,function(){e._sectionIndex++,e._bpm=60/e._bpmList[e._sectionIndex]*s.default.speed[e._musicIndex][e._sectionIndex]},this),s.default.MusicData.musics.forEach(function(t,n){e._bpmList.push(t.bpm),t.scores.forEach(function(t,a){var o,r=e._itemType.some(function(e){return e===s.default.itemIndex});if(s.default.isBlock=r,r)switch(t.first.type){case"K":o=cc.instantiate(e.K1).getComponent("K");break;case"J":o=cc.instantiate(e.J1).getComponent("J");break;default:o=cc.instantiate(e.L1).getComponent("L")}else switch(t.first.type){case"K":o=cc.instantiate(e.K).getComponent("K");break;case"J":o=cc.instantiate(e.J).getComponent("J");break;default:o=cc.instantiate(e.L).getComponent("L")}0===a&&0!==n&&(o.isChange=!0),o.data=t,o.show()})}),i.default.instance().on(c.default.UPDATE_BLOOD,function(t){cc.tween(t).repeat(3,cc.tween().to(.1,{opacity:0},{easing:"smooth"}).to(.1,{opacity:255},{easing:"smooth"})).to(.2,{opacity:0},{easing:"elasticInOut"}).call(function(){}).start(),s.default.is_Run=!1,e._GameOver(!1)},this)},t.prototype.update=function(e){var t=this,n=e*(1/this._bpm*285.5);if(s.default.is_Run){this._baseNode.y-=n,this._movePos+=n,this._baseNode.height-this._movePos+258.5<0&&(s.default.is_Run=!1,this._GameOver(!0));var a=this._baseNode.children[this._baseNode.childrenCount-s.default.ItemIndex-1];if(a&&a.y+a.height<this._movePos)if(2===a.childrenCount){if(50!==a.children[0].opacity||50!==a.children[1].opacity){var o=0;50!==a.children[0].opacity&&(o=0),50!==a.children[1].opacity&&(o=1),s.default.is_Run=!1,cc.tween(a.children[o]).repeat(3,cc.tween().to(.1,{opacity:0},{easing:"smooth"}).to(.1,{opacity:255},{easing:"smooth"})).to(.2,{opacity:0},{easing:"elasticInOut"}).call(function(){t._GameOver(!1)}).start()}}else 50!==a.children[0].opacity&&(s.default.is_Run=!1,cc.tween(a.children[0]).repeat(3,cc.tween().to(.1,{opacity:0},{easing:"smooth"}).to(.1,{opacity:255},{easing:"smooth"})).to(.2,{opacity:0},{easing:"elasticInOut"}).call(function(){t._GameOver(!1)}).start())}if(this._isLong){if(this._long.y-=n,this._long.height+=n,this._touchData===[]||0===this._touchData.length)return;if(this._touchPointIndex>=this._touchData.length)return;if(this._long.height>this._touchData[this._touchPointIndex].node.height)return;if(this._long.height>this._touchData[this._touchPointIndex].y){var r=this._touchData[this._touchPointIndex].audio;if(null===r)return;l.default.analyticalAudio(r).forEach(function(e){var n=t._touchData[t._touchPointIndex].node;n.getComponent("K")?n.getComponent("K").playSecondAudio(e):n.getComponent("J")&&n.getComponent("J").playSecondAudio(e)}),this._touchPointIndex++}}},t.prototype.show=function(e){var t=this;p.default.music(!1),this._paramData=e,this._musicIndex=e.index;var n=this._itemType.some(function(e){return e===s.default.itemIndex});if(s.default.isBlock=n,n){var a=this.getNode("base/item/L");this.getNode("base/item/L/label").active=!0,w.default.setSpriteGame(this._long.getComponent(cc.Sprite),"game/core/w2"),w.default.setSpriteGame(a.getComponent(cc.Sprite),"game/core/s1")}i.default.instance().on(c.default.GAME_BEGIN,this._GameBegin,this),i.default.instance().on(c.default.VIEW_CLOSE,this._onCloseBox,this),i.default.instance().on(c.default.GAME_OVER,this._GameOver,this),i.default.instance().on(c.default.LONG_START,function(e,n,a,o,r){t._isLong=!0,t._long.height=100,n=l.default.positionConversion(t.node,e.parent,n),(a=l.default.positionConversion(t.node,e,a)).y-=20,t._long.setPosition(n),t._long.height=o,r.forEach(function(n){t._touchData.push({audio:n.audio,y:n.point.y,node:e})})},this),i.default.instance().on(c.default.LONG_END,function(){t._isLong=!1;var e=cc.v3(-600,-300,0);t._long.setPosition(e),t._touchPointIndex=0},this);var o=this.getNode("base/item/L");0===this._musicIndex&&1===s.default.extUserData.curr_level&&(this.getNode("tips").active=!0),this.onTouch(o,function(){s.default.is_Run=!0,o.opacity=50,s.default.ItemIndex++,t.getNode("tips").active=!1,i.default.instance().emit(c.default.CHANGE_SECTION_INDEX)},"",1),this.playIn()},t.prototype.hide=function(e){this._gameBox.hide()},t.prototype.playIn=function(){var e=this;w.default.setPrefabHome("display/gameBox").then(function(t){var n=cc.instantiate(t);n.parent=e.node,n.setPosition(cc.v3(0,0,0));var a=[];n.children.forEach(function(e){a.push(e)}),e._gameBox=new _.default.gameBox,e._gameBox.init(a,m.default.GAME_BOX_TWEEN_TYPE.SHAKE_STOP,"\u9996\u9875\u6302\u4ef6",!0,e),l.default.settingGameBox("game",e._gameBox)}),l.default.checkIsShow(s.default.config.ad_move_conf.begin_game.box_video)?_.default.rewardedVideo.show({success:function(e){switch(e){case m.default.REWARDED_VIDEO_END_TYPE.END:case m.default.REWARDED_VIDEO_END_TYPE.NOT_END:break;case m.default.REWARDED_VIDEO_END_TYPE.ERROR:default:g.default._shareAppMessage("video")}i.default.instance().emit(c.default.GAME_BEGIN)},callObj:this,type:"video"}):l.default.checkIsShow(s.default.config.ad_move_conf.begin_game.treasure_box)?l.default.checkBannerIsError()?i.default.instance().emit(c.default.GAME_BEGIN):(i.default.instance().on(c.default.VIEW_CLOSE,this._onCloseTreasure,this),u.default.openUI(f.default,d.default.tipView)):i.default.instance().emit(c.default.GAME_BEGIN)},t.prototype.playOut=function(){},o([I(cc.Prefab)],t.prototype,"L",void 0),o([I(cc.Prefab)],t.prototype,"K",void 0),o([I(cc.Prefab)],t.prototype,"J",void 0),o([I(cc.Prefab),I(cc.Prefab)],t.prototype,"L1",void 0),o([I(cc.Prefab)],t.prototype,"K1",void 0),o([I(cc.Prefab)],t.prototype,"J1",void 0),o([I(cc.Prefab)],t.prototype,"item",void 0),t=n=o([E],t)}(r.default);n.default=M,cc._RF.pop()},{"../../Frame/Data/ConstData":"ConstData","../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/DisplayMgr":"DisplayMgr","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/LockMgr":"LockMgr","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/SoundMgr":"SoundMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel","../../Frame/Manager/ViewMgr":"ViewMgr","../AdvDisplay/FullDisplay":"FullDisplay","../AdvDisplay/MenuBoxDisplay":"MenuBoxDisplay","../AdvDisplay/PopBoxDisplay":"PopBoxDisplay","../AdvDisplay/TreaBoxDisplay":"TreaBoxDisplay","./EndDisplay":"EndDisplay"}],GameMgr:[function(e,t,n){"use strict";cc._RF.push(t,"9a682q0odJKjKJvr9XvAcqp","GameMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../SDK/sdk"),o=e("./Event/EventMgr"),r=e("../Global"),i=e("./Event/EventData"),c=e("../FrameLog"),s=e("./API/WechatApi"),l=e("./Tools"),u=e("../../Main"),d=function(){function e(){}return e.updateWxUser=function(e){r.default.hasScopeUserInfo=!0,e.avatarUrl&&(r.default.userInfo.headimgurl=e.avatarUrl),e.nickName&&(r.default.userInfo.nickname=e.nickName),o.default.instance().emit(i.default.UPDATE_WX_USER_INFO),a.updateWxUser(e)},e.updateAdvTime=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=1),void 0===n&&(n=""),r.default.config.adv_push&&1!==r.default.config.adv_push.is_show?c.default.log("not update adv time",r.default.config.adv_push):(this._advInfo.time=(new Date).getTime()/1e3,this._advInfo.enable=e,this._advInfo.showTime=t,this._advInfo.name=n)},e.updateAdvIn=function(){if(s.default.bannerAdv.isShow()&&!l.default.checkBannerIsError())if(!0===this._advInfo.enable){var e=(new Date).getTime()/1e3;e>this._advInfo.time+this._advInfo.showTime?c.default.log("not update adv in, time is out",this._advInfo,e):this._advInfo.advIn=!0}else c.default.log("not update adv in, is not enable",this._advInfo,this._advInfo.advIn);else c.default.log("not update adv in",s.default.bannerAdv.isShow(),l.default.checkBannerIsError())},e.pushAdv=function(){if(s.default.bannerAdv.isShow()&&!l.default.checkBannerIsError())if(!0===this._advInfo.enable&&!0===this._advInfo.advIn){c.default.log("push adv success",this._advInfo);var e=s.default.bannerAdv.getAdvInfo();e&&this._advInfo.name&&(e.name=this._advInfo.name),a.pushAdv(e,null,null),this._advInfo.enable=!1;var t=60;r.default.config.adv_push&&void 0!==r.default.config.adv_push.space_time&&(t=r.default.config.adv_push.space_time),t>0&&(l.default.changeAllAdvMove(0),u.default.Ins.scheduleOnce(function(){l.default.changeAllAdvMove(100)},t))}else c.default.log("not push adv, is not enable",this._advInfo,this._advInfo.advIn);else c.default.log("not push adv",s.default.bannerAdv.isShow(),l.default.checkBannerIsError())},e.addLevel=function(){r.default.extUserData.curr_level++,r.default.extUserData.curr_level>r.default.extUserData.level&&(r.default.extUserData.level=r.default.extUserData.curr_level),r.default.extUserData.rank_level=r.default.extUserData.level,r.default.currLevel=0,this.saveUserExtData()},e.unlockSkin=function(e){r.default.extUserData.skin_data[e]=!0},e.changeSkin=function(e){r.default.extUserData.use_skin=e,o.default.instance().emit(i.default.CHANGE_SKIN),this.saveUserExtData()},e.unlockScene=function(e){r.default.extUserData.scene_skin_data[e]=!0},e.changeScene=function(e){r.default.extUserData.use_scene_skin=e,o.default.instance().emit(i.default.CHANGE_SKIN),this.saveUserExtData()},e.changeShareScore=function(e){r.default.extUserData.share_score+=e,o.default.instance().emit(i.default.CHANGE_UNLOCK_TYPE),this.saveUserExtData("local")},e.saveUserExtData=function(e){void 0===e&&(e="system");try{if(a.updateUserExtData(r.default.extUserData,function(e){},null,{},e),null!==this._lastUploadWxLevel&&this._lastUploadWxLevel===r.default.extUserData.level)return!1;if(!s.default.systemInterface.setUserCloudStorage)return!1;s.default.systemInterface.setUserGroup&&s.default.systemInterface.setUserGroup({groupId:"wLevel"}),this._lastUploadWxLevel=r.default.extUserData.level;var t=r.default.extUserData.level,n=Math.floor((new Date).getTime()/1e3),o={};o[r.default.OPEN_DATA_KEY]={score:t,update_time:n};var i=JSON.stringify(o),l=[{key:"bLevel",value:t.toString()},{key:"wLevel",value:i}];s.default.systemInterface.setUserCloudStorage({KVDataList:l,success:function(){c.default.log("\u4e0a\u62a5\u7528\u6237\u5173\u5361\u6570\u636e\u6210\u529f",l)},fail:function(e){c.default.error("\u4e0a\u62a5\u7528\u6237\u5173\u5361\u6570\u636e\u5931\u8d25",l,e)}})}catch(e){c.default.error("\u4fdd\u5b58\u7528\u6237\u6570\u636e\u5f02\u5e38",e)}},e.pushUserAction=function(e){a.pushUserAction(e,function(e){c.default.log("\u4e0a\u62a5\u7528\u6237\u884c\u4e3a\u6210\u529f")})},e._lastUploadWxLevel=null,e._advInfo={time:null,showTime:null,enable:!1,advIn:!1,name:""},e}();n.default=d,cc._RF.pop()},{"../../Main":"Main","../../SDK/sdk":"sdk","../FrameLog":"FrameLog","../Global":"Global","./API/WechatApi":"WechatApi","./Event/EventData":"EventData","./Event/EventMgr":"EventMgr","./Tools":"Tools"}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"415abiUWTZP9KfVn5Q9muT0","Global"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.config={subscribe_conf:{is_show:0,level:2,per:0,system_rank:1,system_interactive:0},box_conf:{force:[],force_id:"",home:{is_banner:0,is_box:0,is_pop:0,is_full:0,is_menu:0,order:[]},game:{is_banner:0,is_box:0,is_pop:0,is_full:0,is_menu:0,order:[]},end:{is_banner:0,is_box:0,is_pop:0,is_full:0,is_menu:0,order:[]},hand_and_icon:{hand:8,icon:0}},game_box:[{id:20387,app_id:"wx3c8bf4f1bd35019f",is_third:0,name:"\u5ba0\u7269\u5c0f\u62a4\u58eb",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY9jG-6VB6cK&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/3974/2020-12-08/9ee1043875847593195569ca7d71fff2.jpg",banner_url:"",page_url:"",poster_url:"",sort:1,icon_area_url:""},{id:20386,app_id:"wx3c8bf4f1bd35019f",is_third:0,name:"\u5ba0\u7269\u5c0f\u62a4\u58eb",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY9jG-6VB6cK&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2767/2020-11-07/61d23b5325a431ca5a7cc58f4e22a331.jpg",banner_url:"",page_url:"",poster_url:"",sort:1,icon_area_url:""},{id:15702,app_id:"wx30f1931bc9c4b4da",is_third:0,name:"\u505a\u676f\u996e\u6599",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY8VWDk--KEA&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1197/2020-11-17/05fff1bbb3e7a64f4aa86c94494f6542.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:15140,app_id:"wxa9dff0991c3d3b7a",is_third:0,name:"\u6b22\u4e50\u679c\u6c41\u5e97",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQANwZ_Pmavk0Xw&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1197/2020-11-17/50b2e49ffbe8057c2a519c6add17da99.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:15006,app_id:"wxa9dff0991c3d3b7a",is_third:0,name:"\u6b22\u4e50\u679c\u6c41\u5e97",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQANwZ_Pmavk0Xw&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1448/2020-06-29/15290d0be3e1f9c242c03f5310b50835.jpg",banner_url:"",page_url:"",poster_url:"",sort:1,icon_area_url:""},{id:15005,app_id:"wx520ad5897f2dc136",is_third:0,name:"\u69a8\u6c41\u771f\u89e3\u538b",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAMQg1OoHhV03w&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1509/2020-06-30/cf53e858d030953df96fba1bc799d6c4.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:15004,app_id:"wx48acd4a0fd5f27e7",is_third:0,name:"\u6b22\u4e50\u6c49\u5821\u5e97",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAN7g1__qvOIXA&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1197/2020-11-19/adfb5748e32956624c4d1e6ee6f76410.jpg",banner_url:"",page_url:"",poster_url:"",sort:1,icon_area_url:""},{id:14388,app_id:"wx30f1931bc9c4b4da",is_third:0,name:"\u505a\u676f\u996e\u6599",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY8VWDk--KEA&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1691/2020-07-30/5e81a7802949b5f3dc8513664b9ca576.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:14341,app_id:"wx520ad5897f2dc136",is_third:0,name:"\u69a8\u6c41\u771f\u89e3\u538b",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAMQg1OoHhV03w&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/3573/2020-11-09/bedd7dd01f502fde661a330e01965d4a.png",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:14259,app_id:"wx20eeedb26ff6ce61",is_third:0,name:"\u96ea\u7cd5\u9ad8\u624b",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAMowT4cCTqXMQ&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/771/2020-08-28/24af242f10ab79ceb15782fa0c407435.jpg",banner_url:"",page_url:"",poster_url:"",sort:1,icon_area_url:""},{id:14219,app_id:"wx20eeedb26ff6ce61",is_third:0,name:"\u86cb\u7cd5\u7f8e\u98df",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAMowT4cCTqXMQ&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2269/2020-08-20/a11a88012d5df7b3d311ad74ff8cb791.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:14139,app_id:"wxa0809d3da9336ca0",is_third:0,name:"\u516c\u4e3b\u5316\u5986\u5e08",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQANnR4ENp0ewVQ&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/3526/2020-11-02/8eef3b137a08637d7417642cdb72bd15.png",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:14100,app_id:"wx61a16badd5c132ca",is_third:0,name:"\u5f69\u7ed8\u5c0f\u516c\u4e3b",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY8wb6EF068c&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2642/2020-09-12/feb1887e232c8554241d410d04989355.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13607,app_id:"wx61a16badd5c132ca",is_third:0,name:"\u5f69\u7ed8\u5c0f\u516c\u4e3b",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY8wb6EF068c&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/3440/2020-10-30/459d3b45e1e4afcce76771a5933919c9.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13217,app_id:"wx343d31ebb6b676ff",is_third:0,name:"\u6551\u6551\u5c0f\u4e11\u9c7c",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAN8D7lwp9wfIg&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2491/2020-09-24/3570007c924e13fe5253bec03c0dae61.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13216,app_id:"wx343d31ebb6b676ff",is_third:0,name:"\u6551\u6551\u5c0f\u4e11\u9c7c",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAN8D7lwp9wfIg&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2484/2020-09-08/19f47f5621196858fd68687225f256c9.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13215,app_id:"wx981dc467973a232c",is_third:0,name:"\u6211\u7231\u4fee\u811a",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQANQdw__ayxvkQ&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2767/2020-10-19/70b821edeaf0170216b484cbac32cdd9.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13214,app_id:"wx981dc467973a232c",is_third:0,name:"\u6211\u7231\u4fee\u811a",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQANQdw__ayxvkQ&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/769/2020-09-01/ac047c16f7691c32654768b1f6196d44.png",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13211,app_id:"wx48acd4a0fd5f27e7",is_third:0,name:"\u6b22\u4e50\u6c49\u5821\u5e97",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAN7g1__qvOIXA&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1691/2020-07-30/5e81a7802949b5f3dc8513664b9ca576.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13209,app_id:"wxe8f2754535789361",is_third:0,name:"\u5f69\u7ed8\u753b\u5bb6",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY80POkjshYa&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1197/2020-10-06/19d241f40b87f49ce8b5c14c68aced61.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13208,app_id:"wxe8f2754535789361",is_third:0,name:"\u5f69\u7ed8\u753b\u5bb6",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQY80POkjshYa&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2643/2020-08-27/a9ba9f432f1276358163824010b29aef.png",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13205,app_id:"wxa0809d3da9336ca0",is_third:0,name:"\u516c\u4e3b\u5316\u5986\u5e08",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQANnR4ENp0ewVQ&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2643/2020-09-02/9a11e16c817f06fb7019eb415cea57eb.png",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13195,app_id:"wx510f8ba0b6599c77",is_third:0,name:"\u6b22\u4e50\u5976\u8336\u5e97",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAM8Ok7Mz19zGw&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/2269/2020-10-09/a488cad838c27dd3094ed6e4346f4943.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""},{id:13194,app_id:"wx510f8ba0b6599c77",is_third:0,name:"\u6b22\u4e50\u5976\u8336\u5e97",navigate_type:1,path:"?wxgamecid=CCBgAAoXkpQAM8Ok7Mz19zGw&channel_id=hlmsd",is_hot:1,is_recommend:1,is_multipoint:2,icon_area:[""],icon_url:"https://oss.aligame.top/1621/2020-07-31/9eb50a60974139e732895be2ba67c698.jpg",banner_url:"",page_url:"",poster_url:"",sort:255,icon_area_url:""}],tips:{share:["\u8bf7\u5206\u4eab\u523030\u4eba\u4ee5\u4e0a\u5927\u7fa4","\u8be5\u7fa4\u5df2\u5206\u4eab\uff0c\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4","\u8be5\u7fa4\u5df2\u5206\u4eab\uff0c\u8bf7\u5206\u4eab\u5230\u53e6\u5916\u7684\u7fa4"]},finger:{home:{begin:60,rank:10,sign:10,skin:5,level:5,more_game:10}},sdk:{no_action:1,no_export:0,no_share:0,no_dau:0},share_img:[{id:211,title:"\u4e00\u8d77\u505a\u997c\u5e72\uff01",images:"https://oss.aligame.top/3573/2020-10-30/6d8e6ddacd637f820e7d84f4321995f9.png",pos:"",image_url_id:""}],ad_move_conf:{is_show:0,level:1,per:100,update:100,begin_game:{treasure_box:100,box_video:0},page:{pop_box:{per:100,btn_showTime:0,wx_show:.5,delay:3,btn_move_time:1,color:"#58abff",update_time:1.8},full_box:{per:100,btn_showTime:0,wx_show:.5,delay:3,btn_move_time:1,color:"#58abff",update_time:1.8},menu_box:{per:100,btn_showTime:0,wx_show:.5,delay:3,btn_move_time:1,color:"#58abff",update_time:1.8},end:{per:100,btn_showTime:0,wx_show:.5,delay:3,btn_move_time:1,color:"#58abff",update_time:1.8},trea_box:{min:1,max:5,is_force:0}}},tpl_id:[],game_conf:{close_btn:{min:3,max:3,is_show:1},try_skin:100},adv_interval:{wx:30,force_wx:30,self:10,is_wx:0},unlock_conf:{share:{score:160,change:100,min_time:3,per:95,must_pass_min:2,must_pass_max:5},video:{change:1,not_end_change:3},next_level:0,direct_strength:0,direct_gold:0},pos_share_img:[],screen_adv_config:{space_time:30,per:50,time_out:.2,min_time_out:.1},adv_unit_conf:{banner:["adunit-85a835b6b16913df","adunit-3b1375d3fb0a92de","adunit-dea045bb65b457f5","adunit-2e5b675b6f2e2a9c","adunit-788e0b40ed1e3a6a","da63f01765a61570","a489e7f593d1223a"],rewarded_video:["adunit-9d806cbf7dd7e609"],grid:["adunit-f703651ec107c5dc","0f1cc7c4f036633a"],grid_count:5},adv_push:{is_show:1,space_time:30}},e.orderStr={home:[],game:[],end:[]},e.has_init={config:!1,user:!1,home:!1,game:!1},e.bundle={game:null,home:null},e.sessionInfo={user_code:null,openid:null},e.userInfo={headimgurl:"",nickname:""},e.hasSubscribeSystemMessageInteractive=!1,e.hasSubscribeSystemMessageRank=!1,e.hasScopeUserInfo=!1,e.extUserData={curr_level:1,level:1,rank_level:0,share_score:100,conf:{music:1,effect:1,vibrate:1}},e.TWEEN_TIME={GAME_BOX:4},e.FORCE_UPDATE_ADV=!0,e.application_id=null,e.NAVIGATE_APP_HAS_GO={},e.API_HOST="https://api.aligame.top/",e.DATA_HOST="https://data.aligame.top/",e.IS_APP=!1,e.IS_OPEN_DATA=!1,e.IS_TEST=!1,e.OPEN_DATA_KEY="wxgame",e.IS_DEBUG=!1,e.version="20210204v1.0.1",e.APPLICATION_ID={WECHAT:3573,TT:null,QQ:null,APP_IOS:null,APP_ANDROID:null},e.currLevel=0,e.isOver=!1,e.lastFristAudio="",e.lastSecondAudio="",e.is_Run=!1,e.itemIndex=0,e.isBlock=!1,e.MusicData=null,e.ItemIndex=0,e.speed=[[.8,.7,.6],[.7,.7,.7],[.8,.6,.6],[.9,.8,.8],[.8,.7,.7],[.7,.6,.5],[.6,.5,.4],[.5,.48,.45],[1.1,1,.9],[.8,.7,.6],[.9,.8,.7]],e}();n.default=a,cc._RF.pop()},{}],HomeDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"903fasWQxhBrJkHpF+d8r24","HomeDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/Tools"),c=e("../../Frame/Manager/API/WechatApi"),s=e("../../Frame/Data/ConstData"),l=e("../../Frame/Manager/DisplayMgr"),u=e("../../Frame/Manager/ViewMgr"),d=e("../../Frame/Manager/Event/EventMgr"),f=e("../../Frame/Manager/Event/EventData"),h=e("../../Frame/Global"),_=e("../../Frame/FrameLog"),p=e("../../Frame/Manager/ActionMgr"),g=e("./GameDisplay"),m=e("../AdvDisplay/PopBoxDisplay"),v=e("../AdvDisplay/FullDisplay"),y=e("../AdvDisplay/MenuBoxDisplay"),b=e("../../Frame/Manager/ResMgr"),w=e("../../Frame/Manager/LockMgr"),A=cc._decorator,E=A.ccclass,I=A.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._exportData=null,t._nodeMoreGameBtn=null,t.levelConfig=null,t._levelConfig=null,t._gameBox=null,t._paramData={},t._onCloseBox=function(e){e!==m.default.getUrl()&&e!==v.default.getUrl()&&e!==y.default.getUrl()||i.default.settingGameBox("home",t._gameBox)},t}var n;return a(t,e),n=t,t.getUrl=function(){return"homeDisplay"},t.prototype.initUI=function(){var e=this;this._exportData=h.default.config.box_conf.home,this._nodeMoreGameBtn=this.getNode("button/more"),b.default.setPrefabHome("display/gameBox").then(function(t){var n=cc.instantiate(t);n.parent=e.node,n.setPosition(cc.v3(0,0,0));var a=[];n.children.forEach(function(e){a.push(e)}),e._gameBox=new c.default.gameBox,e._gameBox.init(a,s.default.GAME_BOX_TWEEN_TYPE.SHAKE_STOP,"\u9996\u9875\u6302\u4ef6",!0,e),i.default.gameExport("home",e._gameBox)}),this.onTouch(this._nodeMoreGameBtn,function(){i.default.gameExport("game",null)}),0===h.default.orderStr.game.length&&(this._nodeMoreGameBtn.active=!1),d.default.instance().on(f.default.HOME_BEGIN,function(t,a){h.default.MusicData=e._levelConfig[a],h.default.itemIndex=a;var o=function(){l.default.openUI(g.default,u.default.gameView,{index:a},function(){l.default.closeUI(n,!0,{is_emit:!0})})};t?o():(w.default.unLock(1,function(){o()},e),e.scheduleOnce(function(){i.default.settingGameBox("home",e._gameBox)},.3))},this),this._levelConfig=this.levelConfig.json,this._levelConfig.forEach(function(t,n){b.default.setPrefabHome("item").then(function(a){var o=cc.instantiate(a);o.getComponent("HomeItem").show(t,n),o.parent=e.getNode("scoreView/table")})})},t.prototype.show=function(e){try{this._paramData=e,this.node.active=!0,d.default.instance().on(f.default.VIEW_CLOSE,this._onCloseBox,this),d.default.instance().emit(f.default.CLOSE_LOADING),p.default.scaleStop(this._nodeMoreGameBtn,.5,0,.1,8)}catch(e){_.default.error("home show error ")}},t.prototype.hide=function(){this.node.active=!1,this._gameBox.hide(),d.default.instance().off(f.default.VIEW_CLOSE,this._onCloseBox,this),this.unscheduleAllCallbacks()},t.prototype.playIn=function(){},t.prototype.playOut=function(){},o([I(cc.JsonAsset)],t.prototype,"levelConfig",void 0),t=n=o([E],t)}(r.default);n.default=M,cc._RF.pop()},{"../../Frame/Data/ConstData":"ConstData","../../Frame/FrameLog":"FrameLog","../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/ActionMgr":"ActionMgr","../../Frame/Manager/DisplayMgr":"DisplayMgr","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/LockMgr":"LockMgr","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel","../../Frame/Manager/ViewMgr":"ViewMgr","../AdvDisplay/FullDisplay":"FullDisplay","../AdvDisplay/MenuBoxDisplay":"MenuBoxDisplay","../AdvDisplay/PopBoxDisplay":"PopBoxDisplay","./GameDisplay":"GameDisplay"}],HomeItem:[function(e,t,n){"use strict";cc._RF.push(t,"66d8bjOdkNC/p5m/WTRhygB","HomeItem");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewUI"),i=e("../../Frame/Global"),c=e("../../Frame/Manager/ResMgr"),s=e("../../Frame/Manager/Event/EventMgr"),l=e("../../Frame/Manager/Event/EventData"),u=cc._decorator,d=u.ccclass,f=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isBegin=!0,t._level=0,t}return a(t,e),t.prototype.show=function(e,t){var n=this,a="lock";i.default.extUserData.curr_level-1<t&&(a="unLock",this._isBegin=!1,this._level=t),c.default.setSpriteHome(this.getNode("bg").getComponent(cc.Sprite),"home/item/"+a+"bg"),c.default.setSpriteHome(this.getNode("button").getComponent(cc.Sprite),"home/item/"+a),this.getNode("name").getComponent(cc.Label).string=t+1+". "+e.name,this.onTouch(this.getNode("button"),function(){s.default.instance().emit(l.default.HOME_BEGIN,n._isBegin,t)})},t=o([d],t)}(r.default));n.default=f,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/UI/ViewUI":"ViewUI"}],Item:[function(e,t,n){"use strict";cc._RF.push(t,"d3e5eMBVFxCfY7sy+oBcu+j","Item");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/SoundMgr"),i=e("../../Frame/Manager/Event/EventMgr"),c=e("../../Frame/Manager/Event/EventData"),s=e("../../Frame/Global"),l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){s.default.is_Run&&(r.default.playAudioGame("prop_miss").then(),i.default.instance().emit(c.default.UPDATE_BLOOD,e.node))})},t=o([u],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/SoundMgr":"SoundMgr"}],J:[function(e,t,n){"use strict";cc._RF.push(t,"6bb3666kbhD1KTZ5UXz95vr","J");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Piece"),i=e("../../Frame/Manager/Event/EventMgr"),c=e("../../Frame/Manager/Event/EventData"),s=e("../../Frame/Manager/Tools"),l=e("../../Frame/Manager/ResMgr"),u=e("../../Frame/Global"),d=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.show=function(){var e=this;i.default.instance().emit(c.default.CreateITEM,this.data,this.node),this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(u.default.is_Run&&!e.isTouch&&e.node.parent.zIndex+u.default.ItemIndex===0){u.default.ItemIndex++,e.touchStart(e.node),e.isTouch=!0,e.isChange&&i.default.instance().emit(c.default.CHANGE_SECTION_INDEX),e.data.first.audio.forEach(function(t){s.default.analyticalAudio(t).forEach(function(t){e.playFirstAudio(t)})}),s.default.analyticalAudio(e.data.second.audio[0]).forEach(function(t,n){e.playSecondAudio(t)});var n=e.node.convertToNodeSpaceAR(t.getStartLocation()),a=e.node.getPosition().clone(),o=n.y;n.x=0,i.default.instance().emit(c.default.LONG_START,e.node,a,n,o,e.pointList)}});var t=function(){e.node.opacity=50,i.default.instance().emit(c.default.LONG_END,e.node)};if(this.node.on(cc.Node.EventType.TOUCH_END,t),this.node.on(cc.Node.EventType.TOUCH_CANCEL,t),this.data.first.type!==this.data.second.type){for(var n=0,a=0,o=1;o<this.data.second.audio.length;o++)if("K"!==s.default.analyticalType(this.data.second.audio[0])||1!==o){var r=this.data.second.audio[o];if("K"===s.default.analyticalType(r)&&a++,2!==a){var d={audio:r,point:cc.v3(0,0,0)};this.pointList.push(d)}else a=0}this.pointList.forEach(function(t,a){var o="point1";u.default.isBlock&&(o="point"),l.default.setPrefabGame("piece/"+o).then(function(t){0;var o=cc.instantiate(t);o.parent=e.getNode("point"),1===e.pointList.length?n=950:2===e.pointList.length?n+=475:3===e.pointList.length&&(n+=316);var r=cc.v3(0,n,0);o.setPosition(r),e.pointList[a].point=r})})}},t=o([d],t)}(r.default);n.default=f,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/Tools":"Tools","./Piece":"Piece"}],K:[function(e,t,n){"use strict";cc._RF.push(t,"89a5fJgiOxIQazm5A0gdquo","K");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Piece"),i=e("../../Frame/Manager/Event/EventMgr"),c=e("../../Frame/Manager/Event/EventData"),s=e("../../Frame/Manager/Tools"),l=e("../../Frame/Manager/ResMgr"),u=e("../../Frame/Global"),d=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.show=function(){var e=this;i.default.instance().emit(c.default.CreateITEM,this.data,this.node),this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(u.default.is_Run&&!e.isTouch&&e.node.parent.zIndex+u.default.ItemIndex===0){u.default.ItemIndex++,e.touchStart(e.node),e.isTouch=!0,e.isChange&&i.default.instance().emit(c.default.CHANGE_SECTION_INDEX),e.data.first.audio.forEach(function(t){s.default.analyticalAudio(t).forEach(function(t){e.playFirstAudio(t)})}),s.default.analyticalAudio(e.data.second.audio[0]).forEach(function(t){e.playSecondAudio(t)});var n=e.node.convertToNodeSpaceAR(t.getStartLocation()),a=e.node.getPosition().clone(),o=n.y;n.x=0,i.default.instance().emit(c.default.LONG_START,e.node,a,n,o,e.pointList)}});var t=function(){e.node.opacity=50,i.default.instance().emit(c.default.LONG_END,e.node)};if(this.node.on(cc.Node.EventType.TOUCH_END,t),this.node.on(cc.Node.EventType.TOUCH_CANCEL,t),this.data.first.type!==this.data.second.type)for(var n=0,a=function(t){var a=o.data.second.audio[t],r="point1";u.default.isBlock&&(r="point"),l.default.setPrefabGame("piece/"+r).then(function(o){var r=cc.instantiate(o);r.parent=e.getNode("point"),n+=1===t?460:258.5;var i=cc.v3(0,n,0);r.setPosition(i);var c={audio:a,point:i};e.pointList.push(c)})},o=this,r=1;r<this.data.second.audio.length;r++)a(r)},t=o([d],t)}(r.default);n.default=f,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/Tools":"Tools","./Piece":"Piece"}],LanguageConfig:[function(e,t,n){"use strict";cc._RF.push(t,"f52f3xNT9NAGYCXbkNOS752","LanguageConfig");var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,i=(o.property,function(){function e(){}return e.getValue=function(e,t){var n=null;return(n="zh_tw"===e&&this.zh_tw.hasOwnProperty(t)?this.zh_tw:this.zh_cn).hasOwnProperty(t)?n[t]:""},e.zh_cn={rewardedVideoNo:"\u6682\u65e0\u6fc0\u52b1\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",rewardedVideoErr:"\u6ca1\u6709\u770b\u5b8c\u6fc0\u52b1\u89c6\u9891\uff0c\u65e0\u6cd5\u9886\u53d6\u5956\u52b1",shareAppErr:"\u5206\u4eab\u5931\u8d25\uff0c\u65e0\u6cd5\u9886\u53d6\u5956\u52b1",loadSubPackageErr:"\u52a0\u8f7d\u6e38\u620f\u5206\u5305\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",levelDataErr:"\u52a0\u8f7d\u5173\u5361\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",levelInfo:"\u5173\u5361\uff1a\u7b2c{0}\u5173",rankLevelInfo:"\u7b2c{0}\u5173",strengthFull:"\u4f53\u529b\u5df2\u6ee1",skinCurr:"\u6b63\u5728\u4f7f\u7528",skinUse:"\u4f7f\u7528",lessGold:"\u91d1\u5e01\u4e0d\u8db3",lessStrength:"\u4f53\u529b\u4e0d\u8db3",hasSign:"\u5df2\u7ecf\u9886\u53d6\u5956\u52b1",signInvalid:"\u8bf7\u660e\u5929\u518d\u6765\u9886\u53d6",goldTips:"\u91d1\u5e01 x {0}",strengthTips:"\u4f53\u529b x {0}",skinTips:"\u76ae\u80a4 x 1"},e.zh_tw={},e=a([r],e)}());n.default=i,cc._RF.pop()},{}],LanguageMgr:[function(e,t,n){"use strict";cc._RF.push(t,"7d232O/b9pGrIAZaYSdZAqD","LanguageMgr");var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../FrameLog"),r=e("../ResMgr"),i=e("./LanguageConfig"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function e(){}return e.getLanguageCode=function(){return this._languageCode},e.init=function(e){switch(e){case"zh-hant-mo":case"zh-hant-cn":case"zh-hant-tw":e="zh_tw";break;default:e=-1!==e.indexOf("zh-hant-")?"zh_tw":"zh_cn"}this._languageCode=e,o.default.log("init i18n mgr",e,this._languageCode,cc.sys.language,cc.sys.languageCode)},e.getValue=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=i.default.getValue(this._languageCode,e);return t.length<=0?a:this._format(a,t)},e._format=function(e,t){if(t.length<=0)return e;for(var n=0;n<t.length;n++){var a=new RegExp("\\{"+n+"\\}","g");e=e.replace(a,t[n]),o.default.log("i18n replace",e,t,a,n,t.length,t[n])}return e},e.setSprite=function(e,t){o.default.log("i18n set sprite",t,this._languageCode),t.hasOwnProperty(this._languageCode)&&r.default.setSprite(e,t[this._languageCode],!1)},e._languageCode="zh_cn",e=a([s],e)}());n.default=l,cc._RF.pop()},{"../../FrameLog":"FrameLog","../ResMgr":"ResMgr","./LanguageConfig":"LanguageConfig"}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"813cdMJooRNUYVICJjBprv0","Loading");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Scripts/Frame/Manager/Language/LanguageMgr"),i=e("../Scripts/Frame/Manager/Tools"),c=e("../Scripts/Frame/Global"),s=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadProgressBar=null,t._loadingView=null,t._lasPer=0,t._barWidth=0,t._interval=.01,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._loadingView=this.node.getChildByName("loading"),this._loadingView.active=!0,this._loadProgressBar=this._loadingView.getChildByName("progressBar").getChildByName("mask"),this._loadProgressBar.x=-this._loadProgressBar.parent.width/2,this._barWidth=this._loadProgressBar.parent.width,i.default.loadSubPackage("home",function(){c.default.has_init.home=!0,e.schedule(e._tryToMain,e._interval)},function(){i.default.showModal(r.default.getValue("loadSubPackageErr"))},function(t,n){var a=t/n;a<e._lasPer||(e._loadProgressBar.width=e._barWidth*a,e._lasPer=a)},this)},t.prototype._tryToMain=function(){c.default.bundle.game&&(this.unschedule(this._tryToMain),cc.director.loadScene("Main"))},t=o([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../Scripts/Frame/Global":"Global","../Scripts/Frame/Manager/Language/LanguageMgr":"LanguageMgr","../Scripts/Frame/Manager/Tools":"Tools"}],LocalMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d4a12p5SL9HIIG2HtAKmNDY","LocalMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../FrameLog"),o=function(){function e(){}return e.read=function(e){if(null!=e){var t=cc.sys.localStorage.getItem(e);return t&&(t=JSON.parse(t)),a.default.log("storage read",e,t),t}},e.save=function(e,t){try{if(a.default.log("storage save",e,t),null!=e)return cc.sys.localStorage.setItem(e,JSON.stringify(t))}catch(e){a.default.error(e)}},e.clear=function(){return cc.sys.localStorage.clear()},e.rm=function(e){if(null!=e)return cc.sys.localStorage.removeItem(e)},e}();n.default=o,cc._RF.pop()},{"../FrameLog":"FrameLog"}],LockMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1dd27LNBI5N8oQU3rL32S+W","LockMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../FrameLog"),o=e("../Data/ConstData"),r=e("./Tools"),i=e("../Global"),c=e("./Language/LanguageMgr"),s=e("./GameMgr"),l=e("./API/WechatApi"),u=function(){function e(){}return e.getUnLockWay=function(e){var t=o.default.UNLOCK_WAY.VIDEO;try{if(e===o.default.UNLOCK_TYPE.NEXT_LEVEL&&!r.default.checkPer(i.default.config.unlock_conf.next_level))return t=o.default.UNLOCK_WAY.NONE;t=i.default.extUserData.share_score>=i.default.config.unlock_conf.share.score&&0!==i.default.config.unlock_conf.share.score?o.default.UNLOCK_WAY.SHARE:o.default.UNLOCK_WAY.VIDEO}catch(e){a.default.error("\u83b7\u53d6\u89e3\u9501\u7c7b\u578b\u5f02\u5e38",e)}return t},e._getShareInfo=function(e){var t=o.default.getUnlockActionName(e);return r.default.getShareAppMsg(i.default.config.share_img,t)},e._initController=function(){this._unlockInfo.is_begin=!1,this._unlockInfo.share_count=0,this._unlockWay=null},e.unLock=function(e,t,n){var s=this;switch(a.default.log("\u5f00\u59cb\u89e3\u9501",e),this._unlockInfo.unlock_type=e,this._unlockInfo.is_begin=!0,this._unlockInfo.unlock_time=(new Date).getTime(),t&&(this._unlockCallback[e]={callback:t,object:n}),this._unlockWay=this.getUnLockWay(e),this._unlockWay){case o.default.UNLOCK_WAY.NONE:this._nextAction();break;case o.default.UNLOCK_WAY.VIDEO:if(i.default.IS_TEST){this._nextAction();break}l.default.rewardedVideo.show({success:function(e){switch(e){case o.default.REWARDED_VIDEO_END_TYPE.END:s._nextAction();break;case o.default.REWARDED_VIDEO_END_TYPE.NOT_END:r.default.showToast(c.default.getValue("rewardedVideoErr"));break;case o.default.REWARDED_VIDEO_END_TYPE.ERROR:default:r.default.showToast(c.default.getValue("rewardedVideoNo")),s._unlockWay=o.default.UNLOCK_WAY.SHARE,s._unlockInfo.unlock_time=(new Date).getTime(),s._shareAppMessage(s._unlockInfo.unlock_type)}},callObj:this,type:e});break;case o.default.UNLOCK_WAY.SHARE:this._shareAppMessage(e)}},e._shareAppMessage=function(e){try{var t=this._getShareInfo(e);if(!r.default.shareAppMessage(t))return i.default.IS_TEST?this._nextAction():r.default.showToast(c.default.getValue("shareAppErr")),!0;s.default.changeShareScore(-i.default.config.unlock_conf.share.change),this._unlockInfo.share_count++}catch(e){a.default.error("shareAppMessage\u5f02\u5e38",e),i.default.IS_TEST?this._nextAction():r.default.showToast(c.default.getValue("shareAppErr"))}return!0},e._getMustPassByShare=function(){if(!this._unlockInfo.share_count)return!0;var e=r.default.getRandom(i.default.config.unlock_conf.share.must_pass_min,i.default.config.unlock_conf.share.must_pass_max);return this._unlockInfo.share_count%e==0},e.shareCallbackOnWxShow=function(){if(!this._unlockInfo.is_begin)return a.default.log("\u4e0d\u9700\u8981\u5bf9\u5206\u4eab\u7ee7\u7eed\u5904\u7406, \u6ca1\u5f00\u59cb\u5206\u4eab",this._unlockInfo),!1;if(this._unlockWay!==o.default.UNLOCK_WAY.SHARE)return a.default.log("\u4e0d\u9700\u8981\u5bf9\u5206\u4eab\u7ee7\u7eed\u5904\u7406",this._unlockInfo,this._unlockWay),!1;var e=(new Date).getTime(),t={action:"\u5206\u4eab\u6210\u529f",action_name:o.default.getUnlockActionName(this._unlockInfo.unlock_type),data:{level:i.default.extUserData.curr_level}},n=this._getMustPassByShare();return e<=1e3*i.default.config.unlock_conf.share.min_time+this._unlockInfo.unlock_time&&!n?(a.default.log("\u5206\u4eab\u672a\u7b26\u5408\u65f6\u95f4",this._unlockInfo,e,n),t.action_name+="-\u672a\u7b26\u5408\u65f6\u95f4",t.action="\u5206\u4eab\u5931\u8d25",s.default.pushUserAction(t),this._shareModal(this._unlockInfo.unlock_type),!0):r.default.checkPer(i.default.config.unlock_conf.share.per)||n?(t.action_name+="-\u5904\u7406\u6210\u529f",s.default.pushUserAction(t),a.default.log("\u5206\u4eab\u6210\u529f\u5904\u7406",t.action_name,this._unlockInfo,e,n),this._nextAction(),!0):(a.default.log("\u5206\u4eab\u672a\u7b26\u5408\u6bd4\u4f8b",this._unlockInfo,e,n),t.action_name+="-\u672a\u7b26\u5408\u6bd4\u4f8b",t.action="\u5206\u4eab\u5931\u8d25",s.default.pushUserAction(t),this._shareModal(this._unlockInfo.unlock_type),!0)},e._getUnlockWayName=function(){switch(this._unlockWay){case o.default.UNLOCK_WAY.NONE:return"\u65e0\u6761\u4ef6";case o.default.UNLOCK_WAY.VIDEO:return"\u6fc0\u52b1\u89c6\u9891";case o.default.UNLOCK_WAY.SHARE:return"\u5206\u4eab";default:return"\u672a\u77e5\u6761\u4ef6"+this._unlockWay}},e._nextAction=function(){if(this._unlockCallback&&this._unlockCallback.hasOwnProperty(this._unlockInfo.unlock_type)){var e=this._unlockCallback[this._unlockInfo.unlock_type];"function"==typeof e.callback&&e.callback.call(e.object);var t={action:"\u89e3\u9501\u6210\u529f",action_name:o.default.getUnlockActionName(this._unlockInfo.unlock_type)+"-"+this._getUnlockWayName(),data:{before:i.default.extUserData.curr_level-1,after:i.default.extUserData.curr_level}};s.default.pushUserAction(t)}this._initController()},e._shareModal=function(e){var t=this,n="\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4";i.default.config&&i.default.config.tips&&i.default.config.tips.share&&(n=r.default.getRandomByArray(i.default.config.tips.share)),r.default.showModal(n,function(){t._shareAppMessage(e)},null,this)},e._unlockCallback={},e._unlockInfo={share_count:0,is_begin:!1,unlock_type:null,unlock_time:null},e._unlockWay=null,e}();n.default=u,cc._RF.pop()},{"../Data/ConstData":"ConstData","../FrameLog":"FrameLog","../Global":"Global","./API/WechatApi":"WechatApi","./GameMgr":"GameMgr","./Language/LanguageMgr":"LanguageMgr","./Tools":"Tools"}],L:[function(e,t,n){"use strict";cc._RF.push(t,"48c04LRGx9I8q+3Jp7xr7+B","L");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Piece"),i=e("../../Frame/Manager/Event/EventMgr"),c=e("../../Frame/Manager/Event/EventData"),s=e("../../Frame/Global"),l=e("../../Frame/Manager/Tools"),u=cc._decorator,d=u.ccclass,f=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.show=function(){var e=this;i.default.instance().emit(c.default.CreateITEM,this.data,this.node),this.scheduleOnce(function(){e.myParent=e.node.parent},.1),this.onTouch(this.node,function(){if(s.default.is_Run&&!e.isTouch){if(1===e.myParent.childrenCount){if(e.myParent.zIndex+s.default.ItemIndex!==0)return;s.default.ItemIndex++}else if(2===e.myParent.childrenCount){e.myParent.children.some(function(e){return 50==e.opacity})&&s.default.ItemIndex++}e.touchStart(e.node),e.isChange&&i.default.instance().emit(c.default.CHANGE_SECTION_INDEX),e.isTouch=!0,e.data.first.audio.forEach(function(t){e.playFirstAudio(t)}),e.data.second.audio.forEach(function(t){l.default.analyticalAudio(t).forEach(function(t){e.playSecondAudio(t)})}),cc.tween(e.node).to(.01,{opacity:50},{easing:"smooth"}).start()}},"",1)},t=o([d],t)}(r.default));n.default=f,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/Tools":"Tools","./Piece":"Piece"}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"bbf4cUt24JOebFjxC+Ax9fw","Main");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./SDK/sdk"),i=e("./Frame/Manager/Tools"),c=e("./Frame/Manager/API/WechatApi"),s=e("./Frame/Manager/GameMgr"),l=e("./Frame/Global"),u=e("./Frame/FrameLog"),d=e("./Frame/Manager/LockMgr"),f=e("./Frame/Manager/Event/EventMgr"),h=e("./Frame/Manager/Event/EventData"),_=e("./Frame/Manager/DisplayMgr"),p=e("./Frame/Manager/ViewMgr"),g=e("./Frame/Manager/Language/LanguageMgr"),m=e("./Display/GameDisplay/HomeDisplay"),v=e("./Display/AdvDisplay/BannerDisplay"),y=cc._decorator.ccclass,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._interval=.02,t._initSystemEvent=function(){try{i.default.initWxSetting(),c.default.systemInterface.onHide&&c.default.systemInterface.onHide(function(){u.default.log("game is hide"),s.default.updateAdvIn()}),c.default.systemInterface.onShow&&c.default.systemInterface.onShow(function(){u.default.log("game is show",cc.sys.languageCode,cc.sys.language),cc.game.isPaused()&&cc.game.resume(),d.default.shareCallbackOnWxShow(),r.updateSdkConfByOptions(!0),s.default.pushAdv(),c.default.bannerAdv.update()}),c.default.systemInterface.onShareAppMessage&&c.default.systemInterface.onShareAppMessage(function(){return i.default.getShareAppMsg(l.default.config.share_img,"\u53f3\u4e0a\u89d2")}),c.default.systemInterface.onShareTimeline&&c.default.systemInterface.onShareTimeline(function(){return i.default.getShareAppMsg(l.default.config.share_img,"\u670b\u53cb\u5708")}),c.default.systemInterface.onShareMessageToFriend&&i.default.checkHasOpenData()&&c.default.systemInterface.onShareMessageToFriend(function(e){var t={action:"\u5f00\u653e\u57df\u5206\u4eab\u6210\u529f",action_name:"\u5206\u4eab\u6210\u529f",data:{level:l.default.extUserData.curr_level}};e.success||(t.action="\u5f00\u653e\u57df\u5206\u4eab\u5931\u8d25",t.action_name="\u5206\u4eab\u5931\u8d25"),s.default.pushUserAction(t)}),c.default.systemInterface.showShareMenu&&c.default.systemInterface.showShareMenu({menus:["shareAppMessage","shareTimeline"]})}catch(e){}},t._initAdv=function(){c.default.bannerAdv.init(),c.default.splashAd.init(),c.default.nativeExpressAd.init(),c.default.screenAdv.init(),c.default.rewardedVideo.init()},t}var n;return a(t,e),n=t,t.prototype._endInitSdk=function(){var e=this;r.getUser(function(e){l.default.extUserData=r.mergeObject(l.default.extUserData,e.ext_data),l.default.userInfo=e,s.default.saveUserExtData("local"),l.default.has_init.user=!0}),r.getAppConfig(function(t){l.default.config=r.mergeObject(l.default.config,t),l.default.has_init.config=!0,e._initAdv(),i.default.setExportOrder(),c.default.bannerAdv.show(),e._initSystemEvent(),f.default.instance().emit(h.default.GET_CONFIG)})},t.prototype._tryToStart=function(){l.default.has_init.user&&l.default.has_init.config&&l.default.has_init.home&&l.default.bundle.game&&(this.unschedule(this._tryToStart),i.default.initWxOpenData(),_.default.openUI(m.default,p.default.homeView,null),i.default.initNavigateGameBoxDone())},t.prototype._initSdk=function(){var e=this;r.changeHost(null,l.default.API_HOST,l.default.DATA_HOST),r.initSdk(l.default.application_id,l.default.version,function(t){l.default.sessionInfo=r.mergeObject(l.default.sessionInfo,t),e._endInitSdk()},function(){e._endInitSdk()},c.default.systemInterface,!1,!0,u.default),this.schedule(this._tryToStart,this._interval)},t.prototype.start=function(){i.default.initCanvas()},t.prototype.onLoad=function(){var e=this;try{cc.macro.CLEANUP_IMAGE_CACHE=!1,i.default.getPhysics(!0,!1),n.Ins=this,c.default.init(),g.default.init(cc.sys.languageCode);var t=this.node.getChildByName("gameView"),a=this.node.getChildByName("homeView"),o=this.node.getChildByName("exportView"),r=this.node.getChildByName("tipView"),s=this.node.getChildByName("advView");p.default.init({gameView:t,homeView:a,exportView:o,tipView:r,advView:s}),c.default.systemInterface.initAdSdk&&c.default.systemInterface.initAdSdk(function(){e._initAdv()},this),this._initSdk(),i.default.setKeepScreenOn(!0),_.default.openUI(v.default,p.default.advView,null,function(){_.default.getUI(v.default).getComponent(v.default).hide()}),l.default.config.adv_unit_conf&&l.default.config.adv_unit_conf.banner&&c.default.bannerAdv.init()}catch(e){u.default.error("Main onLoad \u5f02\u5e38",e)}},t.Ins=null,t=n=o([y],t)}(cc.Component);n.default=b,cc._RF.pop()},{"./Display/AdvDisplay/BannerDisplay":"BannerDisplay","./Display/GameDisplay/HomeDisplay":"HomeDisplay","./Frame/FrameLog":"FrameLog","./Frame/Global":"Global","./Frame/Manager/API/WechatApi":"WechatApi","./Frame/Manager/DisplayMgr":"DisplayMgr","./Frame/Manager/Event/EventData":"EventData","./Frame/Manager/Event/EventMgr":"EventMgr","./Frame/Manager/GameMgr":"GameMgr","./Frame/Manager/Language/LanguageMgr":"LanguageMgr","./Frame/Manager/LockMgr":"LockMgr","./Frame/Manager/Tools":"Tools","./Frame/Manager/ViewMgr":"ViewMgr","./SDK/sdk":"sdk"}],MenuBoxDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"03aed5sUcpKEL9mpUD/efLv","MenuBoxDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/API/WechatApi"),c=e("../../Frame/Global"),s=e("../../Frame/Manager/Tools"),l=e("../../Frame/FrameLog"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._param=null,t._nodeContinueBtn=null,t._nodeGameBoxItem=null,t._targetPosition=null,t._scrollView=null,t._nodeGameBox=null,t._nodeContainer=null,t._gameBox=null,t}var n;return a(t,e),n=t,t.getUrl=function(){return"menuDisplay"},t.prototype.initUI=function(){this._nodeContainer=this.getNode("table"),this._nodeContinueBtn=this.getNode("table/button"),this._targetPosition=this._nodeContinueBtn.getPosition().clone(),this._nodeGameBox=this.getNode("table/gameBox"),this._scrollView=this._nodeGameBox.getComponent(cc.ScrollView),this._nodeGameBoxItem=this._scrollView.content.children[0],this._nodeGameBoxItem.position=new cc.Vec3(0,0,0),this._nodeGameBoxItem.active=!1;for(var e=[],t=0;t<c.default.config.game_box.length;t++){var n=cc.instantiate(this._nodeGameBoxItem);n.active=!0,e.push(n),this._scrollView.content.addChild(n)}this._gameBox=new i.default.gameBox,this._gameBox.init(e,null,"menu"),s.default.checkNodeIsShow()&&s.default.changeNodePosition([this._nodeContinueBtn]),this.getNode("bg").color=this.node.color.fromHEX(c.default.config.ad_move_conf.page.menu_box.color)},t.prototype.show=function(e){var t=this;try{this._param=e,null!==this._gameBox&&this._gameBox.show(),this.onTouch(this._nodeContinueBtn,function(){s.default.viewExport(t._param.data,n)}),this.playIn()}catch(e){l.default.error("\u663e\u793a\u5f02\u5e38",e)}},t.prototype.hide=function(e){void 0===e&&(e=!0),this.unscheduleAllCallbacks(),null!==this._gameBox&&this._gameBox.hide(),this.playOut()},t.prototype.playIn=function(){var e=this,t=c.default.config.ad_move_conf.page.menu_box,n=s.default.delayShowCloseBtn(this._nodeContinueBtn,t.btn_showTime);0===c.default.config.ad_move_conf.is_show||s.default.checkBannerIsError()||!s.default.checkIsShow(t.per)?(0===c.default.config.ad_move_conf.is_show?this._nodeContinueBtn.setPosition(this._targetPosition.clone()):s.default.setExportPos(this._nodeContinueBtn),i.default.bannerAdv.show()):-1===c.default.config.box_conf.force.indexOf("menu")?s.default.changeNode(n,this._nodeContinueBtn,t,this):s.default.forceExport(function(){cc.tween(e._nodeContinueBtn).by(.1,{y:200},{easing:"smooth"}).start()},function(){s.default.changeNode(n,e._nodeContinueBtn,t,e)}),this.schedule(function(){s.default.scrollViewOneItem(e._scrollView,"v")},c.default.config.ad_move_conf.page.menu_box.update_time)},t.prototype.playOut=function(){},t=n=o([u],t)}(r.default);n.default=d,cc._RF.pop()},{"../../Frame/FrameLog":"FrameLog","../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel"}],ModalDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"c38ec1Yp0JNVLYXDMQh4W9h","ModalDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/DisplayMgr"),c=e("../../Frame/FrameLog"),s=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelContent=null,t._labelCancel=null,t._labelConfirm=null,t._param=null,t}var n;return a(t,e),n=t,t.getUrl=function(){return"modalDisplay"},t.prototype.initUI=function(){var e=this;this._labelContent=this.getNode("container/content").getComponent(cc.Label),this._labelCancel=this.getNode("container/cancel/label").getComponent(cc.Label),this._labelConfirm=this.getNode("container/confirm/label").getComponent(cc.Label),this.onTouch(this._labelCancel.node,function(){i.default.closeUI(n,!1,{is_emit:!0}),"function"==typeof e._param.success&&e._param.success.call(e._param.callObj,{confirm:!1,cancel:!0})}),this.onTouch(this._labelConfirm.node,function(){i.default.closeUI(n,!1,{is_emit:!0}),"function"==typeof e._param.success&&e._param.success.call(e._param.callObj,{confirm:!0,cancel:!1})})},t.prototype.show=function(e){try{c.default.log("showModal",e),this._param=e,this._param.content&&(this._labelContent.string=this._param.content),this._param.cancelText&&(this._labelCancel.string=this._param.cancelText),this._param.confirmText&&(this._labelConfirm.string=this._param.confirmText),this.node.active=!0}catch(e){c.default.error("\u663e\u793a\u5f02\u5e38",e)}},t.prototype.hide=function(){this.node.active=!1},t.prototype.playIn=function(){},t.prototype.playOut=function(){},t=n=o([s],t)}(r.default);n.default=l,cc._RF.pop()},{"../../Frame/FrameLog":"FrameLog","../../Frame/Manager/DisplayMgr":"DisplayMgr","../../Frame/Manager/UI/ViewPanel":"ViewPanel"}],Piece:[function(e,t,n){"use strict";cc._RF.push(t,"d2004QvwUxEd6iGBMxzxLDQ","Piece");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewUI"),i=e("../../Frame/Manager/Tools"),c=e("../../Frame/Global"),s=e("../../Frame/Manager/SoundMgr"),l=e("../../Frame/Manager/ResMgr"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteStr="s",t.audioID=0,t.isTouch=!1,t.isChange=!1,t.pointList=[],t.data={first:{type:"",audio:[]},second:{type:"",audio:[]}},t}return a(t,e),t.prototype.playFirstAudio=function(e){-1!==e.indexOf("#")&&(e="AAA"+e.split("#")[1]),"t"===e||"T"===e||"k"===e||"K"===e||"U"===e?s.default.playAudioHome("piano/"+c.default.lastFristAudio).then():s.default.playAudioHome("piano/"+e).then(function(t){!1!==t&&(c.default.lastFristAudio=e)})},t.prototype.playSecondAudio=function(e){"U"!==e&&"R"!==e&&"r"!==e&&"S"!==e&&"s"!==e&&"t"!==e&&"T"!=e&&"k"!==e&&"K"!==e&&(-1!==e.indexOf("#")&&(e="AAA"+e.split("#")[1]),s.default.playAudioHome("piano/"+e).then(),c.default.lastSecondAudio=e)},t.prototype.touchStart=function(e){var t=cc.v3(0,e.height/2,0);l.default.setPrefabGame("piece/touch/touch"+i.default.getRandom(1,7)).then(function(n){var a=cc.instantiate(n);a.parent=e,a.setPosition(t)})},t=o([u],t)}(r.default);n.default=d,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/ResMgr":"ResMgr","../../Frame/Manager/SoundMgr":"SoundMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewUI":"ViewUI"}],PoolMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ca3ee2ZbONNEKHHxO2hkUuK","PoolMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../FrameLog"),o=e("../Global"),r=function(){function e(){}return e.addToCaches=function(e,t,n){if(void 0===n&&(n=1),e&&t)return this.caches[e]?(a.default.warn("addPrefabToCaches",e+"\u5df2\u5b58\u5728"),!1):(this.caches[e]=t,this.createToPool(e,n),!0)},e.createToPool=function(e,t){if(void 0===t&&(t=1),e&&this.caches[e]){null==this.gamePool[e]&&(this.gamePool[e]=new cc.NodePool),t-=this.gamePool[e].size();for(var n=0;n<t;n++){var a=cc.instantiate(this.caches[e]);this.gamePool[e].put(a)}}},e.putNodeToPool=function(e,t){null!=t&&""!=e&&null!=e?(null==this.gamePool[e]&&(this.gamePool[e]=new cc.NodePool),t.parent=null,this.gamePool[e].put(t)):a.default.warn("putNodeToPool fail",e,t)},e.getNodeFromPool=function(e){var t=null;return null==this.gamePool[e]&&(this.gamePool[e]=new cc.NodePool),this.gamePool[e].size()>0?t=this.gamePool[e].get():this.caches[e]?t=cc.instantiate(this.caches[e]):a.default.log("PoolMgr empty",e,t),t},e.getAsyncNodeToPool=function(e,t){var n=this;if(e){var r=this.getNodeFromPool(e);r?t&&t(r):"gameDisplay"===e||"endDisplay"===e?o.default.bundle.game.load("game/prefab/"+e,cc.Prefab,function(o,i){o?a.default.error("PoolMgr\u52a0\u8f7dprefab\u5931\u8d25",e,o):(n.addToCaches(e,i),r=n.getNodeFromPool(e),t&&t(r))}):o.default.bundle.home.load("home/prefab/display/"+e,cc.Prefab,function(o,i){o?a.default.error("PoolMgr\u52a0\u8f7dprefab\u5931\u8d25",e,o):(n.addToCaches(e,i),r=n.getNodeFromPool(e),t&&t(r))})}else a.default.warn("getAsyncNodeToPool","url\u4e3a\u7a7a")},e.caches={},e.gamePool={},e}();n.default=r,cc._RF.pop()},{"../FrameLog":"FrameLog","../Global":"Global"}],PopBoxDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"47818DtZtdImoUwrwcQ57X9","PopBoxDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/API/WechatApi"),c=e("../../Frame/Global"),s=e("../../Frame/Manager/Tools"),l=e("../../Frame/FrameLog"),u=e("../../Frame/Manager/ActionMgr"),d=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._param=null,t._nodeGameBoxItem=null,t._scrollView=null,t._nodeContinueBtn=null,t._nodeGameBox=null,t._nodeContainer=null,t._gameBox=null,t}var n;return a(t,e),n=t,t.getUrl=function(){return"popBoxDisplay"},t.prototype.initUI=function(){this.playInTime=.3,this.playOutTime=0,this._nodeContainer=this.getNode("table"),this._nodeContinueBtn=this.getNode("table/button"),this._nodeGameBox=this.getNode("table/gameBox"),this._scrollView=this._nodeGameBox.getComponent(cc.ScrollView),this._nodeGameBoxItem=this._scrollView.content.children[0],this._nodeGameBoxItem.active=!1,this._nodeGameBoxItem.position=new cc.Vec3(0,0,0);for(var e=[],t=0;t<c.default.config.game_box.length;t++){var n=cc.instantiate(this._nodeGameBoxItem);n.active=!0,e.push(n),this._scrollView.content.addChild(n)}this._gameBox=new i.default.gameBox,this._gameBox.init(e,null,"\u52b2\u7206\u6d88\u606f"),s.default.checkNodeIsShow()&&s.default.changeNodePosition([this._nodeContinueBtn])},t.prototype.show=function(e){var t=this;try{this._param=e,this.node.active=!0,u.default.moveIn(this._nodeContainer,this.playInTime),null!==this._gameBox&&this._gameBox.show(),this.onTouch(this._nodeContinueBtn,function(){s.default.viewExport(t._param.data,n)}),this.playIn()}catch(e){l.default.error("\u663e\u793a\u5f02\u5e38",e)}},t.prototype.hide=function(){this.unscheduleAllCallbacks(),null!==this._gameBox&&this._gameBox.hide(),this.playOut()},t.prototype.playIn=function(){var e=this,t=c.default.config.ad_move_conf.page.pop_box,n=s.default.delayShowCloseBtn(this._nodeContinueBtn,t.btn_showTime);0===c.default.config.ad_move_conf.is_show||s.default.checkBannerIsError()||!s.default.checkIsShow(t.per)?i.default.bannerAdv.hide():-1===c.default.config.box_conf.force.indexOf("pop")?s.default.changeNode(n,this._nodeContinueBtn,t,this,null,null,!0):s.default.forceExport(function(){cc.tween(e._nodeContinueBtn).by(.1,{y:200},{easing:"smooth"}).start()},function(){s.default.changeNode(n,e._nodeContinueBtn,t,e,null,null,!0)}),this.schedule(function(){s.default.scrollViewOneItem(e._scrollView,"v")},c.default.config.ad_move_conf.page.pop_box.update_time),this.schedule(function(){i.default.bannerAdv.hide()},3)},t.prototype.playOut=function(){},t=n=o([d],t)}(r.default);n.default=f,cc._RF.pop()},{"../../Frame/FrameLog":"FrameLog","../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/ActionMgr":"ActionMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel"}],ResMgr:[function(e,t,n){"use strict";cc._RF.push(t,"45c6eoXipJK6qVxbmvXtRUK","ResMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../FrameLog"),o=e("../Global"),r=function(){function e(){}return e.setSpriteHome=function(e,t,n,r,i){var c=this;if(void 0===n&&(n=!0),void 0===r&&(r=null),void 0===i&&(i=null),this._sprite.hasOwnProperty(t))return e.spriteFrame=this._sprite[t],n&&(e.node.active=!0),void("function"==typeof r&&r.call(i));o.default.bundle.home.load("home/image/"+t,cc.SpriteFrame,function(o,s){if(!o)return c._sprite[t]=s,e.spriteFrame=s,n&&(e.node.active=!0),"function"==typeof r&&r.call(i),s;a.default.error(t," \u56fe\u7247\u52a0\u8f7d\u9519\u8bef ",o)})},e.setSpriteGame=function(e,t,n,r,i){var c=this;if(void 0===n&&(n=!0),void 0===r&&(r=null),void 0===i&&(i=null),this._sprite.hasOwnProperty(t))return e.spriteFrame=this._sprite[t],n&&(e.node.active=!0),void("function"==typeof r&&r.call(i));o.default.bundle.game.load("game/image/"+t,cc.SpriteFrame,function(o,s){if(!o)return c._sprite[t]=s,e.spriteFrame=s,n&&(e.node.active=!0),"function"==typeof r&&r.call(i),s;a.default.error(t," \u56fe\u7247\u52a0\u8f7d\u9519\u8bef ",o)})},e.setPrefabHome=function(e){var t=this;return new Promise(function(n,r){t._prefabCaches.hasOwnProperty(e)&&n(t._prefabCaches[e]),o.default.bundle.home.load("home/prefab/"+e,cc.Prefab,function(o,i){return o?(a.default.log("setPrefab error",o,e),void r(!1)):(t._prefabCaches[e]=i,n(i),i)})})},e.setPrefabGame=function(e){var t=this;return new Promise(function(n,r){t._prefabCaches.hasOwnProperty(e)&&n(t._prefabCaches[e]),o.default.bundle.game.load("game/prefab/"+e,cc.Prefab,function(o,i){return o?(a.default.log("setPrefab error",o,e),void r(!1)):(t._prefabCaches[e]=i,n(i),i)})})},e._sprite={},e._prefabCaches={},e}();n.default=r,cc._RF.pop()},{"../FrameLog":"FrameLog","../Global":"Global"}],SoundMgr:[function(e,t,n){"use strict";cc._RF.push(t,"67cb5MfQSdE84ku5b5qu5Pz","SoundMgr");var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../FrameLog"),r=e("../Global"),i=cc._decorator.ccclass,c=function(){function e(){}return e.music=function(e){void 0===e&&(e=!0),0!==r.default.extUserData.conf.music&&e?cc.audioEngine.isMusicPlaying()||r.default.bundle.home.load("home/audio/bg",cc.AudioClip,function(e,t){e?o.default.error(" player Music error",e):(cc.audioEngine.playMusic(t,!0),cc.audioEngine.setMusicVolume(.18))}):cc.audioEngine.stopMusic()},e.playAudioHome=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=!1),new Promise(function(a,i){0===r.default.extUserData.conf.effect&&(o.default.warn(" \u5f53\u524d\u9759\u97f3 "),a(!1)),r.default.bundle.home.load("home/audio/"+e,cc.AudioClip,function(r,c){r&&(o.default.error(" playAudio error ",e),i(!1));var s;cc.audioEngine.setEffectsVolume(t),s=cc.audioEngine.playEffect(c,n),a(s)})})},e.playAudioGame=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=!1),new Promise(function(a,i){0===r.default.extUserData.conf.effect&&(o.default.warn(" \u5f53\u524d\u9759\u97f3 "),a(!1)),r.default.bundle.game.load("game/audio/"+e,cc.AudioClip,function(r,c){r&&(o.default.error(" playAudio error ",e),i(!1));var s;cc.audioEngine.setEffectsVolume(t),s=cc.audioEngine.playEffect(c,n),a(s)})})},e=a([i],e)}();n.default=c,cc._RF.pop()},{"../FrameLog":"FrameLog","../Global":"Global"}],ToastDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"3cff2jrL4NEd4YHORjRoOuA","ToastDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/FrameLog"),c=e("../../Frame/Manager/DisplayMgr"),s=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelContent=null,t}var n;return a(t,e),n=t,t.getUrl=function(){return"toastDisplay"},t.prototype.initUI=function(){this._labelContent=this.getNode("container/label").getComponent(cc.Label)},t.prototype.show=function(e){try{e.title&&(this._labelContent.string=e.title),this.node.active=!0;var t=3;e.duration&&e.duration>100&&(t=e.duration/1e3),i.default.log("end show toast",t),this.scheduleOnce(function(){c.default.closeUI(n,!1,{is_emit:!0})},t)}catch(e){i.default.error("\u663e\u793a\u5f02\u5e38",e)}},t.prototype.hide=function(){this.node.active=!1},t.prototype.playIn=function(){},t.prototype.playOut=function(){},t=n=o([s],t)}(r.default);n.default=l,cc._RF.pop()},{"../../Frame/FrameLog":"FrameLog","../../Frame/Manager/DisplayMgr":"DisplayMgr","../../Frame/Manager/UI/ViewPanel":"ViewPanel"}],Tools:[function(e,t,n){"use strict";cc._RF.push(t,"32b3aymZR1HB4yQueRdAFE0","Tools");var a=this&&this.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?n(e.value):o(e.value).then(i,c)}s((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],i=0,c=r.length;i<c;i++,o++)a[o]=r[i];return a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../SDK/sdk"),c=e("../FrameLog"),s=e("./API/WechatApi"),l=e("../Global"),u=e("../../Main"),d=e("./ResMgr"),f=e("../Data/ConstData"),h=e("./GameMgr"),_=e("./ViewMgr"),p=e("./ActionMgr"),g=e("./DisplayMgr"),m=e("../../Display/TipDisplay/ModalDisplay"),v=e("../../Display/AdvDisplay/FullDisplay"),y=e("../../Display/AdvDisplay/PopBoxDisplay"),b=e("../../Display/AdvDisplay/MenuBoxDisplay"),w=e("./SoundMgr"),A=function(){function e(){this.onCollisionEnter=function(e,t){},this._getBPM=function(){return.1},this._promiseRepeat=function(e){return new Promise(function(t){cc.tween().by(e,{y:-258.5}).call(function(){t(!0)}).start()})}}return e.subStr=function(e,t){var n=/[^\x00-\xff]/g;if(e.replace(n,"mm").length<=t)return e;for(var a=Math.floor(t/2);a<e.length;a++)if(e.substr(0,a).replace(n,"mm").length>=t)return e.substr(0,a)+"...";return e},e.setNickName=function(e,t){try{e.string=t?this.subStr(t,13):"\u6e38\u5ba2"}catch(n){cc.error("\u5f00\u653e\u57df\u8bbe\u7f6e\u6635\u79f0\u5f02\u5e38",e,t,n)}},e.getRes=function(e,t){return{code:e,msg:t}},e.setMessageToFriendScene=function(e){try{return!!s.default.systemInterface.setMessageToFriendQuery&&s.default.systemInterface.setMessageToFriendQuery({shareMessageToFriendScene:e})}catch(t){c.default.error("setMessageToFriendQuery\u5f02\u5e38",t,e)}return!0},e.vibrateShort=function(){try{if(1!==l.default.extUserData.conf.vibrate)return;s.default.systemInterface.vibrateShort?s.default.systemInterface.vibrateShort({success:function(e){c.default.log("vibrateShort success",e)}}):c.default.log("vibrateShort fail, not api")}catch(e){c.default.error(e)}},e.vibrateLong=function(){try{if(1!==l.default.extUserData.conf.vibrate)return;s.default.systemInterface.vibrateLong?s.default.systemInterface.vibrateLong({success:function(e){c.default.log("vibrateLong success",e)}}):c.default.log("vibrateLong fail, not api")}catch(e){c.default.error(e)}},e.shareAppMessage=function(e){try{return s.default.systemInterface.shareAppMessage?(s.default.systemInterface.shareAppMessage(e),!0):(c.default.log("\u5206\u4eab\u5f02\u5e38\uff0c\u76f4\u63a5\u89e3\u9501"),!1)}catch(e){c.default.error("shareAppMessage\u5f02\u5e38",e)}return!1},e.getShareQuery=function(){return"inviter_code="+l.default.sessionInfo.user_code},e.getShareAppMsg=function(t,n){var a={title:"",imageUrl:"",query:this.getShareQuery(),imageUrlId:"",templateId:"",desc:""};try{var o=e.getRandomByArray(t);delete a.imageUrlId,delete a.templateId,delete a.desc,a.title=o.title,a.imageUrl=o.images,a.query+="&share_id="+o.id,l.default.application_id===l.default.APPLICATION_ID.TT?a.templateId=o.image_url_id:(a.imageUrlId=o.image_url_id,a.desc="");var r={action:"\u5206\u4eab-"+n,action_name:n,data:{level:l.default.extUserData.curr_level,id:o.id}};h.default.pushUserAction(r)}catch(e){c.default.log("\u5206\u4eab\u65f6\u83b7\u53d6\u5206\u4eab\u5185\u5bb9\u5f02\u5e38",e)}return c.default.log("\u83b7\u53d6\u5206\u4eab\u4fe1\u606f\u6210\u529f",a),a},e.postMessageToOpenData=function(e){try{if(!s.default.systemInterface.getOpenDataContext)return!1;s.default.systemInterface.getOpenDataContext().postMessage(e)}catch(t){c.default.error("postMessageToOpenData \u5f02\u5e38",e)}},e.initWxOpenData=function(){u.default.Ins.scheduleOnce(function(){try{e.postMessageToOpenData({message:"initOpenData",main_rank_click:l.default.config.game_conf.main_rank_click,level:l.default.extUserData.level,share_img:l.default.config.share_img,pos_share_img:l.default.config.pos_share_img,openid:l.default.sessionInfo.openidConstData,share_nick_name:l.default.config.game_conf.share_nick_name})}catch(e){c.default.error("\u521d\u59cb\u5316\u5f00\u653e\u57df\u9519\u8bef",e)}},.1)},e.deepClone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}},e.shuffleArray=function(e){try{for(var t=void 0,n=e.length,a=0;a<n-1;a++){var o=Math.floor(Math.random()*n--);t=e[o],e[o]=e[n],e[n]=t}}catch(t){c.default.error("shuffle\u5f02\u5e38",t,e)}return e},e.shuffleString=function(t){var n="";try{for(var a=t.length,o=[],r=0;r<a;r++)o[r]=t[r];o=e.shuffleArray(o);for(r=0;r<o.length;r++)n+=o[r]}catch(e){c.default.error("shuffle\u5f02\u5e38",e,t,n)}return n},e.getNumFixed=function(e,t){try{var n=parseFloat(e.toFixed(t));return c.default.log("getNumFixed",e,n),n}catch(t){return c.default.error("getNumFixed\u5f02\u5e38",t,e),e}},e.getRealRandomMax=function(e){return Math.random()*e},e.getRandomMax=function(e){return Math.floor(Math.random()*e)},e.getRandomByArray=function(e){try{return e[this.getRandomMax(e.length)]}catch(e){c.default.error("\u83b7\u53d6\u6570\u7ec4\u968f\u673a\u503c\u5f02\u5e38",e)}return{}},e.getBannerList=function(){for(var e="",t=this._bannerList,n=0;n<l.default.config.adv_unit_conf.banner.length;n++){if(t.length===l.default.config.adv_unit_conf.banner.length)return this._bannerList=[],l.default.config.adv_unit_conf.banner[0];var a=l.default.config.adv_unit_conf.banner[n];if(-1===t.indexOf(a))return e=a,t.push(a),c.default.log(" banner id ... ",e),e}},e.TestBannerSum=function(e){var t=this;0===this._bannerSum.length&&l.default.config.adv_unit_conf.banner.forEach(function(e){t._bannerSum.push({id:e,sum:0})}),this._bannerSum.forEach(function(n){n.id===e&&(n.sum++,t._TestNode.getComponent(cc.Label).string=String(n.sum))})},e.getRandom=function(e,t){return Math.floor(Math.random()*(t-e)+e)},e.getRealRandom=function(e,t){return Math.random()*(t-e)+e},e.getSystemInfo=function(){try{return this._systemInfo||(this._systemInfo=s.default.systemInterface.getSystemInfoSync()),this._systemInfo}catch(e){return c.default.error("\u83b7\u53d6\u7cfb\u7edf\u914d\u7f6e\u5f02\u5e38",e),this._systemInfo}},e.initNavigateGameBoxDone=function(){var e=s.default.systemInterface.getStorageSync("navigate_game_box");if(e&&l.default.config.game_box&&l.default.config.game_box.length>0){l.default.NAVIGATE_APP_HAS_GO=i.mergeObject(l.default.NAVIGATE_APP_HAS_GO,e);for(var t={},n=0;n<l.default.config.game_box.length;n++){t[l.default.config.game_box[n].app_id]=!0}for(var a in l.default.NAVIGATE_APP_HAS_GO)t.hasOwnProperty(a)||delete l.default.NAVIGATE_APP_HAS_GO[a]}},e.addNavigateGameBoxDone=function(e){l.default.NAVIGATE_APP_HAS_GO[e]=!0,s.default.systemInterface.setStorage({key:"navigate_game_box",data:l.default.NAVIGATE_APP_HAS_GO})},e.showRewardedVideo=function(){e.checkIsShow(l.default.config.ad_move_conf.screen_rewarded)?s.default.rewardedVideo.show({success:function(t){switch(t){case f.default.REWARDED_VIDEO_END_TYPE.END:e.checkPer(50);break;case f.default.REWARDED_VIDEO_END_TYPE.ERROR:default:s.default.screenAdv.show()}},callObj:this}):s.default.screenAdv.show()},e.sortGameBox=function(e){e.forEach(function(e,t){})},e.sort=function(t,n,a){if(void 0===n&&(n=0),void 0===a&&(a=t.length),a<=n)return t;for(var o=n,r=a,i=t[n].sort;;){for(;o!=r;){if(t[r].sort<i){var c=t[r];t[r]=t[o],t[o]=c;break}r--}for(;o!=r;){if(t[o].sort>i){c=t[o];t[o]=t[r],t[r]=c;break}o++}if(o==r)break}return a-r>1&&(t=e.sort(t,r+1,a)),o-n>1&&(t=e.sort(t,n,o)),t},e.quickSort=function(t){if(t.length<2)return t;for(var n=Math.floor(Math.random()*t.length),a=[],o=[],i=0;i<t.length;i++)t[i].sort>=t[n].sort&&i!==n&&o.push(t[i]),t[i].sort<t[n].sort&&i!==n&&a.push(t[i]);return r(e.quickSort(a),[t[n]],e.quickSort(o))},e.getGameBox=function(){var t=e.deepClone(l.default.config.game_box);t=e.quickSort(t);for(var n=[],a={},o=0;o<t.length;o++){var r=t[o];r.has_go=!1;var i=r.app_id;if(!0===l.default.NAVIGATE_APP_HAS_GO[i])switch(r.is_multipoint){case 1:a.hasOwnProperty(i)||(r.has_go=!0,a[i]=r);break;case 0:break;default:n.push(r)}else n.push(r)}for(var c in a)n.push(a[c]);return n},e.navigateTo=function(t,n){var a=this;try{c.default.log(" \u5bfc\u51fa ... "),t||c.default.error("\u8df3\u8f6c\u79fb\u9664",t),s.default.systemInterface.navigateToMiniProgram({appId:t.app_id,path:t.path,success:function(e){h.default.updateAdvTime(!1),i.pushUserExport({export_id:t.id,data:{name:n},success:function(){c.default.log("\u6210\u529f\u5bfc\u51fa\u4fe1\u606f",t,n)}},function(e){c.default.log("pushExport",JSON.stringify(e),t,n)}),h.default.pushUserAction({action:"\u8df3\u8f6c\u6210\u529f-"+n,action_name:n,data:{id:t.id}}),a.addNavigateGameBoxDone(t.app_id)},fail:function(a){h.default.pushUserAction({action:"\u53d6\u6d88\u8df3\u8f6c-"+n,action_name:n,data:{id:t.id}}),e.checkPer(l.default.config.box_conf.is_cancel)&&g.default.openUI(v.default,_.default.advView,{view:"end"}),c.default.error("\u8fdb\u5165\u5bfc\u51fa\u5931\u8d25",a,t,n)}})}catch(e){c.default.error("\u8fdb\u5165\u5bfc\u51fa\u79fb\u9664",t,n)}},e.convertCcPositionToNative=function(e,t,n){var a=e.x+t.width/2-n.width/2,o=t.height/2-e.y-n.height/2;return cc.v3(a,o,0)},e.convertNativePositionToCc=function(e,t,n){var a=e.x+n.width/2-t.width/2,o=t.height/2-e.y-n.height/2;return cc.v3(a,o,0)},e.setSpriteFrame=function(e,t){e&&(e.getComponent(cc.Sprite).spriteFrame=t)},e.showModal=function(e,t,n,a,o,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===o&&(o="\u53d6\u6d88"),void 0===r&&(r="\u786e\u5b9a");try{var i={content:e,cancelText:o,confirmText:r,callObj:this,success:function(e){e.confirm?"function"==typeof t&&null!==a&&t.call(a):e.cancel&&"function"==typeof n&&null!==a&&n.call(a)},fail:function(){"function"==typeof t&&null!==a&&t.call(a)}};g.default.closeUI(m.default,!1,{is_emit:!0}),g.default.openUI(m.default,_.default.tipView,i)}catch(e){"function"==typeof t&&null!==a&&t.call(a)}},e.changeNode=function(t,n,a,o,r,i,c){var l=this;if(void 0===r&&(r=null),void 0===i&&(i=null),void 0===c&&(c=!1),!1===t)return!1;if(this.checkBannerIsError())return c?s.default.bannerAdv.hide():cc.tween(n).by(.1,{y:200},{easing:"smooth"}).start(),!1;null!==r&&o.scheduleOnce(function(){n.position=r.clone()},t+.05);var u=a.wx_show,d=a.delay,f=t+d+u+.5;return o.scheduleOnce(function(){l.checkBannerIsError()?s.default.bannerAdv.hide():o.scheduleOnce(function(){if(e.pauseRecorderGame(),l.checkBannerIsError())s.default.bannerAdv.hide();else{var t="";o&&o.node&&o.node.name&&(t=o.node.name),h.default.updateAdvTime(!0,u,t),s.default.bannerAdv.show(),o.scheduleOnce(function(){c?(s.default.bannerAdv.hide(),o.scheduleOnce(function(){s.default.bannerAdv.show(),o.scheduleOnce(function(){s.default.bannerAdv.hide()},1)},.6)):cc.tween(n).by(a.btn_move_time,{y:200},{easing:"smooth"}).start(),e.resumeRecorderGame()},d),c||o.scheduleOnce(function(){o.scheduleOnce(function(){s.default.bannerAdv.hide(),o.scheduleOnce(function(){s.default.bannerAdv.show()},.6)},.6)},d-1.5)}},u)},t),f},e.changeAllAdvMove=function(e){void 0===e&&(e=100);try{if(void 0!==l.default.config.ad_move_conf.begin_game.treasure_box&&(l.default.config.ad_move_conf.begin_game.treasure_box=e),void 0!==l.default.config.ad_move_conf.begin_game.treasure_box&&(l.default.config.ad_move_conf.begin_game.treasure_box=e),l.default.config.ad_move_conf.page)for(var t in l.default.config.ad_move_conf.page)void 0!==l.default.config.ad_move_conf.page[t].per&&(l.default.config.ad_move_conf.page[t].per=e),void 0!==l.default.config.ad_move_conf.page[t].treasure_box&&(l.default.config.ad_move_conf.page[t].treasure_box=e);l.default.FORCE_UPDATE_ADV=100===e}catch(e){c.default.error(e)}},e.delayShowCloseBtn=function(e,t){try{if(!l.default.config.game_conf||!l.default.config.game_conf.close_btn||1!==l.default.config.game_conf.close_btn.is_show)return e.active=!0,!1;e.active=!1;var n=t;return u.default.Ins.scheduleOnce(function(){e.active=!0},n),n}catch(e){c.default.error(e)}},e.getBannerPos=function(){return this._nodeWordSpacePosition[s.default.bannerAdv.getNode().uuid]},e.initNodeWordSpacePosition=function(e){if(!this._nodeWordSpacePosition.hasOwnProperty(e.uuid)){var t=e.parent.convertToWorldSpaceAR(e.position.clone()).clone();this._nodeWordSpacePosition[e.uuid]=t.clone()}},e.getWxNodeInfoByCcNode=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var a=null;this._nodeWordSpacePosition.hasOwnProperty(e.uuid)?a=this._nodeWordSpacePosition[e.uuid].clone():(a=e.parent.convertToWorldSpaceAR(e.position.clone()).clone(),this._nodeWordSpacePosition[e.uuid]=a.clone());var o=0,r=0,i=cc.view.getFrameSize(),c=cc.winSize;r=(a.y,c.height/2-a.y-e.height*e.anchorY);var s=i.width/c.width,l=i.height/c.height,u=e.width*s,d=e.height*l;o=a.x>0?c.width/2+a.x-e.width*e.anchorX:c.width/2- -a.x-e.width*e.anchorX;var f=u,h=d;return o*=s,r*=l,null!==t&&u<t&&(o-=(t-u)/2,f=t),null!==n&&d<n&&(r-=(n-d)/2,h=n),{left:o,top:r,width:f,height:h}},e._updateWxUser=function(){var e=this;if(!s.default.systemInterface.getUserInfo||this._hasUpdateWxUser)return c.default.error("\u4e0d\u9700\u8981\u66f4\u65b0\u7528\u6237\u4fe1\u606f",this._hasUpdateWxUser),!1;s.default.systemInterface.getUserInfo({success:function(t){c.default.log("getUserInfo success",t),"getUserInfo:ok"==t.errMsg&&(e._hasUpdateWxUser=!0,h.default.updateWxUser(t.userInfo))}})},e.resumeRecorderGame=function(){try{if(!this._gameRecorderMgr)return;this._gameRecorderMgr.resume()}catch(e){c.default.error(e)}},e.pauseRecorderGame=function(){try{if(!this._gameRecorderMgr)return;this._gameRecorderMgr.pause()}catch(e){c.default.error(e)}},e.stopRecorderGame=function(){try{if(!this._gameRecorderMgr)return;this._gameRecorderMgr.stop(),this.recordInfo.end=(new Date).getTime()/1e3}catch(e){c.default.error(e)}},e.showGameRecorderShareButton=function(e,t,n,a){void 0===t&&(t="default.score"),void 0===n&&(n={}),void 0===a&&(a="challenge");try{if(!s.default.systemInterface.createGameRecorderShareButton)return!1;var o=this.getWxNodeInfoByCcNode(e),r={left:o.left,top:o.top,width:o.width,height:o.height,backgroundColor:"",color:""},i={query:this.getShareQuery(),title:{template:t,data:n},button:{template:a},audioMix:!0,volume:1};if(!this._gameRecorderShareInstance){var l=s.default.systemInterface.createGameRecorderShareButton({text:"",style:r,share:i,icon:"null"});l.onTap(function(e){c.default.error("\u5206\u4eab\u89c6\u9891\u5f02\u5e38",e)}),this._gameRecorderShareInstance=l}this._gameRecorderShareInstance&&(this._updateObjectOneByOne(this._gameRecorderShareInstance.share,i),this._updateObjectOneByOne(this._gameRecorderShareInstance.style,r),this._gameRecorderShareInstance.show());var u=e.getComponent(cc.Sprite);c.default.log("init game recorder share button end",u)}catch(e){c.default.error(e)}return!0},e.hideGameRecorderShareButton=function(){this._gameRecorderShareInstance&&this._gameRecorderShareInstance.hide()},e.showFeedbackButton=function(t){try{if(t.active=!1,1!==l.default.config.game_conf.feedback)return!1;if(!s.default.systemInterface.createFeedbackButton)return!1;t.active=!0;var n=this.getWxNodeInfoByCcNode(t),a={left:n.left,top:n.top,width:n.width,height:n.height,backgroundColor:""};null===this._feedbackButtonInstance&&(this._feedbackButtonInstance=s.default.systemInterface.createFeedbackButton({type:"text",text:"",style:a}),c.default.log("\u521d\u59cb\u5316\u610f\u89c1\u53cd\u9988\u6309\u94ae",n,e.getSystemInfo(),this._feedbackButtonInstance)),this._feedbackButtonInstance&&(this._updateObjectOneByOne(this._feedbackButtonInstance.style,a),this._feedbackButtonInstance.show())}catch(e){c.default.error("\u663e\u793a\u610f\u89c1\u53cd\u9988btn\u5f02\u5e38",e)}return!0},e.hideFeedbackButton=function(){try{this._feedbackButtonInstance&&this._feedbackButtonInstance.hide()}catch(e){c.default.error("\u9690\u85cf\u610f\u89c1\u53cd\u9988btn\u5f02\u5e38",e)}return!0},e.showGetUserInfoButton=function(t){var n=this;try{if(l.default.hasScopeUserInfo)return c.default.log("can not create user info btn, has auth"),this._updateWxUser(),!0;if(!s.default.systemInterface.createUserInfoButton)return s.default.systemInterface.authorize&&!l.default.hasScopeUserInfo&&s.default.systemInterface.authorize({scope:"scope.userInfo",success:function(){n._updateWxUser()}}),c.default.log("can not create user info btn, no function",l.default.hasScopeUserInfo),!0;var a=this.getWxNodeInfoByCcNode(t),o={left:a.left,top:a.top,width:a.width,height:a.height,backgroundColor:""};if(!this._getUserInfoButtonInstance){c.default.log("\u521d\u59cb\u5316\u6388\u6743\u6309\u94ae",a,e.getSystemInfo(),t,o);var r=s.default.systemInterface.createUserInfoButton({type:"text",text:"",style:o});if(!r)return!1;r.onTap(function(e){try{n.initWxSetting(),"getUserInfo:ok"==e.errMsg&&(h.default.updateWxUser(e.userInfo),n._hasUpdateWxUser=!0),n._getUserInfoButtonInstance&&n._getUserInfoButtonInstance.hide(),c.default.log("\u83b7\u53d6\u5fae\u4fe1\u4fe1\u606f\u6210\u529f",e)}catch(e){c.default.error("\u5fae\u4fe1\u6388\u6743\u7528\u6237\u4fe1\u606f\u70b9\u51fb\u5f02\u5e38",e)}}),this._getUserInfoButtonInstance=r}this._getUserInfoButtonInstance&&(this._updateObjectOneByOne(this._getUserInfoButtonInstance.style,o),this._getUserInfoButtonInstance.style.top=o.top,this._getUserInfoButtonInstance.show())}catch(e){return c.default.error("\u521d\u59cb\u5316\u83b7\u53d6\u5fae\u4fe1\u6388\u6743\u7528\u6237\u4fe1\u606fbutton\u5f02\u5e38 ",e),!1}},e._updateObjectOneByOne=function(e,t){for(var n in t)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(e[n]=t[n])},e.hideGetUserInfoButton=function(){this._getUserInfoButtonInstance&&this._getUserInfoButtonInstance.hide()},e.showGameClubButton=function(t){try{if(t.active=!1,1!==l.default.config.game_conf.game_club)return!1;if(!s.default.systemInterface.createGameClubButton)return!1;t.active=!0;var n=this.getWxNodeInfoByCcNode(t),a={left:n.left,top:n.top,width:n.width,height:n.height};null===this._gameClubButtonInstance.hasOwnProperty(t.uuid)&&(this._gameClubButtonInstance=s.default.systemInterface.createGameClubButton({type:"image",icon:"green",style:a}),c.default.log("\u521d\u59cb\u5316\u6e38\u620f\u5708\u6309\u94ae",n,e.getSystemInfo(),this._gameClubButtonInstance)),this._gameClubButtonInstance&&(this._updateObjectOneByOne(this._gameClubButtonInstance.style,a),this._gameClubButtonInstance.show())}catch(e){c.default.error("\u663e\u793agameClubButton\u5f02\u5e38",e)}return!0},e.hideGameClubButton=function(e){try{if(this._gameClubButtonInstance)return this._gameClubButtonInstance.hide(),!1}catch(e){c.default.error("\u9690\u85cfgameClubButton\u5f02\u5e38",e)}return!0},e.scrollViewOneItem=function(e,t){if(void 0===t&&(t="v"),!(e.isScrolling()||e.isAutoScrolling()||e.content.childrenCount<=0)){var n=e.uuid,a=(e.content.childrenCount,0),o=0,r=e.content.getComponent(cc.Layout);if(r){if("h"===t?(o=e.content.children[0].width+r.spacingX,e.node.width/o,a=e.getMaxScrollOffset().x,Math.round(e.content.height/(e.content.children[0].height+r.spacingY))):(o=e.content.children[0].height+r.spacingY,e.node.height/o,a=e.getMaxScrollOffset().y,Math.round(e.content.width/(e.content.children[0].width+r.spacingX))),!(a<=0)){var i=e.getScrollOffset().x,c=e.getScrollOffset().y;"h"===t&&(c=-e.getScrollOffset().x,i=e.getScrollOffset().y),c+o>a?this._scrollViewData[n]="prev":c<o&&(this._scrollViewData[n]="next"),this._scrollViewData.hasOwnProperty(n)||(this._scrollViewData[n]="next");var s=null;s="next"==this._scrollViewData[n]?"h"===t?cc.v2(o+c,i):cc.v2(i,o+c):"h"===t?cc.v2(c-o,i):cc.v2(i,c-o),"h"===t?0!==s.x&&(s.x=Math.round(s.x/o)*o):0!==s.y&&(s.y=Math.round(s.y/o)*o),e.scrollToOffset(s,.5)}}}},e.setKeepScreenOn=function(e){void 0===e&&(e=!0);try{if(!s.default.systemInterface.setKeepScreenOn)return;s.default.systemInterface.setKeepScreenOn({keepScreenOn:e})}catch(t){c.default.error("\u8bbe\u7f6e\u5c4f\u5e55\u5e38\u4eae\u5f02\u5e38",t,e,s.default.systemInterface)}},e.setUnlockWaySprite=function(e,t,n){void 0===n&&(n=null);var a=t.getChildByName("way").getComponent(cc.Sprite);a&&(null===n&&(n=255,l.default.config.ad_move_conf&&void 0!==l.default.config.ad_move_conf.video_icon&&(n=l.default.config.ad_move_conf.video_icon)),a.node.opacity=n,e!==f.default.UNLOCK_WAY.NONE?(a.node.active=!1,d.default.setSpriteHome(a,e===f.default.UNLOCK_WAY.SHARE?"share":"video")):a.node.active=!1)},e.getMenuButtonBoundingClientRect=function(){var e=cc.view.getFrameSize(),t=cc.winSize.width/e.width,n={width:87,height:32,top:10,bottom:42,left:e.width-10-87,right:e.width-10};if(cc.winSize.height>1334&&(n.top=40),s.default.systemInterface.getMenuButtonBoundingClientRect){var a=s.default.systemInterface.getMenuButtonBoundingClientRect();a.top&&(n=a)}var o={center:t*(n.top+.5*n.height),rect:n,ratio:t};return c.default.log("\u80f6\u56ca\u4f4d\u7f6e\uff1a",JSON.stringify(o)),o},e.isWxAdvInterval=function(){try{return!l.default.config||!l.default.config.game_conf||1===l.default.config.adv_interval.is_wx}catch(e){return c.default.error("isAdvInterval\u5f02\u5e38",e),!0}},e.showToast=function(e,t){void 0===t&&(t=1500);try{if(!s.default.systemInterface.showToast)return void c.default.log("showToast \u5931\u8d25",e);s.default.systemInterface.showToast({title:e,duration:t,icon:"none"})}catch(e){c.default.error("showToast\u5f02\u5e38",e)}},e.checkIsShow=function(e){try{return!(!l.default.config||!l.default.config.ad_move_conf)&&!(1!==l.default.config.ad_move_conf.is_show||!this.checkPer(e)||l.default.extUserData.curr_level<l.default.config.ad_move_conf.level)}catch(e){return!1}},e.checkBannerIsError=function(){return!s.default.bannerAdv||s.default.bannerAdv.isError()},e.checkNodeIsShow=function(){return!this.checkBannerIsError()&&this.checkIsShow(l.default.config.ad_move_conf.per)},e.changeNodePosition=function(e,t){if(void 0===t&&(t=null),null===t&&(t=s.default.bannerAdv.getNode()),null!==t)for(var n=0;n<e.length;n++){var a=e[n],o=(a.position.clone(),null);this._nodeWordSpacePosition.hasOwnProperty(t.uuid)?o=this._nodeWordSpacePosition[t.uuid].clone():(o=t.parent.convertToWorldSpaceAR(t.position.clone()).clone(),this._nodeWordSpacePosition[t.uuid]=o.clone());var r=a.parent.convertToNodeSpaceAR(o);a.y=o.y,c.default.log("node.y ... ",a.y,r)}},e.setExportPos=function(e){var t=s.default.bannerAdv.getNode();this.changeNodePosition([e]),e.y=e.y+t.height/2+e.height/2},e.checkHasOpenData=function(){return!!l.default.IS_OPEN_DATA&&!!s.default.systemInterface.getOpenDataContext},e.checkPer=function(t){return!!t&&e.getRandomMax(100)<=t},e.subscribeSystemMessageRank=function(){if(1!==l.default.config.subscribe_conf.system_rank||l.default.hasSubscribeSystemMessageRank)return!1;this._subscribeSystemMessage(["SYS_MSG_TYPE_RANK"])},e.subscribeSystemMessageInteractive=function(){if(1!==l.default.config.subscribe_conf.system_interactive||l.default.hasSubscribeSystemMessageInteractive)return!1;this._subscribeSystemMessage(["SYS_MSG_TYPE_INTERACTIVE"])},e.initWxSetting=function(){if(!s.default.systemInterface.getSetting)return c.default.log("get setting fail, no function"),!1;s.default.systemInterface.getSetting({withSubscriptions:!0,success:function(e){try{if(e.authSetting["scope.userInfo"]&&(l.default.hasScopeUserInfo=!0),e.subscriptionsSetting&&e.subscriptionsSetting.itemSettings){var t=e.subscriptionsSetting.itemSettings.SYS_MSG_TYPE_RANK;t&&(l.default.hasSubscribeSystemMessageRank=!0),(t=e.subscriptionsSetting.itemSettings.SYS_MSG_TYPE_INTERACTIVE)&&(l.default.hasSubscribeSystemMessageInteractive=!0)}c.default.log("\u83b7\u53d6\u5fae\u4fe1setting\u6210\u529f",e,l.default.hasScopeUserInfo,l.default.hasSubscribeSystemMessageRank,l.default.hasSubscribeSystemMessageInteractive)}catch(t){c.default.error("\u83b7\u53d6\u5fae\u4fe1setting\u5f02\u5e38",t,e)}}})},e._subscribeSystemMessage=function(e){var t=this;try{if(e.length<=0)return!1;if(!s.default.systemInterface.requestSubscribeSystemMessage)return!1;if(e.length<=0)return c.default.error("\u7cfb\u7edf\u6d88\u606f\u7c7b\u578b\u9519\u8bef",e),!1;s.default.systemInterface.requestSubscribeSystemMessage({msgTypeList:e,success:function(n){if(c.default.log("\u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\u6210\u529f",n,e),"requestSubscribeSystemMessage:ok"===n.errMsg){var a=!1;for(var o in n)"accept"===n[o]&&(a=!0);a?(h.default.pushUserAction({action:"\u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\u6210\u529f",action_name:"\u8ba2\u9605\u6210\u529f",data:{level:l.default.extUserData.curr_level,res:n}}),t.initWxSetting()):h.default.pushUserAction({action:"\u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\u5931\u8d25",action_name:"\u8ba2\u9605\u5931\u8d25",data:{level:l.default.extUserData.curr_level,res:n}})}},fail:function(t){c.default.error("\u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\u5f02\u5e38",t,e)}})}catch(t){c.default.error("\u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\u5f02\u5e38",t,e)}},e.subscribeMessage=function(t){void 0===t&&(t=!1);try{if(c.default.log("\u5f00\u59cb\u8ba2\u9605\u6d88\u606f"),!s.default.systemInterface.requestSubscribeMessage||l.default.config.tpl_id.length<=0)return c.default.error("\u8ba2\u9605\u6d88\u606f\u5f02\u5e38\uff0c\u57fa\u7840\u51fd\u6570\u4e0d\u5b58\u5728/\u4e0d\u9700\u8981\u8ba2\u9605",e.getSystemInfo(),l.default.config.tpl_id),!1;if(!t&&(!l.default.config.subscribe_conf||1!==l.default.config.subscribe_conf.is_show||l.default.extUserData.curr_level<l.default.config.subscribe_conf.level||!this.checkPer(l.default.config.subscribe_conf.per)))return c.default.log("\u8ba2\u9605\u6d88\u606f\u5f02\u5e38\uff0c\u4e0d\u9700\u8981\u8ba2\u9605",l.default.config.subscribe_conf),!1;s.default.systemInterface.requestSubscribeMessage({tmplIds:l.default.config.tpl_id,success:function(e){try{if(c.default.log("\u6210\u529f\u8ba2\u9605",e),"requestSubscribeMessage:ok"!==e.errMsg)return;var t=!1;for(var n in e)"accept"===e[n]&&(t=!0);t&&i.pushSubscribeMsg(e,function(t){c.default.log("\u4e0a\u62a5\u8ba2\u9605\u6210\u529f",e,t)})}catch(e){c.default.error("\u8ba2\u9605\u6d88\u606f\u6210\u529f\u540e\u5904\u7406\u5f02\u5e38",e)}},fail:function(e){c.default.error("\u8ba2\u9605\u6d88\u606f\u5931\u8d25",e,l.default.config.tpl_id)}})}catch(e){c.default.error("\u8ba2\u9605\u6d88\u606f\u5f02\u5e38",e)}},e.getAdvInterval=function(e){void 0===e&&(e=!0);var t=30;try{t=e?l.default.config.adv_interval.wx:l.default.config.adv_interval.self}catch(e){c.default.error(" \u83b7\u53d6\u5e7f\u544a\u533a\u95f4\u9519\u8bef",e)}return t||(t=30),t},e.showLoading=function(e){void 0===e&&(e="\u52a0\u8f7d\u4e2d"),s.default.systemInterface.showLoading&&s.default.systemInterface.showLoading({title:e})},e.hideLoading=function(){s.default.systemInterface.hideLoading&&s.default.systemInterface.hideLoading()},e.initCanvas=function(){var e=cc.view.getFrameSize(),t=cc.Canvas.instance.designResolution;try{e.height/e.width<t.height/t.width&&(cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1)}catch(n){c.default.error("initCanvas fail",e,t,n)}},e.hideAllChild=function(e){for(var t=0;t<e.childrenCount;t++)e.children[t].active=!1},e.loadSubPackage=function(e,t,n,a,o){cc.assetManager.loadBundle(e,function(r,i){if(r)return"function"==typeof n&&n.call(o),c.default.error("\u52a0\u8f7d\u9996\u9875\u5206\u5305\u5931\u8d25",e,r),!1;l.default.bundle[e]=i,cc.assetManager.loadBundle("game",function(t,n){if(t)return c.default.error("\u52a0\u8f7d\u6e38\u620f\u5206\u5305\u5931\u8d25",e,t),!1;l.default.bundle.game=n}),i.loadDir(e,function(e,t){"function"==typeof a&&a(e,t)},function(){"function"==typeof t&&t.call(o)})})},e.checkScreenIsMax=function(){return l.default.IS_APP||cc.winSize.height>1600},e.initFingerNode=function(e){var t=new cc.Node,n=t.addComponent(cc.Sprite);return d.default.setSpriteHome(n,"hand",!1),t.parent=e,t.active=!1,t},e.startFingerNode=function(t,n){t.stopAllActions();try{for(var a=null,o=0;o<n.length;o++){var r=n[o];if(e.checkPer(r[0])){a=r[1];break}}if(null===a)a=(r=e.getRandomByArray(n))[1];var i=t.parent.convertToNodeSpaceAR(a.parent.convertToWorldSpaceAR(a.position.clone()));t.x=i.x+a.width/2,t.y=i.y-a.height/2,p.default.scaleStop(t,.5,2,.3,2),t.active=!0}catch(e){c.default.error(e)}},e.setExportOrder=function(){for(var t=l.default.config.box_conf,n={1:"pop",2:"full",3:"menu"},a={pop:"is_pop",full:"is_full",menu:"is_menu"},o=["home","game","end"],r=0;r<o.length;r++)for(var i=o[r],c=0;c<t[i].order.length;c++)l.default.orderStr[i][c]=n[t[i].order[c]];o.forEach(function(n){var o=[];l.default.orderStr[n].forEach(function(r,i){e.checkPer(t[n][a[r]])&&o.push(l.default.orderStr[n][i])}),l.default.orderStr[n]=o})},e.getDisplay=function(e){var t=null;switch(e){case"pop":t=y.default;break;case"menu":t=b.default;break;case"full":t=v.default}return t},e.settingGameBox=function(t,n,a){void 0===a&&(a=!0);var o=l.default.config.box_conf[t];n&&(e.checkPer(o.is_box)?n.show():n.hide()),e.checkPer(o.is_banner)&&a?s.default.bannerAdv.show():s.default.bannerAdv.hide()},e.gameExport=function(t,n){void 0===t&&(t="home");var a=l.default.config.box_conf[t];a.order=l.default.orderStr[t],e.settingGameBox(t,n),0!==a.order.length&&g.default.openUI(e.getDisplay(a.order[0]),_.default.exportView,{data:e.deepClone(a),is_emit:!1})},e.forceExport=function(t,n){var a=this;if(l.default.config.ad_move_conf.is_show){var o,r=l.default.config.box_conf.force_id;r?l.default.config.game_box.forEach(function(e){e.app_id===r&&(o=e)}):o=l.default.config.game_box[e.getRandom(1,l.default.config.game_box.length)];var u="\u5f3a\u5236\u5bfc\u51fa";s.default.systemInterface.navigateToMiniProgram({appId:o.app_id,path:o.path,success:function(e){t(),h.default.updateAdvTime(!1),i.pushUserExport({export_id:o.id,data:{name:u},success:function(){c.default.log("\u6210\u529f\u5bfc\u51fa\u4fe1\u606f",o,u)}},function(e){c.default.log("pushExport",JSON.stringify(e),o,u)}),h.default.pushUserAction({action:"\u8df3\u8f6c\u6210\u529f-\u5f3a\u5236\u5bfc\u51fa",action_name:u,data:{id:o.id}}),a.addNavigateGameBoxDone(o.app_id)},fail:function(e){n(),h.default.pushUserAction({action:"\u53d6\u6d88\u8df3\u8f6c-\u5f3a\u5236\u5bfc\u51fa",action_name:u,data:{id:o.id}}),c.default.error("\u8fdb\u5165\u5bfc\u51fa\u5931\u8d25",e,o,u)}})}},e.viewExport=function(t,n){t.order.splice(0,1);e.switchDisplay(n);0===t.order.length?g.default.closeUI(n,!0,{is_emit:!0}):g.default.openUI(e.getDisplay(t.order[0]),_.default.exportView,{data:e.deepClone(t),is_emit:!1},function(){g.default.closeUI(n,!0,{is_emit:!1})})},e.switchDisplay=function(e){var t;switch(e){case v.default:t="is_full";break;case y.default:t="is_pop";break;case b.default:t="is_menu"}return t},e.positionConversion=function(e,t,n){return e.convertToNodeSpaceAR(t.convertToWorldSpaceAR(n.clone()))},e.getCollision=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1);var a=cc.director.getCollisionManager();a.enabled=e,a.enabledDebugDraw=t,a.enabledDrawBoundingBox=n},e.getPhysics=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=null),cc.director.getPhysicsManager().enabled=!0,t&&(cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit),n&&(this._TestNode=n)},e.prototype.onCollisionExit=function(e,t){},e.prototype.onCollisionStay=function(e,t){},e.onTouchAll=function(e,t,n,a,o,r,i){void 0===i&&(i=!0),e&&(i?(e.on(cc.Node.EventType.TOUCH_START,t,r),e.on(cc.Node.EventType.TOUCH_MOVE,n,r),e.on(cc.Node.EventType.TOUCH_END,a,r),e.on(cc.Node.EventType.TOUCH_CANCEL,o,r)):(e.off(cc.Node.EventType.TOUCH_START,t,r),e.off(cc.Node.EventType.TOUCH_MOVE,n,r),e.off(cc.Node.EventType.TOUCH_END,a,r),e.off(cc.Node.EventType.TOUCH_CANCEL,o,r)))},e.getInteger=function(e,t){switch(void 0===t&&(t="round"),t){case"ceil":Math.ceil(e);break;case"floor":Math.floor(e);break;case"round":Math.round(e);break;case"two":Number(e.toFixed(2))}return e},e.getChildrenIndex=function(e){for(var t=e.parent,n=0;n<t.children.length;n++){if(e===t.children[n])return n}},e.getPointInNode=function(e,t){return t.getBoundingBoxToWorld().contains(e)},e.getRandomLevel=function(t){if(l.default.currLevel)return l.default.currLevel;var n=l.default.extUserData.curr_level;return n>t&&(n=e.getRandom(1,t)),l.default.currLevel=n,n},e.getIndex=function(t){var n,a=[0,1,2,3];switch(t){case"M":case"m":if(this.lastIsM=!0,-1===this.M)a=0===this.lastPoint||2===this.lastPoint?[1,3]:[0,2];else switch(this.M){case 0:a=[2];break;case 1:a=[3];break;case 2:a=[0];break;case 3:a=[1]}break;default:this.lastIsM?a=0===this.lastPoint||2===this.lastPoint?[1,3]:[0,2]:a.splice(this.lastPoint,1),this.lastIsM=!1}return n=a[e.getRandom(0,a.length)],this.M="M"===t?n:-1,this.lastPoint=n,this.ITEM_POINT[n]},e.saveTheJson=function(e,t){if(cc.sys.isBrowser){var n=JSON.stringify(t),a=new Blob([n],{type:"application/json"}),o=document.createElement("a");o.download=e,o.innerHTML="Download File",null!=window.webkitURL?o.href=window.webkitURL.createObjectURL(a):(o.href=window.URL.createObjectURL(a),o.onclick=destroyClickedElement,o.style.display="none",document.body.appendChild(o)),o.click()}},e.prototype.analyticalAudio=function(e){var t=[];if("U"===e||"T"===e||"M"===e||"J"===e||"KL"===e||"K"===e)t[0]=e;else if("("===e.substr(0,1)){var n=(e=e.split("[")[0]).split(".").map(function(e){return e});n[0]=n[0].split("(")[1],n[n.length-1]=n[n.length-1].split(")")[0],t=n}else-1!==e.indexOf("<")?t[0]=e.split("<")[1].split("[")[0]:t[0]=e.split("[")[0];return t},e.analyticalAudio=function(e){var t=[];if("U"===e||"T"===e||"M"===e||"J"===e||"KL"===e||"K"===e||"JK"===e||"JKL"===e)t[0]=e;else if("("===e.substr(0,1)){var n=(e=e.split("[")[0]).split(".").map(function(e){return e});n[0]=n[0].split("(")[1],n[n.length-1]=n[n.length-1].split(")")[0],t=n}else-1!==e.indexOf("<")?t[0]=e.split("<")[1].split("[")[0]:t[0]=e.split("[")[0];return t},e.prototype.testMusic=function(){return a(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<200?(t=this._getBPM(),[4,this._promiseRepeat(t)]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},e.playSecondAudio=function(e){"U"!==e&&"R"!==e&&"r"!==e&&"S"!==e&&"s"!==e&&"t"!==e&&"T"!=e&&"k"!==e&&"K"!==e&&(-1!==e.indexOf("#")&&(e="AAA"+e.split("#")[1]),w.default.playAudioGame("piano/"+e).then(function(e){}),l.default.lastSecondAudio=e)},e.analyticalType=function(e){return-1!==e.split("").indexOf("[")?e.split("[")[1].split("]")[0]:e},e._systemInfo=null,e._bannerList=[],e._bannerSum=[],e._TestNode=null,e._nodeWordSpacePosition={},e._hasUpdateWxUser=!1,e._gameRecorderMgr=null,e.recordInfo={begin:0,end:0},e._gameRecorderShareInstance=null,e._feedbackButtonInstance=null,e._getUserInfoButtonInstance=null,e._gameClubButtonInstance=null,e._scrollViewData={},e._touchAllFunc={},e.lastIsM=!1,e.ITEM_POINT=[-281.25,-93.75,93.75,281.25],e.lastPoint=0,e.M=-1,e}();n.default=A,cc._RF.pop()},{"../../Display/AdvDisplay/FullDisplay":"FullDisplay","../../Display/AdvDisplay/MenuBoxDisplay":"MenuBoxDisplay","../../Display/AdvDisplay/PopBoxDisplay":"PopBoxDisplay","../../Display/TipDisplay/ModalDisplay":"ModalDisplay","../../Main":"Main","../../SDK/sdk":"sdk","../Data/ConstData":"ConstData","../FrameLog":"FrameLog","../Global":"Global","./API/WechatApi":"WechatApi","./ActionMgr":"ActionMgr","./DisplayMgr":"DisplayMgr","./GameMgr":"GameMgr","./ResMgr":"ResMgr","./SoundMgr":"SoundMgr","./ViewMgr":"ViewMgr"}],TreaBoxDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"e1c88PrpLlFqrQ3b9X1Evdn","TreaBoxDisplay");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Frame/Manager/UI/ViewPanel"),i=e("../../Frame/Manager/Tools"),c=e("./PopBoxDisplay"),s=e("../../Frame/Manager/API/WechatApi"),l=e("../../Frame/Manager/Event/EventMgr"),u=e("../../Frame/Manager/GameMgr"),d=e("../../Frame/Manager/Event/EventData"),f=e("../../Frame/Manager/ActionMgr"),h=e("../../Frame/Global"),_=e("./FullDisplay"),p=e("../../Frame/Manager/DisplayMgr"),g=cc._decorator.ccclass,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._processBar=null,t._nodeBtn=null,t._nodeFinger=null,t._nodeHalo=null,t._handData={once:0,width:0,num:0},t._onCloseBox=function(e){e!==_.default.getUrl()&&e!==c.default.getUrl()||s.default.bannerAdv.hide()},t}var n;return a(t,e),n=t,t.getUrl=function(){return"treaBoxDisplay"},t.prototype.initUI=function(){this._nodeBtn=this.getNode("table/button"),this._processBar=this.getNode("table/bar/mask"),this._processBar.x=-this._processBar.parent.width/2,this._processBar.width=0,this._nodeHalo=this.getNode("table/halo"),this._nodeFinger=i.default.initFingerNode(this.node),i.default.changeNodePosition([this._nodeBtn])},t.prototype.show=function(e){var t=this,a=h.default.config.ad_move_conf.page.trea_box;i.default.startFingerNode(this._nodeFinger,[[100,this._nodeBtn]]),l.default.instance().on(d.default.VIEW_CLOSE,this._onCloseBox,this),f.default.rotate(this._nodeHalo),s.default.bannerAdv.hide(),this.scheduleOnce(function(){s.default.bannerAdv.hide()},.5),this._handData.num=i.default.getRandom(a.min,a.max),this._handData.width=Math.ceil(this._processBar.parent.width),this._handData.once=Math.ceil(1/this._handData.num*this._handData.width),this.onTouch(this._nodeBtn,function(){t._processBar.width=t._processBar.width+t._handData.once,t._processBar.width>=t._handData.width&&(s.default.bannerAdv.show(),t.scheduleOnce(function(){h.default.config.ad_move_conf.page.trea_box.is_force?s.default.bannerAdv.hide():p.default.closeUI(n,!0,{is_emit:!0})},2.5))}),h.default.config.ad_move_conf.page.trea_box.is_force&&cc.game.on(cc.game.EVENT_HIDE,function(){p.default.closeUI(n,!0,{is_emit:!0})})},t.prototype.update=function(e){this._processBar.width>.1&&(this._processBar.width-=.01*this._handData.width)},t.prototype.hide=function(e){this.unscheduleAllCallbacks(),this._nodeHalo.stopAllActions(),u.default.updateAdvTime(!0,2,this.node.name),s.default.bannerAdv.show(),l.default.instance().off(d.default.VIEW_CLOSE,this._onCloseBox,this)},t.prototype.playIn=function(){},t.prototype.playOut=function(){},t=n=o([g],t)}(r.default);n.default=m,cc._RF.pop()},{"../../Frame/Global":"Global","../../Frame/Manager/API/WechatApi":"WechatApi","../../Frame/Manager/ActionMgr":"ActionMgr","../../Frame/Manager/DisplayMgr":"DisplayMgr","../../Frame/Manager/Event/EventData":"EventData","../../Frame/Manager/Event/EventMgr":"EventMgr","../../Frame/Manager/GameMgr":"GameMgr","../../Frame/Manager/Tools":"Tools","../../Frame/Manager/UI/ViewPanel":"ViewPanel","./FullDisplay":"FullDisplay","./PopBoxDisplay":"PopBoxDisplay"}],ViewMgr:[function(e,t,n){"use strict";cc._RF.push(t,"def774N4p5APoV3ncRqdhHe","ViewMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.init=function(e){this.gameView=e.gameView,this.homeView=e.homeView,this.exportView=e.exportView,this.tipView=e.tipView,this.advView=e.advView},e.gameView=null,e.homeView=null,e.exportView=null,e.tipView=null,e.advView=null,e}();n.default=a,cc._RF.pop()},{}],ViewPanel:[function(e,t,n){"use strict";cc._RF.push(t,"b1cbarw1aFOroSte0etBBXP","ViewPanel");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../FrameLog"),i=e("./ViewUI"),c=e("../Event/EventMgr"),s=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isInit=!1,t.isCanClose=!0,t.playOutTime=0,t.playInTime=0,t}return a(t,e),t.getUrl=function(){return r.default.error("\u9700\u91cd\u5199getUrl"),""},t.prototype.onDestroy=function(){c.default.instance().targetOff(this),e.prototype.onDestroy.call(this)},t=o([s],t)}(i.default);n.default=l,cc._RF.pop()},{"../../FrameLog":"FrameLog","../Event/EventMgr":"EventMgr","./ViewUI":"ViewUI"}],ViewUI:[function(e,t,n){"use strict";cc._RF.push(t,"879c3vkza9N46+zY8Q4CWo9","ViewUI");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../FrameLog"),i=e("../SoundMgr"),c=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchList={},t._enableList={},t}return a(t,e),t.prototype.setInteractable=function(e,t,n){if(void 0===n&&(n=!0),e){var a=e.getComponent(cc.Button);a&&(a.enableAutoGrayEffect=n,a.interactable=t),this._enableList[e.name]={enabled:t,isGray:n}}},t.prototype.onTouch=function(e,t,n,a,o){var c=this;if(void 0===n&&(n="check"),void 0===a&&(a=.9),void 0===o&&(o=!0),e&&t){var s=e.name;if(this._touchList[s]&&this._touchList[s].target==e)r.default.warn("\u91cd\u590d\u8bbe\u7f6e--\x3e",s);else{var l=e.getComponent(cc.Button);1!=a&&(l||((l=e.addComponent(cc.Button)).transition=cc.Button.Transition.SCALE,l.zoomScale=a));var u=!0,d=!0;this._enableList[e.name]&&(u=this._enableList[e.name].enabled,d=this._enableList[e.name].isGray),this.setInteractable(e,u,d);var f=this,h=function(a){var r=(c._enableList[e.name]||{}).enabled;(void 0===r||r)&&(o&&a.stopPropagation(),n&&""!=n&&("check"===n&&(n="piano/a"+Math.floor(4*Math.random()+1)),i.default.playAudioHome(n).then()),t.call(f,a))};e.on(cc.Node.EventType.TOUCH_START,h),this._touchList[s]={target:e,handler:h,callObj:f}}}else r.default.error("target || handler\u4e3a\u7a7a--\x3e",e,t)},t.prototype.offTouch=function(e){if(e){var t=e.name;if(this._touchList[t]){var n=this._touchList[t].handler;e.off(cc.Node.EventType.TOUCH_START,n),delete this._touchList[t]}delete this._enableList[t]}else r.default.error("target \u4e3a\u7a7a")},t.prototype.clear=function(){for(var e in this._touchList)this.offTouch(this._touchList[e].target)},t.prototype.onDestroy=function(){this.clear()},t.prototype.getNode=function(e){var t=null;return""!=e&&e?((t=-1!=e.indexOf("/")?cc.find(e,this.node):this.node.getChildByName(e))||r.default.warn("\u672a\u627e\u5230\u8be5\u8282\u70b9  path=",e),t):null},t=o([c],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../FrameLog":"FrameLog","../SoundMgr":"SoundMgr"}],WechatApi:[function(e,t,n){"use strict";cc._RF.push(t,"6f418hmibBO7LTzN8Ecl810","WechatApi"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Billing/Wechat/WechatBanner"),o=e("../../Billing/Wechat/WechatGameBox"),r=e("../../Billing/Wechat/WechatScreen"),i=e("../../Billing/Wechat/WechatVideo"),c=e("../../Billing/AdvFree"),s=e("../../Global"),l=e("../../FrameLog"),u=e("./AppApi"),d=function(){function e(){}return e.init=function(){switch(s.default.application_id=s.default.APPLICATION_ID.WECHAT,cc.sys.platform){case cc.sys.QQ_PLAY:s.default.application_id=s.default.APPLICATION_ID.QQ,this.systemInterface=qq;break;case cc.sys.WECHAT_GAME:this.systemInterface=wx,s.default.application_id=s.default.APPLICATION_ID.WECHAT,s.default.OPEN_DATA_KEY="wxgame","undefined"!=typeof tt&&(this.systemInterface=tt,s.default.OPEN_DATA_KEY="ttgame",s.default.application_id=s.default.APPLICATION_ID.TT);break;default:this.systemInterface=u.default,s.default.application_id=s.default.APPLICATION_ID.APP_IOS;break;case cc.sys.ANDROID:case cc.sys.IPHONE:cc.sys.platform===cc.sys.IPHONE?s.default.application_id=s.default.APPLICATION_ID.APP_IOS:s.default.application_id=s.default.APPLICATION_ID.APP_ANDROID,s.default.IS_APP=!0,this.systemInterface=u.default}l.default.log("wx interface init",cc.sys.platform,cc.sys.WECHAT_GAME,this.systemInterface,s.default.application_id)},e.bannerAdv=a.default.instance(),e.gameBox=o.default,e.screenAdv=r.default.instance(),e.rewardedVideo=i.default.instance(),e.splashAd=c.default.instance(),e.nativeExpressAd=c.default.instance(),e.systemInterface=null,e}();n.default=d,cc._RF.pop()},{"../../Billing/AdvFree":"AdvFree","../../Billing/Wechat/WechatBanner":"WechatBanner","../../Billing/Wechat/WechatGameBox":"WechatGameBox","../../Billing/Wechat/WechatScreen":"WechatScreen","../../Billing/Wechat/WechatVideo":"WechatVideo","../../FrameLog":"FrameLog","../../Global":"Global","./AppApi":"AppApi"}],WechatBanner:[function(e,t,n){"use strict";cc._RF.push(t,"196c2zTvpxGoKJOga4SG/jo","WechatBanner");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../AdvBase"),r=e("../../../Display/AdvDisplay/BannerDisplay"),i=e("../../FrameLog"),c=e("../../Manager/Event/EventMgr"),s=e("../../Manager/Event/EventData"),l=e("../../Manager/Tools"),u=e("../../Data/ConstData"),d=e("../../Global"),f=e("../../Manager/DisplayMgr"),h=e("../../Manager/API/WechatApi"),_=e("../../../Main"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._advUnitId=null,t._bannerAdvView=null,t._bannerType=u.default.BANNER_TYPE.NOT_DEFINE,t._replaceCount=0,t._bannerAdv=null,t._lastLoadTime=null,t._onOpenBannerAdvView=function(e){e===r.default.getUrl()&&(t.init(),c.default.instance().off(s.default.VIEW_OPEN,t._onOpenBannerAdvView,t))},t}return a(t,e),t.instance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.getNode=function(){return null!==this._bannerAdvView?this._bannerAdvView.content:null},t.prototype.init=function(){try{if(this._isInit&&this._bannerAdv)return;var e=f.default.getUI(r.default);if(null===e)return c.default.instance().on(s.default.VIEW_OPEN,this._onOpenBannerAdvView,this),!1;this._bannerAdvView=e.getComponent(r.default),this._initBanner(),this._isInit=!0,this._bannerAdv||(this._isError=!0)}catch(e){i.default.error("init WxBanner\u5f02\u5e38",e)}},t.prototype.show=function(){try{if(this._isInit||this.init(),this._isShow=!0,!this._isInit)return!1;this._bannerAdvView.show(null),this._showBannerAdv()}catch(e){i.default.error("\u663e\u793abanner\u5e7f\u544a\u5f02\u5e38",e)}},t.prototype.hide=function(){try{if(this._isShow=!1,!d.default.has_init.config||!this._isInit)return!1;this._bannerAdvView.hide(),this._hideBannerAdv()}catch(e){i.default.error("\u9690\u85cfbanner\u5e7f\u544a\u79fb\u9664",e)}},t.prototype.getAdvInfo=function(){return{advId:this._advUnitId,advType:this._bannerType}},t.prototype.update=function(){d.default.FORCE_UPDATE_ADV&&this._updateWxBanner(!0)},t.prototype._initBanner=function(){var e=this;try{this._initWxBanner(),this._bannerAdv?d.default.has_init.config?_.default.Ins.schedule(function(){d.default.FORCE_UPDATE_ADV&&e._updateWxBanner()},d.default.config.adv_interval.force_wx):c.default.instance().on(s.default.GET_CONFIG,function(){_.default.Ins.schedule(function(){d.default.FORCE_UPDATE_ADV&&e._updateWxBanner()},d.default.config.adv_interval.force_wx)},this):c.default.instance().emit(s.default.BANNER_ERROR)}catch(e){i.default.error("banner\u5e7f\u544a\u5f02\u5e38",e)}},t.prototype._initWxBanner=function(e){void 0===e&&(e=!1);try{if(!d.default.config.adv_unit_conf||!h.default.systemInterface.createBannerAd)return!1;var t=null,n=null,a=l.default.getAdvInterval(!0);if((!a||a<30)&&(a=30),h.default.systemInterface.createGridAd&&d.default.config.adv_unit_conf.grid&&d.default.config.adv_unit_conf.grid.length>0&&!this._isInit&&l.default.checkPer(d.default.config.adv_unit_conf.grid_per)||this._isError&&this._bannerType!==u.default.BANNER_TYPE.GRID){var o=l.default.getRandomByArray(d.default.config.adv_unit_conf.grid);this._advUnitId=o,i.default.log(" grid ... ",o),t=l.default.getWxNodeInfoByCcNode(this.getNode());var r=d.default.config.adv_unit_conf.grid_count;5===r&&8===r||(r=5);var c={adUnitId:o,adTheme:"white",gridCount:r,adIntervals:a*u.default.WX_ADV_CONF.BANNER_INTERVAL,style:{left:t.left,top:t.top,width:t.width,height:t.height}};n=h.default.systemInterface.createGridAd(c),this._bannerType=u.default.BANNER_TYPE.GRID}else{if(!d.default.config.adv_unit_conf.banner||d.default.config.adv_unit_conf.banner.length<=0)return;t=l.default.getWxNodeInfoByCcNode(this.getNode());o=l.default.getBannerList();this._advUnitId=o;var s={adUnitId:o,adIntervals:a*u.default.WX_ADV_CONF.BANNER_INTERVAL,style:{left:t.left,top:t.top,width:t.width,height:t.height}};n=h.default.systemInterface.createBannerAd(s),this._bannerType=u.default.BANNER_TYPE.BANNER}this._bannerAdv=n,this._initWxAdvByInstance(n),e&&this._isShow&&this.show()}catch(e){i.default.error("\u521d\u59cb\u5316banner\u5f02\u5e38",e)}},t.prototype._updateWxBanner=function(e){var t=this;void 0===e&&(e=!1);try{if(!e&&!this._isShow)return!1;if(l.default.isWxAdvInterval()&&l.default.getAdvInterval(!0)>=30&&!this._isError&&this._bannerType===u.default.BANNER_TYPE.BANNER)return!1;this._bannerAdv&&(this._bannerAdv.offError(null),this._bannerAdv.offLoad(null),this._bannerAdv.offResize(null),this._bannerAdv.destroy(),this._bannerAdv=null),_.default.Ins.scheduleOnce(function(){t._initWxBanner(!0),t._isShow?t._showBannerAdv():t._hideBannerAdv()},.1)}catch(e){i.default.error("_updateWxBanner",e)}},t.prototype._initWxAdvByInstance=function(e){var t=this;try{if(!e)return i.default.error("_initWxAdvByInstance\u5f02\u5e38",e),!1;e.onResize(function(e){if(!t._bannerAdv)return!1;var n=l.default.getWxNodeInfoByCcNode(t.getNode(),e.width,e.height);t._bannerAdv.style.left=n.left,t._bannerAdv.style.top=n.top}),e.onError(function(e){if(t._isError=!0,i.default.error("banner\u5f02\u5e38",e,t._advUnitId),1004===e.errCode)return h.default.bannerAdv.hide(),void(t._isInit=!1);t._replaceCount<=u.default.WX_ADV_CONF.REPLACE_COUNT&&(i.default.error("banner\u5f02\u5e38, replace",e,t._replaceCount,t._bannerType),t._replaceCount++,_.default.Ins.scheduleOnce(function(){t._isError&&t._updateWxBanner()},u.default.WX_ADV_CONF.REPLACE_TIME_OUT)),c.default.instance().emit(s.default.BANNER_ERROR)}),e.onLoad(function(){t._isShow?t._showBannerAdv():t._hideBannerAdv(),t._isError=!1,t._lastLoadTime=(new Date).getTime(),c.default.instance().emit(s.default.BANNER_SUCCESS)})}catch(e){i.default.log("banner initWx\u5f02\u5e38",e)}},t.prototype._hideBannerAdv=function(){try{if(!this._bannerAdv||!this._bannerAdv.hide)return!1;this._bannerAdv.hide()}catch(e){i.default.error(e)}return!0},t.prototype._showBannerAdv=function(){try{if(!this._bannerAdv||!this._bannerAdv.show)return c.default.instance().emit(s.default.BANNER_ERROR),!1;this._bannerAdv.show().then(function(e){c.default.instance().emit(s.default.BANNER_SUCCESS)}).catch(function(e){c.default.instance().emit(s.default.BANNER_ERROR),i.default.error("\u663e\u793a\u5fae\u4fe1banner\u5f02\u5e38",e)})}catch(e){i.default.error("\u663e\u793abanner\u5f02\u5e38",e)}return!0},t}(o.default);n.default=p,cc._RF.pop()},{"../../../Display/AdvDisplay/BannerDisplay":"BannerDisplay","../../../Main":"Main","../../Data/ConstData":"ConstData","../../FrameLog":"FrameLog","../../Global":"Global","../../Manager/API/WechatApi":"WechatApi","../../Manager/DisplayMgr":"DisplayMgr","../../Manager/Event/EventData":"EventData","../../Manager/Event/EventMgr":"EventMgr","../../Manager/Tools":"Tools","../AdvBase":"AdvBase"}],WechatGameBox:[function(e,t,n){"use strict";cc._RF.push(t,"8498deMLBFMupzYW7+f3Pwe","WechatGameBox");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../FrameLog"),r=e("../../Global"),i=e("../../Manager/Tools"),c=e("../../Data/ConstData"),s=e("../../Manager/API/WechatApi"),l=e("../AdvBase"),u=e("../../Manager/ActionMgr"),d=cc.Texture2D,f=e("../../Manager/ResMgr"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isInterval=!1,t._parent=null,t._nodeTweenType=null,t._gameBoxName="",t._gameIconList=null,t._currentShowGameBoxList=[],t._handIndex=0,t._hand=null,t}return a(t,e),t.instance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.getNode=function(){return this._gameIconList?this._gameIconList:[]},t.prototype.init=function(e,n,a,o,i){void 0===n&&(n=null),void 0===a&&(a="\u9996\u9875\u6302\u4ef6"),void 0===o&&(o=!0),void 0===i&&(i=null);try{if(this._isInit||!r.default.has_init.config)return;this._gameBoxName=a,this._nodeTweenType=n,this._gameIconList=e,this._changeAllIcon(!1),this._initSelfGameIcon(),this._isInterval=o,this._parent=i,this._handIndex=t._getHandIndex(a)}catch(e){this._initSelfGameIcon(),cc.error("gameIcon\u589e\u52a0\u5bfc\u51fa\u5f02\u5e38",e)}},t.prototype.show=function(){var e=this;try{if(this._isShow=!0,!this._isInit)return!1;if(!r.default.has_init.config)return!1;this._updateSelfGameIcon(),this._showSelfGameIcon(),this._isInterval&&this._parent&&this._parent.schedule(function(){e._updateSelfGameIcon()},i.default.getAdvInterval(!1)),o.default.log("show game box",this._gameIconList)}catch(e){cc.error("\u663e\u793agameIcon",e)}},t.prototype.hide=function(){try{o.default.log("\u9690\u85cfgameIcon"),this._isShow=!1,this._hideSelfGameIcon()}catch(e){cc.error("\u9690\u85cfgameIcon\u5f02\u5e38",e)}},t.prototype._hideSelfGameIcon=function(){try{if(!this._isInit)return!1;for(var e=0;e<this._gameIconList.length;e++)this._gameIconList[e].active=!1}catch(e){cc.error("\u9690\u85cf\u81ea\u5df1\u7684\u5e7f\u544a\u5f02\u5e38",e)}},t.prototype._showSelfGameIcon=function(){try{for(var e=0;e<this._currentShowGameBoxList.length;e++)e<this._gameIconList.length&&(this._gameIconList[e].active=!0)}catch(e){cc.error("\u9690\u85cf\u81ea\u5df1\u7684\u5e7f\u544a\u5f02\u5e38",e)}},t.prototype._changeAllIcon=function(e){var t=0,n=0;try{for(t=0;t<this._gameIconList.length;t++){var a=this._gameIconList[t];if(a)for(n=0;n<a.childrenCount;n++)a.children[n].active=e}}catch(e){o.default.error("changeAllIcon\u5f02\u5e38",e,this._gameIconList,t,n)}},t.prototype._updateSelfGameIcon=function(){try{if(!this._isShow)return void o.default.log("_updateSelfGameIcon fail, is not show",this._isShow);var e=i.default.getGameBox();this._currentShowGameBoxList=e;for(var t=0;t<this._gameIconList.length;t++)this._gameIconList[t].active=!1;var n=function(t){if(t>=a._gameIconList.length)return"continue";var n=e[t],o=a._gameIconList[t];"menu"===a._gameBoxName&&f.default.setSpriteHome(o.getChildByName("bg").getComponent(cc.Sprite),"menu/"+i.default.getRandom(1,7)),o.active=!0;var s=o.getChildByName("sprite");!s&&o.getChildByName("mask")&&(s=o.getChildByName("mask").getChildByName("sprite"));var l=o.getChildByName("title");l&&(l.getComponent(cc.Label).string=n.name);var u=o.getChildByName("hot");if(u&&(u.active=n.is_hot,u.active=r.default.config.box_conf.hand_and_icon.icon),i.default.checkPer(r.default.config.box_conf.hand_and_icon.hand)||o.getChildByName("hand")&&(o.getChildByName("hand").stopAllActions(),o.getChildByName("hand").destroy()),!n[c.default.GAME_BOX_IMAGE_URL.ICON])return"continue";cc.assetManager.loadRemote(n[c.default.GAME_BOX_IMAGE_URL.ICON],d,function(e,t){if(0==t.width){var a=cc.assetManager.cacheManager.getTemp(n[c.default.GAME_BOX_IMAGE_URL.ICON]);cc.assetManager.loadRemote(a,function(e,t){s.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)})}else{if(e)return o.active=!1,!1;s.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)}})},a=this;for(t=0;t<e.length;t++)n(t);o.default.log("updateGameIcon end")}catch(e){o.default.error("gameIcon\u6302\u4ef6\u5f02\u5e38",e)}},t.prototype._initSelfGameIcon=function(){var e=this;if(this._isInit)return o.default.log("self gameIcon\u5df2\u7ecf\u521d\u59cb\u5316"),!1;if(!s.default.systemInterface.navigateToMiniProgram)return cc.error("\u521b\u5efa\u81ea\u5df1\u7684gameIcon\u5931\u8d25\uff0c\u57fa\u7840\u5e93\u4e0d\u80fd\u5bfc\u51fa",i.default.getSystemInfo()),!1;this._changeAllIcon(!0),this._isInit=!0;for(var t=function(t){var a=n._gameIconList[t];switch(a.active=!1,n._nodeTweenType){case c.default.GAME_BOX_TWEEN_TYPE.SHAKE_STOP:u.default.shakeStop(a,.1,r.default.TWEEN_TIME.GAME_BOX*(1+Math.random()*t),10,3);break;case c.default.GAME_BOX_TWEEN_TYPE.SHAKE_FOREVER:u.default.shakeNodeForever(a,3,8)}a.on(cc.Node.EventType.TOUCH_END,function(){e._hand&&(e._hand.stopAllActions(),e._hand.destroy()),e._currentShowGameBoxList[t]&&i.default.navigateTo(e._currentShowGameBoxList[t],e._gameBoxName)},n)},n=this,a=0;a<this._gameIconList.length;a++)t(a)},t._getHandIndex=function(e){var t;switch(e){case"banner":t=-1;break;case"pop":t=9;break;case"full":t=12;break;case"menu":t=4;break;case"home":case"end":t=6}return i.default.getRandom(0,t)},t}(l.default);n.default=h,cc._RF.pop()},{"../../Data/ConstData":"ConstData","../../FrameLog":"FrameLog","../../Global":"Global","../../Manager/API/WechatApi":"WechatApi","../../Manager/ActionMgr":"ActionMgr","../../Manager/ResMgr":"ResMgr","../../Manager/Tools":"Tools","../AdvBase":"AdvBase"}],WechatScreen:[function(e,t,n){"use strict";cc._RF.push(t,"28a23vSOQ9BDpZOlx7QPmiK","WechatScreen");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../AdvBase"),r=e("../../FrameLog"),i=e("../../Global"),c=e("../../Manager/Tools"),s=e("../../Manager/API/WechatApi"),l=e("../../Manager/Event/EventMgr"),u=e("../../Manager/Event/EventData"),d=e("../../../Main"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isGame=!1,t._showInGame=!0,t._screenAd=null,t._showTime=(new Date).getTime(),t._gamePortal=null,t}return a(t,e),t.instance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.getNode=function(){return null},t.prototype.init=function(){var e=this;try{if(this._isInit||!i.default.has_init.config)return;l.default.instance().on(u.default.GAME_CLOSE,function(){e._isGame=!1},this),l.default.instance().on(u.default.START_GAME,function(){e._isGame=!0},this),r.default.log("try to init wx screen adv"),this._initWxScreenAd()}catch(e){r.default.error("\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38",e)}(this._screenAd||this._gamePortal)&&(this._isInit=!0)},t.prototype.show=function(e){var t=this;try{if(this._isInit||this.init(),!i.default.has_init.config||!this._isInit)return!1;if(e&&e.isGamePortal&&e.isDerict)return void this._showGamePortal();var n=(new Date).getTime();if(null!==this._showTime&&n-this._showTime<1e3*i.default.config.screen_adv_config.space_time)return r.default.log("\u4e0d\u5728\u9694\u95f4\u65f6\u95f4\uff0c\u4e0d\u9700\u8981\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a",n,this._showTime),!1;if(!c.default.checkPer(i.default.config.screen_adv_config.per))return r.default.log("\u4e0d\u5728\u6982\u7387\u533a\u95f4\uff0c\u4e0d\u9700\u8981\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a",n,this._showTime),!1;this._showTime=n;var a=c.default.getRealRandom(i.default.config.screen_adv_config.min_time_out,i.default.config.screen_adv_config.time_out);return r.default.log("\u5f00\u59cb\u663e\u793a\u63d2\u5c4f\u5e7f\u544a",a),d.default.Ins.scheduleOnce(function(){try{if(s.default.rewardedVideo.isShow())return r.default.log("\u6b63\u5728\u64ad\u653e\u89c6\u9891\u5e7f\u544a\uff0c\u4e0d\u663e\u793a\u63d2\u5c4f\u5e7f\u544a"),t._showTime=null,!1;if(t._isGame&&!1===t._showInGame)return t._showTime=null,r.default.log("\u6b63\u5728\u6e38\u620f\uff0c\u4e0d\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a",t._isGame,t._showInGame),!1;i.default.config.game_recomm_adv_conf&&c.default.checkPer(i.default.config.game_recomm_adv_conf.portal_per)?t._showGamePortal():t._showScreedAdv()}catch(e){r.default.error("scheduleOnce \u663e\u793a\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38",e)}},a),!0}catch(e){r.default.error("\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38",e)}return!1},t.prototype.hide=function(){},t.prototype._showGamePortal=function(){var e=this;try{this._gamePortal?this._gamePortal.show().catch(function(t){r.default.log(t),e._showScreedAdv()}):this._showScreedAdv()}catch(e){this._showScreedAdv()}},t.prototype._showScreedAdv=function(){try{this._screenAd&&this._screenAd.show&&this._screenAd.show().catch(function(e){r.default.error("\u62c9\u53d6\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25, \u5f00\u59cb\u663e\u793a\u81ea\u5df1\u7684\u5e7f\u544a",e)})}catch(e){r.default.error("\u663e\u793a\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38\uff0c\u5f00\u59cb\u663e\u793a\u81ea\u5df1\u7684\u5e7f\u544a",e)}},t.prototype._initWxScreenAd=function(){var e=this;if(s.default.systemInterface.createGamePortal&&i.default.config.game_recomm_adv_conf&&i.default.config.game_recomm_adv_conf.portal){var t=c.default.getRandomByArray(i.default.config.game_recomm_adv_conf.portal);this._gamePortal=s.default.systemInterface.createGamePortal({adUnitId:t}),this._gamePortal.onClose(function(t){r.default.log("\u7528\u6237\u5173\u95ed\u4e86gamePortal",t),e._loadGamePortal()}),this._gamePortal.onError(function(e){r.default.log("gamePortal\u5931\u8d25\uff0c",e)}),this._gamePortal.onLoad(function(){r.default.log("gamePortal\u6210\u529f\uff0c")}),this._loadGamePortal()}if(s.default.systemInterface.createInterstitialAd&&i.default.config.adv_unit_conf&&i.default.config.adv_unit_conf.screen){t=c.default.getRandomByArray(i.default.config.adv_unit_conf.screen);this._screenAd=s.default.systemInterface.createInterstitialAd({adUnitId:t}),this._screenAd.onClose(function(e){r.default.log("\u7528\u6237\u5173\u95ed\u4e86\u63d2\u5c4f\u5e7f\u544a",e)}),this._screenAd.onError(function(e){r.default.log("\u62c9\u53d6\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25\uff0c",e)}),this._screenAd.onLoad(function(){r.default.log("\u62c9\u53d6\u63d2\u5c4f\u5e7f\u544a\u6210\u529f")})}},t.prototype._loadGamePortal=function(){try{if(!this._gamePortal)return r.default.log("\u4e0d\u9700\u8981\u52a0\u8f7dgamePortal",this._gamePortal),!1;this._gamePortal.load().catch(function(e){r.default.error("\u52a0\u8f7dgamePortal\u5f02\u5e38",e)})}catch(e){r.default.error("\u52a0\u8f7dgamePortal\u6570\u636e\u5f02\u5e38",e)}},t}(o.default);n.default=f,cc._RF.pop()},{"../../../Main":"Main","../../FrameLog":"FrameLog","../../Global":"Global","../../Manager/API/WechatApi":"WechatApi","../../Manager/Event/EventData":"EventData","../../Manager/Event/EventMgr":"EventMgr","../../Manager/Tools":"Tools","../AdvBase":"AdvBase"}],WechatVideo:[function(e,t,n){"use strict";cc._RF.push(t,"9b8e5DE5+NPWriD191x6q2J","WechatVideo");var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../AdvBase"),r=e("../../FrameLog"),i=e("../../Global"),c=e("../../Data/ConstData"),s=e("../../Manager/GameMgr"),l=e("../../Manager/API/WechatApi"),u=e("../../Manager/Tools"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rewardedVideoAd=null,t._successCallback=null,t._callObj=null,t._changeShareScore=function(e){switch(e){case c.default.REWARDED_VIDEO_END_TYPE.END:s.default.changeShareScore(i.default.config.unlock_conf.video.change);break;case c.default.REWARDED_VIDEO_END_TYPE.ERROR:i.default.extUserData.share_score<=i.default.config.unlock_conf.share.score&&s.default.changeShareScore(Math.abs(i.default.config.unlock_conf.share.score-i.default.extUserData.share_score)+i.default.config.unlock_conf.share.change);break;default:s.default.changeShareScore(i.default.config.unlock_conf.video.not_end_change)}},t}return a(t,e),t.instance=function(){return null===this._instance&&(new this,this._instance=new t),this._instance},t.prototype.getNode=function(){return null},t.prototype.init=function(){var e=this;try{if(this._isInit||!i.default.has_init.config)return;if(l.default.systemInterface.createRewardedVideoAd&&i.default.config.adv_unit_conf&&i.default.config.adv_unit_conf.rewarded_video){var t=u.default.getRandomByArray(i.default.config.adv_unit_conf.rewarded_video);this._rewardedVideoAd=l.default.systemInterface.createRewardedVideoAd({adUnitId:t}),this._rewardedVideoAd.onClose(function(t){e._isShow=!1,t.isEnded?e._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.END):e._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.NOT_END)}),this._rewardedVideoAd.onError(function(t){e._isShow=!1,e._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.ERROR),r.default.log("\u62c9\u53d6\u89c6\u9891\u5931\u8d25\uff0c",t)})}else this._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.ERROR)}catch(e){this._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.ERROR),r.default.error("\u521d\u59cb\u5316\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5f02\u5e38",e)}this._rewardedVideoAd&&(this._isInit=!0)},t.prototype.show=function(e){var t=this;this._successCallback=e.success,this._callObj=e.callObj,r.default.log("show rewarded",e);try{if(this._isInit||this.init(),!this._isInit)return void this._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.ERROR);this._rewardedVideoAd.show().catch(function(e){t._isShow=!1,r.default.log("\u62c9\u53d6\u6fc0\u52b1\u89c6\u9891\u5931\u8d25",e),t._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.ERROR)}).then(function(){t._isShow=!0})}catch(e){r.default.error("\u663e\u793a\u6fc0\u52b1\u89c6\u9891\u5f02\u5e38",e),this._callSuccess(c.default.REWARDED_VIDEO_END_TYPE.ERROR)}},t.prototype.hide=function(){},t.prototype._callSuccess=function(e){this._changeShareScore(e),"function"==typeof this._successCallback&&this._successCallback.call(this._callObj,e)},t}(o.default);n.default=d,cc._RF.pop()},{"../../Data/ConstData":"ConstData","../../FrameLog":"FrameLog","../../Global":"Global","../../Manager/API/WechatApi":"WechatApi","../../Manager/GameMgr":"GameMgr","../../Manager/Tools":"Tools","../AdvBase":"AdvBase"}],crypto_js:[function(e,t,n){"use strict";cc._RF.push(t,"4f669SraRJG4L90et2zk0Tv","crypto_js"),function(e,a){"object"==typeof n?t.exports=n=a():"function"==typeof define&&define.amd?define([],a):(void 0).CryptoJS=a()}(0,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},o=a.lib={},r=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=o.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,a=this.sigBytes,o=e.sigBytes;if(this.clamp(),a%4)for(var r=0;r<o;r++){var i=n[r>>>2]>>>24-r%4*8&255;t[a+r>>>2]|=i<<24-(a+r)%4*8}else for(r=0;r<o;r+=4)t[a+r>>>2]=n[r>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,a=[],o=function(t){t=t;var n=987654321,a=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&a)<<16)+(t=18e3*(65535&t)+(t>>16)&a)&a;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},r=0;r<t;r+=4){var c=o(4294967296*(n||e.random()));n=987654071*c(),a.push(4294967296*c()|0)}return new i.init(a,t)}}),c=a.enc={},s=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;a.push((r>>>4).toString(16)),a.push((15&r).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new i.init(n,t/2)}},l=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;a.push(String.fromCharCode(r))}return a.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a++)n[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new i.init(n,t)}},u=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,a=n.words,o=n.sigBytes,r=this.blockSize,c=o/(4*r),s=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*r,l=e.min(4*s,o);if(s){for(var u=0;u<s;u+=r)this._doProcessBlock(a,u);var d=a.splice(0,s);n.sigBytes-=l}return new i.init(d,l)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(o.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math);return function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,a=this._map;e.clamp();for(var o=[],r=0;r<n;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,c=0;c<4&&r+.75*c<n;c++)o.push(a.charAt(i>>>6*(3-c)&63));var s=a.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var r=0;r<n.length;r++)o[n.charCodeAt(r)]=r}var i=n.charAt(64);if(i){var c=e.indexOf(i);-1!==c&&(t=c)}return a(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(e,t,a){for(var o=[],r=0,i=0;i<t;i++)if(i%4){var c=a[e.charCodeAt(i-1)]<<i%4*2,s=a[e.charCodeAt(i)]>>>6-i%4*2;o[r>>>2]|=(c|s)<<24-r%4*8,r++}return n.create(o,r)}}(),function(t){var n=e,a=n.lib,o=a.WordArray,r=a.Hasher,i=n.algo,c=[];(function(){for(var e=0;e<64;e++)c[e]=4294967296*t.abs(t.sin(e+1))|0})();var s=i.MD5=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var a=t+n,o=e[a];e[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r=this._hash.words,i=e[t+0],s=e[t+1],h=e[t+2],_=e[t+3],p=e[t+4],g=e[t+5],m=e[t+6],v=e[t+7],y=e[t+8],b=e[t+9],w=e[t+10],A=e[t+11],E=e[t+12],I=e[t+13],M=e[t+14],S=e[t+15],x=r[0],O=r[1],D=r[2],B=r[3];O=f(O=f(O=f(O=f(O=d(O=d(O=d(O=d(O=u(O=u(O=u(O=u(O=l(O=l(O=l(O=l(O,D=l(D,B=l(B,x=l(x,O,D,B,i,7,c[0]),O,D,s,12,c[1]),x,O,h,17,c[2]),B,x,_,22,c[3]),D=l(D,B=l(B,x=l(x,O,D,B,p,7,c[4]),O,D,g,12,c[5]),x,O,m,17,c[6]),B,x,v,22,c[7]),D=l(D,B=l(B,x=l(x,O,D,B,y,7,c[8]),O,D,b,12,c[9]),x,O,w,17,c[10]),B,x,A,22,c[11]),D=l(D,B=l(B,x=l(x,O,D,B,E,7,c[12]),O,D,I,12,c[13]),x,O,M,17,c[14]),B,x,S,22,c[15]),D=u(D,B=u(B,x=u(x,O,D,B,s,5,c[16]),O,D,m,9,c[17]),x,O,A,14,c[18]),B,x,i,20,c[19]),D=u(D,B=u(B,x=u(x,O,D,B,g,5,c[20]),O,D,w,9,c[21]),x,O,S,14,c[22]),B,x,p,20,c[23]),D=u(D,B=u(B,x=u(x,O,D,B,b,5,c[24]),O,D,M,9,c[25]),x,O,_,14,c[26]),B,x,y,20,c[27]),D=u(D,B=u(B,x=u(x,O,D,B,I,5,c[28]),O,D,h,9,c[29]),x,O,v,14,c[30]),B,x,E,20,c[31]),D=d(D,B=d(B,x=d(x,O,D,B,g,4,c[32]),O,D,y,11,c[33]),x,O,A,16,c[34]),B,x,M,23,c[35]),D=d(D,B=d(B,x=d(x,O,D,B,s,4,c[36]),O,D,p,11,c[37]),x,O,v,16,c[38]),B,x,w,23,c[39]),D=d(D,B=d(B,x=d(x,O,D,B,I,4,c[40]),O,D,i,11,c[41]),x,O,_,16,c[42]),B,x,m,23,c[43]),D=d(D,B=d(B,x=d(x,O,D,B,b,4,c[44]),O,D,E,11,c[45]),x,O,S,16,c[46]),B,x,h,23,c[47]),D=f(D,B=f(B,x=f(x,O,D,B,i,6,c[48]),O,D,v,10,c[49]),x,O,M,15,c[50]),B,x,g,21,c[51]),D=f(D,B=f(B,x=f(x,O,D,B,E,6,c[52]),O,D,_,10,c[53]),x,O,w,15,c[54]),B,x,s,21,c[55]),D=f(D,B=f(B,x=f(x,O,D,B,y,6,c[56]),O,D,S,10,c[57]),x,O,m,15,c[58]),B,x,I,21,c[59]),D=f(D,B=f(B,x=f(x,O,D,B,p,6,c[60]),O,D,A,10,c[61]),x,O,h,15,c[62]),B,x,b,21,c[63]),r[0]=r[0]+x|0,r[1]=r[1]+O|0,r[2]=r[2]+D|0,r[3]=r[3]+B|0},_doFinalize:function(){var e=this._data,n=e.words,a=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var r=t.floor(a/4294967296),i=a;n[15+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process();for(var c=this._hash,s=c.words,l=0;l<4;l++){var u=s[l];s[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return c},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,a,o,r,i){var c=e+(t&n|~t&a)+o+i;return(c<<r|c>>>32-r)+t}function u(e,t,n,a,o,r,i){var c=e+(t&a|n&~a)+o+i;return(c<<r|c>>>32-r)+t}function d(e,t,n,a,o,r,i){var c=e+(t^n^a)+o+i;return(c<<r|c>>>32-r)+t}function f(e,t,n,a,o,r,i){var c=e+(n^(t|~a))+o+i;return(c<<r|c>>>32-r)+t}n.MD5=r._createHelper(s),n.HmacMD5=r._createHmacHelper(s)}(Math),function(){var t=e,n=t.lib,a=n.WordArray,o=n.Hasher,r=[],i=t.algo.SHA1=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],o=n[1],i=n[2],c=n[3],s=n[4],l=0;l<80;l++){if(l<16)r[l]=0|e[t+l];else{var u=r[l-3]^r[l-8]^r[l-14]^r[l-16];r[l]=u<<1|u>>>31}var d=(a<<5|a>>>27)+s+r[l];d+=l<20?1518500249+(o&i|~o&c):l<40?1859775393+(o^i^c):l<60?(o&i|o&c|i&c)-1894007588:(o^i^c)-899497514,s=c,c=i,i=o<<30|o>>>2,o=a,a=d}n[0]=n[0]+a|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+c|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[14+(a+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(a+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(i),t.HmacSHA1=o._createHmacHelper(i)}(),function(t){var n=e,a=n.lib,o=a.WordArray,r=a.Hasher,i=n.algo,c=[],s=[];(function(){function e(e){for(var n=t.sqrt(e),a=2;a<=n;a++)if(!(e%a))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var a=2,o=0;o<64;)e(a)&&(o<8&&(c[o]=n(t.pow(a,.5))),s[o]=n(t.pow(a,1/3)),o++),a++})();var l=[],u=i.SHA256=r.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],o=n[1],r=n[2],i=n[3],c=n[4],u=n[5],d=n[6],f=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var _=l[h-15],p=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,g=l[h-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=p+l[h-7]+m+l[h-16]}var v=a&o^a&r^o&r,y=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),b=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&d)+s[h]+l[h];f=d,d=u,u=c,c=i+b|0,i=r,r=o,o=a,a=b+(y+v)|0}n[0]=n[0]+a|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+i|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,a=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(a/4294967296),n[15+(o+64>>>9<<4)]=a,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=r._createHelper(u),n.HmacSHA256=r._createHmacHelper(u)}(Math),function(){var t=e,n=t.lib.WordArray,a=t.enc;a.Utf16=a.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],o=0;o<n;o+=2){var r=t[o>>>2]>>>16-o%4*8&65535;a.push(String.fromCharCode(r))}return a.join("")},parse:function(e){for(var t=e.length,a=[],o=0;o<t;o++)a[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return n.create(a,2*t)}};function o(e){return e<<8&4278255360|e>>>8&16711935}a.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],r=0;r<n;r+=2){var i=o(t[r>>>2]>>>16-r%4*8&65535);a.push(String.fromCharCode(i))}return a.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>1]|=o(e.charCodeAt(r)<<16-r%2*16);return n.create(a,2*t)}}}(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,a=[],o=0;o<t;o++)a[o>>>2]|=e[o]<<24-o%4*8;n.call(this,a,t)}else n.apply(this,arguments)}).prototype=t}}(),function(t){var n=e,a=n.lib,o=a.WordArray,r=a.Hasher,i=n.algo,c=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),f=o.create([1352829926,1548603684,1836072691,2053994217,0]),h=i.RIPEMD160=r.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var a=t+n,o=e[a];e[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r,i,h,b,w,A,E,I,M,S,x,O=this._hash.words,D=d.words,B=f.words,P=c.words,C=s.words,R=l.words,T=u.words;A=r=O[0],E=i=O[1],I=h=O[2],M=b=O[3],S=w=O[4];for(n=0;n<80;n+=1)x=r+e[t+P[n]]|0,x+=n<16?_(i,h,b)+D[0]:n<32?p(i,h,b)+D[1]:n<48?g(i,h,b)+D[2]:n<64?m(i,h,b)+D[3]:v(i,h,b)+D[4],x=(x=y(x|=0,R[n]))+w|0,r=w,w=b,b=y(h,10),h=i,i=x,x=A+e[t+C[n]]|0,x+=n<16?v(E,I,M)+B[0]:n<32?m(E,I,M)+B[1]:n<48?g(E,I,M)+B[2]:n<64?p(E,I,M)+B[3]:_(E,I,M)+B[4],x=(x=y(x|=0,T[n]))+S|0,A=S,S=M,M=y(I,10),I=E,E=x;x=O[1]+h+M|0,O[1]=O[2]+b+S|0,O[2]=O[3]+w+A|0,O[3]=O[4]+r+E|0,O[4]=O[0]+i+I|0,O[0]=x},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32,t[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,r=o.words,i=0;i<5;i++){var c=r[i];r[i]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function _(e,t,n){return e^t^n}function p(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function m(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}n.RIPEMD160=r._createHelper(h),n.HmacRIPEMD160=r._createHmacHelper(h)}(Math),function(){var t=e,n=t.lib.Base,a=t.enc.Utf8;t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),i=this._iKey=t.clone(),c=r.words,s=i.words,l=0;l<n;l++)c[l]^=1549556828,s[l]^=909522486;r.sigBytes=i.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(),function(){var t=e,n=t.lib,a=n.Base,o=n.WordArray,r=t.algo,i=r.SHA1,c=r.HMAC,s=r.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=c.create(n.hasher,e),r=o.create(),i=o.create([1]),s=r.words,l=i.words,u=n.keySize,d=n.iterations;s.length<u;){var f=a.update(t).finalize(i);a.reset();for(var h=f.words,_=h.length,p=f,g=1;g<d;g++){p=a.finalize(p),a.reset();for(var m=p.words,v=0;v<_;v++)h[v]^=m[v]}r.concat(f),l[0]++}return r.sigBytes=4*u,r}});t.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}}(),function(){var t=e,n=t.lib,a=n.Base,o=n.WordArray,r=t.algo,i=r.MD5,c=r.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=n.hasher.create(),r=o.create(),i=r.words,c=n.keySize,s=n.iterations;i.length<c;){l&&a.update(l);var l=a.update(e).finalize(t);a.reset();for(var u=1;u<s;u++)l=a.finalize(l),a.reset();r.concat(l)}return r.sigBytes=4*c,r}});t.EvpKDF=function(e,t,n){return c.create(n).compute(e,t)}}(),function(){var t=e,n=t.lib.WordArray,a=t.algo,o=a.SHA256,r=a.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(r),t.HmacSHA224=o._createHmacHelper(r)}(),function(t){var n=e,a=n.lib,o=a.Base,r=a.WordArray,i=n.x64={};i.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],a=0;a<t;a++){var o=e[a];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,a=0;a<n;a++)t[a]=t[a].clone();return e}})}(),function(t){var n=e,a=n.lib,o=a.WordArray,r=a.Hasher,i=n.x64.Word,c=n.algo,s=[],l=[],u=[];(function(){for(var e=1,t=0,n=0;n<24;n++){s[e+5*t]=(n+1)*(n+2)/2%64;var a=(2*e+3*t)%5;e=t%5,t=a}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,r=0;r<24;r++){for(var c=0,d=0,f=0;f<7;f++){if(1&o){var h=(1<<f)-1;h<32?d^=1<<h:c^=1<<h-32}128&o?o=o<<1^113:o<<=1}u[r]=i.create(c,d)}})();var d=[];(function(){for(var e=0;e<25;e++)d[e]=i.create()})();var f=c.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,a=this.blockSize/2,o=0;o<a;o++){var r=e[t+2*o],i=e[t+2*o+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(O=n[o]).high^=i,O.low^=r}for(var c=0;c<24;c++){for(var f=0;f<5;f++){for(var h=0,_=0,p=0;p<5;p++){h^=(O=n[f+5*p]).high,_^=O.low}var g=d[f];g.high=h,g.low=_}for(f=0;f<5;f++){var m=d[(f+4)%5],v=d[(f+1)%5],y=v.high,b=v.low;for(h=m.high^(y<<1|b>>>31),_=m.low^(b<<1|y>>>31),p=0;p<5;p++){(O=n[f+5*p]).high^=h,O.low^=_}}for(var w=1;w<25;w++){var A=(O=n[w]).high,E=O.low,I=s[w];if(I<32)h=A<<I|E>>>32-I,_=E<<I|A>>>32-I;else h=E<<I-32|A>>>64-I,_=A<<I-32|E>>>64-I;var M=d[l[w]];M.high=h,M.low=_}var S=d[0],x=n[0];S.high=x.high,S.low=x.low;for(f=0;f<5;f++)for(p=0;p<5;p++){var O=n[w=f+5*p],D=d[w],B=d[(f+1)%5+5*p],P=d[(f+2)%5+5*p];O.high=D.high^~B.high&P.high,O.low=D.low^~B.low&P.low}O=n[0];var C=u[c];O.high^=C.high,O.low^=C.low}},_doFinalize:function(){var e=this._data,n=e.words,a=(this._nDataBytes,8*e.sigBytes),r=32*this.blockSize;n[a>>>5]|=1<<24-a%32,n[(t.ceil((a+1)/r)*r>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var i=this._state,c=this.cfg.outputLength/8,s=c/8,l=[],u=0;u<s;u++){var d=i[u],f=d.high,h=d.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(f)}return new o.init(l,c)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=r._createHelper(f),n.HmacSHA3=r._createHmacHelper(f)}(Math),function(){var t=e,n=t.lib.Hasher,a=t.x64,o=a.Word,r=a.WordArray,i=t.algo;function c(){return o.create.apply(o,arguments)}var s=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=c()})();var u=i.SHA512=n.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],o=n[1],r=n[2],i=n[3],c=n[4],u=n[5],d=n[6],f=n[7],h=a.high,_=a.low,p=o.high,g=o.low,m=r.high,v=r.low,y=i.high,b=i.low,w=c.high,A=c.low,E=u.high,I=u.low,M=d.high,S=d.low,x=f.high,O=f.low,D=h,B=_,P=p,C=g,R=m,T=v,F=y,N=b,k=w,U=A,G=E,L=I,V=M,W=S,j=x,H=O,z=0;z<80;z++){var K=l[z];if(z<16)var Y=K.high=0|e[t+2*z],X=K.low=0|e[t+2*z+1];else{var J=l[z-15],q=J.high,Q=J.low,Z=(q>>>1|Q<<31)^(q>>>8|Q<<24)^q>>>7,$=(Q>>>1|q<<31)^(Q>>>8|q<<24)^(Q>>>7|q<<25),ee=l[z-2],te=ee.high,ne=ee.low,ae=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=l[z-7],ie=re.high,ce=re.low,se=l[z-16],le=se.high,ue=se.low;Y=(Y=(Y=Z+ie+((X=$+ce)>>>0<$>>>0?1:0))+ae+((X=X+oe)>>>0<oe>>>0?1:0))+le+((X=X+ue)>>>0<ue>>>0?1:0);K.high=Y,K.low=X}var de,fe=k&G^~k&V,he=U&L^~U&W,_e=D&P^D&R^P&R,pe=B&C^B&T^C&T,ge=(D>>>28|B<<4)^(D<<30|B>>>2)^(D<<25|B>>>7),me=(B>>>28|D<<4)^(B<<30|D>>>2)^(B<<25|D>>>7),ve=(k>>>14|U<<18)^(k>>>18|U<<14)^(k<<23|U>>>9),ye=(U>>>14|k<<18)^(U>>>18|k<<14)^(U<<23|k>>>9),be=s[z],we=be.high,Ae=be.low,Ee=j+ve+((de=H+ye)>>>0<H>>>0?1:0),Ie=me+pe;j=V,H=W,V=G,W=L,G=k,L=U,k=F+(Ee=(Ee=(Ee=Ee+fe+((de=de+he)>>>0<he>>>0?1:0))+we+((de=de+Ae)>>>0<Ae>>>0?1:0))+Y+((de=de+X)>>>0<X>>>0?1:0))+((U=N+de|0)>>>0<N>>>0?1:0)|0,F=R,N=T,R=P,T=C,P=D,C=B,D=Ee+(ge+_e+(Ie>>>0<me>>>0?1:0))+((B=de+Ie|0)>>>0<de>>>0?1:0)|0}_=a.low=_+B,a.high=h+D+(_>>>0<B>>>0?1:0),g=o.low=g+C,o.high=p+P+(g>>>0<C>>>0?1:0),v=r.low=v+T,r.high=m+R+(v>>>0<T>>>0?1:0),b=i.low=b+N,i.high=y+F+(b>>>0<N>>>0?1:0),A=c.low=A+U,c.high=w+k+(A>>>0<U>>>0?1:0),I=u.low=I+L,u.high=E+G+(I>>>0<L>>>0?1:0),S=d.low=S+W,d.high=M+V+(S>>>0<W>>>0?1:0),O=f.low=O+H,f.high=x+j+(O>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[30+(a+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(a+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),function(){var t=e,n=t.x64,a=n.Word,o=n.WordArray,r=t.algo,i=r.SHA512,c=r.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=i._createHelper(c),t.HmacSHA384=i._createHmacHelper(c)}(),e.lib.Cipher||function(t){var n=e,a=n.lib,o=a.Base,r=a.WordArray,i=a.BufferedBlockAlgorithm,c=n.enc,s=(c.Utf8,c.Base64),l=n.algo.EvpKDF,u=a.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?y:m}return function(t){return{encrypt:function(n,a,o){return e(a).encrypt(t,n,a,o)},decrypt:function(n,a,o){return e(a).decrypt(t,n,a,o)}}}}()}),d=(a.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),f=a.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){var e=f.extend();function n(e,n,a){var o=this._iv;if(o){var r=o;this._iv=t}else r=this._prevBlock;for(var i=0;i<a;i++)e[n+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,t){var a=this._cipher,o=a.blockSize;n.call(this,e,t,o),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),e.Decryptor=e.extend({processBlock:function(e,t){var a=this._cipher,o=a.blockSize,r=e.slice(t,t+o);a.decryptBlock(e,t),n.call(this,e,t,o),this._prevBlock=r}}),e}(),_=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,a=n-e.sigBytes%n,o=a<<24|a<<16|a<<8|a,i=[],c=0;c<a;c+=4)i.push(o);var s=r.create(i,a);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},p=(a.BlockCipher=u.extend({cfg:u.cfg.extend({mode:h,padding:_}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=n.createEncryptor;else{a=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==a?this._mode.init(this,t&&t.words):(this._mode=a.call(n,this,t&&t.words),this._mode.__creator=a)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),a.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var a=r.create([1398893684,1701076831]).concat(n).concat(t);else a=t;return a.toString(s)},parse:function(e){var t=s.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var a=r.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:a})}},m=a.SerializableCipher=o.extend({cfg:o.extend({format:g}),encrypt:function(e,t,n,a){a=this.cfg.extend(a);var o=e.createEncryptor(n,a),r=o.finalize(t),i=o.cfg;return p.create({ciphertext:r,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:a.format})},decrypt:function(e,t,n,a){return a=this.cfg.extend(a),t=this._parse(t,a.format),e.createDecryptor(n,a).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(n.kdf={}).OpenSSL={execute:function(e,t,n,a){a||(a=r.random(8));var o=l.create({keySize:t+n}).compute(e,a),i=r.create(o.words.slice(t),4*n);return o.sigBytes=4*t,p.create({key:o,iv:i,salt:a})}},y=a.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:v}),encrypt:function(e,t,n,a){var o=(a=this.cfg.extend(a)).kdf.execute(n,e.keySize,e.ivSize);a.iv=o.iv;var r=m.encrypt.call(this,e,t,o.key,a);return r.mixIn(o),r},decrypt:function(e,t,n,a){a=this.cfg.extend(a),t=this._parse(t,a.format);var o=a.kdf.execute(n,e.keySize,e.ivSize,t.salt);return a.iv=o.iv,m.decrypt.call(this,e,t,o.key,a)}})}(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,a){var o=this._iv;if(o){var r=o.slice(0);this._iv=void 0}else r=this._prevBlock;a.encryptBlock(r,0);for(var i=0;i<n;i++)e[t+i]^=r[i]}return t.Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,o=a.blockSize;n.call(this,e,t,o,a),this._prevBlock=e.slice(t,t+o)}}),t.Decryptor=t.extend({processBlock:function(e,t){var a=this._cipher,o=a.blockSize,r=e.slice(t,t+o);n.call(this,e,t,o,a),this._prevBlock=r}}),t}(),e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,a=4*t,o=a-n%a,r=n+o-1;e.clamp(),e.words[r>>>2]|=o<<24-r%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,n){var a=4*n,o=a-t.sigBytes%a;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,o=this._iv,r=this._keystream;o&&(r=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var i=0;i<a;i++)e[t+i]^=r[i]}});return t.Decryptor=n,t}(),e.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var n=e,a=n.lib.CipherParams,o=n.enc.Hex;n.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return a.create({ciphertext:t})}}}(),function(){var t=e,n=t.lib.BlockCipher,a=t.algo,o=[],r=[],i=[],c=[],s=[],l=[],u=[],d=[],f=[],h=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,a=0;for(t=0;t<256;t++){var _=a^a<<1^a<<2^a<<3^a<<4;_=_>>>8^255&_^99,o[n]=_,r[_]=n;var p=e[n],g=e[p],m=e[g],v=257*e[_]^16843008*_;i[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,s[n]=v<<8|v>>>24,l[n]=v;v=16843009*m^65537*g^257*p^16843008*n;u[_]=v<<24|v>>>8,d[_]=v<<16|v>>>16,f[_]=v<<8|v>>>24,h[_]=v,n?(n=p^e[e[e[m^p]]],a^=e[e[a]]):n=a=1}})();var _=[0,1,2,4,8,16,32,64,128,27,54],p=a.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,a=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],i=0;i<a;i++)if(i<n)r[i]=t[i];else{var c=r[i-1];i%n?n>6&&i%n==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]):(c=o[(c=c<<8|c>>>24)>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c],c^=_[i/n|0]<<24),r[i]=r[i-n]^c}for(var s=this._invKeySchedule=[],l=0;l<a;l++){i=a-l;if(l%4)c=r[i];else c=r[i-4];s[l]=l<4||i<=4?c:u[o[c>>>24]]^d[o[c>>>16&255]]^f[o[c>>>8&255]]^h[o[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,c,s,l,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,f,h,r);n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,a,o,r,i,c){for(var s=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],h=4,_=1;_<s;_++){var p=a[l>>>24]^o[u>>>16&255]^r[d>>>8&255]^i[255&f]^n[h++],g=a[u>>>24]^o[d>>>16&255]^r[f>>>8&255]^i[255&l]^n[h++],m=a[d>>>24]^o[f>>>16&255]^r[l>>>8&255]^i[255&u]^n[h++],v=a[f>>>24]^o[l>>>16&255]^r[u>>>8&255]^i[255&d]^n[h++];l=p,u=g,d=m,f=v}p=(c[l>>>24]<<24|c[u>>>16&255]<<16|c[d>>>8&255]<<8|c[255&f])^n[h++],g=(c[u>>>24]<<24|c[d>>>16&255]<<16|c[f>>>8&255]<<8|c[255&l])^n[h++],m=(c[d>>>24]<<24|c[f>>>16&255]<<16|c[l>>>8&255]<<8|c[255&u])^n[h++],v=(c[f>>>24]<<24|c[l>>>16&255]<<16|c[u>>>8&255]<<8|c[255&d])^n[h++];e[t]=p,e[t+1]=g,e[t+2]=m,e[t+3]=v},keySize:8});t.AES=n._createHelper(p)}(),function(){var t=e,n=t.lib,a=n.WordArray,o=n.BlockCipher,r=t.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var a=i[n]-1;t[n]=e[a>>>5]>>>31-a%32&1}for(var o=this._subKeys=[],r=0;r<16;r++){var l=o[r]=[],u=s[r];for(n=0;n<24;n++)l[n/6|0]|=t[(c[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(c[n+24]-1+u)%28]<<31-n%6;l[0]=l[0]<<1|l[0]>>>31;for(n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),f.call(this,1,1431655765);for(var a=0;a<16;a++){for(var o=n[a],r=this._lBlock,i=this._rBlock,c=0,s=0;s<8;s++)c|=l[s][((i^o[s])&u[s])>>>0];this._lBlock=i,this._rBlock=r^c}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,f.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=o._createHelper(d);var _=r.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(a.create(e.slice(0,2))),this._des2=d.createEncryptor(a.create(e.slice(2,4))),this._des3=d.createEncryptor(a.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=o._createHelper(_)}(),function(){var t=e,n=t.lib.StreamCipher,a=t.algo,o=a.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,a=this._S=[],o=0;o<256;o++)a[o]=o;o=0;for(var r=0;o<256;o++){var i=o%n,c=t[i>>>2]>>>24-i%4*8&255;r=(r+a[o]+c)%256;var s=a[o];a[o]=a[r],a[r]=s}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,n=this._j,a=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[n],e[n]=r,a|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,a}t.RC4=n._createHelper(o);var i=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)r.call(this)}});t.RC4Drop=n._createHelper(i)}(),e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,a=255&e;255===t?(t=0,255===n?(n=0,255===a?a=0:++a):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=a}else e+=1<<24;return e}function a(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var o=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,i=this._counter;r&&(i=this._counter=r.slice(0),this._iv=void 0),a(i);var c=i.slice(0);n.encryptBlock(c,0);for(var s=0;s<o;s++)e[t+s]^=c[s]}});return t.Decryptor=o,t}(),function(){var t=e,n=t.lib.StreamCipher,a=[],o=[],r=[],i=t.algo.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=a[n+4&7];if(t){var r=t.words,i=r[0],s=r[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,f=u<<16|65535&l;o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=f,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=f;for(n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),e[t+o]^=a[o]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0;for(n=0;n<8;n++){var a=e[n]+t[n],i=65535&a,c=a>>>16,s=((i*i>>>17)+i*c>>>15)+c*c,l=((4294901760&a)*a|0)+((65535&a)*a|0);r[n]=s^l}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}t.Rabbit=n._createHelper(i)}(),e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,o=this._iv,r=this._counter;o&&(r=this._counter=o.slice(0),this._iv=void 0);var i=r.slice(0);n.encryptBlock(i,0),r[a-1]=r[a-1]+1|0;for(var c=0;c<a;c++)e[t+c]^=i[c]}});return t.Decryptor=n,t}(),function(){var t=e,n=t.lib.StreamCipher,a=[],o=[],r=[],i=t.algo.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)a[o]^=n[o+4&7];if(t){var r=t.words,i=r[0],s=r[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,f=u<<16|65535&l;a[0]^=l,a[1]^=d,a[2]^=u,a[3]^=f,a[4]^=l,a[5]^=d,a[6]^=u,a[7]^=f;for(o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),e[t+o]^=a[o]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0;for(n=0;n<8;n++){var a=e[n]+t[n],i=65535&a,c=a>>>16,s=((i*i>>>17)+i*c>>>15)+c*c,l=((4294901760&a)*a|0)+((65535&a)*a|0);r[n]=s^l}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}t.RabbitLegacy=n._createHelper(i)}(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e}),cc._RF.pop()},{}],sdk:[function(e,t,n){"use strict";cc._RF.push(t,"6916eL4ce9LVqQmZa5YpVFP","sdk"),n.__esModule=!0,n.default=void 0;var a=o(e("./crypto_js"));o(e("../Frame/FrameLog"));function o(e){return e&&e.__esModule?e:{default:e}}var r={LOGIN:"Home/User/login",GET_APP_CONFIG:"Home/Config/getConfig",UPDATE_WX_USER:"Home/User/updateWxUser",GET_USER:"Home/User/getUser",UPDATE_USER_EXT_DATA:"Home/User/updateUserExtData",GET_FRIEND:"Home/Friend/getFriend",UPDATE_FRIEND:"Home/Friend/updateFriend",UPDATE_FRIEND_STATUS:"Home/Friend/updateFriendStatus",GET_ALL_RANK:"Home/Rank/getAllRank",GET_RANK:"Home/Rank/getRank",GET_FRIEND_RANK:"Home/Rank/getFriendRank",ADD_USER_RECORD:"Home/UserRecord/addRecord",GET_USER_RECORD:"Home/UserRecord/getRecord",GET_FRIEND_USER:"Home/User/getFriendUser",GET_LEVEL:"Home/Level/getLevel",GET_WITHDRAW_OPTIONS:"Home/Withdraw/getOptions",DO_WITHDRAW:"Home/Withdraw/do",GET_LOCATION:"Home/Location/info"},i={PUSH_FORM_ID:"Sdk/FormId/push",PUSH_SUBSCRIBE_MSG:"Sdk/SubscribeMsg/push",PUSH_USER_DAU:"Sdk/User/dau",PUSH_ADV:"Sdk/User/adv",PUSH_USER_ACTION:"Sdk/User/userAction",PUSH_USER_EXPORT:"Sdk/User/export"},c="20200430v1.2.2",s={API:"https://api.aligame.top/",API_TEST:"https://api-test.aligame.top/",DATA:"https://data.aligame.top/"},l=s.API,u=s.DATA,d=Math.ceil(1e6*Math.random()),f=15e5,h=null,_=console,p=!0;try{h=a.default.enc.Hex.stringify(a.default.MD5(d.toString()))}catch(e){_.error("\u521d\u59cb\u5316SDK\u6570\u636e\u5f02\u5e38",e)}function g(e){return l+e}function m(e){return u+e}var v=null,y={SESSION_INFO:"session_info",APP_CONFIG:"app_config",LOCATION:"location",USER:"user"},b={innerConf:{no_action:0,no_export:0,no_share:0,no_dau:0,no_adv:0,no_form_id:0,no_subscribe_msg:0,retry_count:1,user_ext_data_push_interval:3},config:{application_id:null,version:null,channel_id:"",scene_id:0,inviter_code:"",scene:"",share_id:0,wx_version:""},loginSuccessCall:null,loginFailCall:null},w=0,A={s:null,openid:null,user_code:null,is_black:0,user_id:0,s_update_time:null},E=null,I=!1,M=null,S=!1,x=null,O={province:null,city:null};function D(e){try{return x.getStorageSync?x.getStorageSync(e):null}catch(e){return _.error("sdk\u57fa\u7840getStorageSync\u5f02\u5e38",e),null}}function B(){try{return x.getSystemInfoSync?x.getSystemInfoSync():null}catch(e){return _.error("sdk\u57fa\u7840getSystemInfoSync\u5f02\u5e38",e),null}}function P(e){try{if(!x.setStorage)return;x.setStorage(e)}catch(e){_.error("sdk\u57fa\u7840setStorage\u5f02\u5e38",e)}}function C(e,t){try{if(!x.setStorageSync)return;x.setStorageSync(e,t)}catch(e){_.error("sdk\u57fa\u7840setStorage\u5f02\u5e38",e)}}function R(){try{return x.getLaunchOptionsSync?x.getLaunchOptionsSync():null}catch(e){return _.error("sdk\u57fa\u7840getLaunchOptionsSync\u5f02\u5e38",e),null}}function T(e){try{if(!x.login)return void("function"==typeof e.fail&&e.fail({code:-2001,msg:"\u767b\u5f55\u5f02\u5e38"}));x.login(e)}catch(t){_.error("sdk\u57fa\u7840login\u5f02\u5e38",t),"function"==typeof e.fail&&e.fail({code:-2001,msg:"\u767b\u5f55\u5f02\u5e38"})}}function F(e){try{if(!x.request)return void("function"==typeof e.fail&&e.fail({code:-2001,msg:"\u8bf7\u6c42\u5f02\u5e38"}));x.request(e)}catch(t){_.error("sdk\u57fa\u7840request\u5f02\u5e38",t),"function"==typeof e.fail&&e.fail({code:-2001,msg:"\u8bf7\u6c42\u5f02\u5e38"})}}function N(e){try{return V(A.user_code+"_"+A.openid,e)}catch(t){return V("passphrase",e)}}function k(e){try{return U(A.user_code+"_"+A.openid,e)}catch(t){return U("passphrase",e)}}function U(e,t){try{var n=t.c,o=a.default.enc.Hex.parse(t.s),r=a.default.enc.Hex.parse(t.i),i=a.default.MD5(e+"_"+o),c=a.default.AES.decrypt(n,i,{iv:r});return JSON.parse(c.toString(a.default.enc.Utf8))}catch(e){return _.error("\u83b7\u53d6\u6570\u636e\u9519\u8bef",e),{}}}function G(e){return U("e499a98411a65c3e2bcdcd3f8a2b0669",e)}function L(e){return V("e499a98411a65c3e2bcdcd3f8a2b0669",e)}function V(e,t){try{var n=JSON.stringify(t),o=a.default.enc.Hex.stringify(a.default.lib.WordArray.random(8)),r=a.default.lib.WordArray.random(16),i=a.default.MD5(e+"_"+o),c=a.default.AES.encrypt(n,i,{iv:r});return{c:a.default.enc.Base64.stringify(c.ciphertext),s:o,i:a.default.enc.Hex.stringify(r)}}catch(e){return _.error("\u83b7\u53d6\u53c2\u6570\u9519\u8bef",e),{}}}function W(e,t){try{if("object"==typeof e&&null!==e||(e=t),e&&t&&"object"==typeof e&&"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&("object"==typeof e[n]&&"object"==typeof t[n]?"game_box"===n&&e[n].length>0&&t[n].length>0?e[n]=t[n]:e[n]=W(e[n],t[n]):e[n]=t[n])}catch(n){_.error("\u5408\u5e76\u5bf9\u8c61\u5f02\u5e38",e,t,n)}return e}function j(){var e=D(y.LOCATION);e&&e.province&&e.city?O=e:ae(g(r.GET_LOCATION),{},function(e){O.province=e.province,O.city=e.city,P({key:y.LOCATION,data:O}),_.log("get location end",O,e)})}function H(e){try{return!e.s||(!e.s_update_time||(new Date).getTime()-e.s_update_time>=f)}catch(e){return _.error("\u6821\u9a8c\u767b\u5f55\u6001\u662f\u5426\u5931\u6548\u5f02\u5e38",e),!0}}function z(e){try{e.s_update_time=(new Date).getTime(),P({key:y.SESSION_INFO,data:e})}catch(e){_.error("setSessionInfo fail",e)}}function K(e){void 0===e&&(e=!0);try{var t=R();if(!t)return;b.config.scene_id=t.scene||0,b.config.channel_id=t.query.channel_id||"",b.config.share_id=parseInt(t.query.share_id)||0,t.hasOwnProperty("referrerInfo")&&(b.config.app_id=t.referrerInfo.appId||""),e&&t.query&&t.query.inviter_code&&t.query.inviter_code.length>0&&A.config.inviter_code.length>0&&t.query.inviter_code!==b.config.inviter_code&&ce(t.query.inviter_code,{}),b.config.inviter_code=t.query.inviter_code||""}catch(e){_.error("\u83b7\u53d6\u5c0f\u7a0b\u5e8f/\u6e38\u620foptions\u5f02\u5e38",b,e)}}function Y(e){var t=0;return 1!==e&&(t=30*Math.pow(2,e)),t}function X(e,t,n){if((e+=1)>b.innerConf.retry_count)return _.error("\u767b\u5f55\u5931\u8d25\uff0c\u5df2\u5230\u8fbe\u6700\u5927\u5931\u8d25\u6b21\u6570",e,t,n),p&&"function"==typeof b.loginFailCall&&b.loginFailCall(t),!1;var a=Y(e);return v=null,_.error("\u767b\u5f55\u5931\u8d25\uff0c\u8fdb\u884c\u91cd\u8bd5",e,a,t,n),setTimeout(function(){q(e)},a),!0}function J(e,t){var n={};try{for(var a in t=t.toLowerCase(),e)e.hasOwnProperty(a)&&(n[a.toLowerCase()]=e[a]);if(n.hasOwnProperty(t))return n[t]}catch(a){_.log("getHeader\u5f02\u5e38",e,t,n)}return _.log("getHeader\u5931\u8d25",e,t,n),""}function q(e){void 0===e&&(e=0);var t=(new Date).getTime();return null!=v&&t-v<=500?(_.error("\u521a\u521a\u53d1\u8d77\u4e86\u767b\u5f55\uff0c\u4e0d\u9700\u8981\u518d\u767b\u5f55",t,v,e),!1):(A={s:null,openid:null,user_code:null,is_black:0,user_id:0,s_update_time:null},v=t,T({force:!1,success:function(t){var n=JSON.parse(JSON.stringify(b.config));t.hasOwnProperty("code")&&t.code?n.code=t.code:t.hasOwnProperty("anonymousCode")&&(n.code=t.anonymousCode),ee(g(r.LOGIN),n,function(n,a){try{var o=J(a,"Set-Cookie").match(/PHPSESSID=(.*)?;/i);if(A.s=o[1],A.openid=n.openid,A.is_new=n.is_new,A.reg_time=n.reg_time,A.is_black=n.is_black,A.user_id=n.id,A.user_code=n.user_code,z(A),S=!0,I=!0,n.hasOwnProperty("user")&&oe(n.user),p){var r=JSON.parse(JSON.stringify(A));delete r.s,"function"==typeof b.loginSuccessCall&&b.loginSuccessCall(r)}j(),setTimeout(function(){ie({},function(e){_.log("\u7528\u6237dau\u4e0a\u62a5\u6210\u529f",e)})},2)}catch(o){_.error("\u767b\u5f55\u5f02\u5e38",o,n,a),X(e,{code:-113,msg:"\u767b\u5f55\u4e00\u6b21",res:t},t)}},function(t){X(e,{code:-111,msg:"\u8bf7\u6c42\u9519\u8bef",res:t},t)},b.innerConf.retry_count)},fail:function(t){X(e,{code:-112,msg:"\u5fae\u4fe1\u767b\u5f55\u5931\u8d25"},t)}}),!0)}function Q(e,t,n,a,o,r,i){if((i+=1)>b.innerConf.retry_count)return _.error("\u8bf7\u6c42withoutSession\u5931\u8d25\uff0c\u5df2\u5230\u8fbe\u6700\u5927\u5931\u8d25\u6b21\u6570",i,o,r),"function"==typeof a&&a(o),!1;var c=Y(i);_.error("\u8bf7\u6c42withoutSession\u5931\u8d25\uff0c\u8fdb\u884c\u91cd\u8bd5",i,c,o,r),setTimeout(function(){Z(e,t,n,a,i)},c)}function Z(e,t,n,a,o){void 0===t&&(t={}),void 0===n&&(n={}),void 0===a&&(a={}),void 0===o&&(o=0),F({url:e,method:"POST",data:t,timeout:1500,success:function(r){200===r.statusCode?"function"==typeof n&&n(r.data):Q(e,t,n,a,{code:r.statusCode,msg:"\u7f51\u7edc\u9519\u8bef\uff0chttp\u72b6\u6001\u7801"+r.statusCode},r,o)},fail:function(r){Q(e,t,n,a,{code:-111,msg:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",res:r},r,o)}})}function $(e,t,n,a,o,r,i,c){if((c+=1)>b.innerConf.retry_count)return _.error("\u8bf7\u6c42\u5931\u8d25\uff0c\u5df2\u5230\u8fbe\u6700\u5927\u5931\u8d25\u6b21\u6570",c,o,r),"function"==typeof a&&a(o),!1;var s=Y(c);_.error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8fdb\u884c\u91cd\u8bd5",c,s,o,r),setTimeout(function(){ae(e,t,n,a,i,c)},s)}function ee(e,t,n,a,o){void 0===t&&(t={}),void 0===n&&(n={}),void 0===a&&(a={}),void 0===o&&(o=0),t.application_id=b.config.application_id,t.version=b.config.version,t.user_id=A.user_id,0===t.user_id&&(t.user_id=d),ae(e,t,n,a,!1,o)}function te(e,t){var n={};return e?(n=N(t)).v="s":(t.application_id=b.config.application_id,t.version=b.config.version,t.user_id=d,(n=L(t)).v="s-p"),n}function ne(e,t){return e?k(t):G(t)}function ae(e,t,n,a,o,r){void 0===t&&(t={}),void 0===n&&(n={}),void 0===a&&(a={}),void 0===o&&(o=!0),void 0===r&&(r=0);var i=te(o,t);A.s?i.k=A.s:i.k=h,F({url:e,header:{"Content-Type":"application/json"},method:"POST",timeout:1500,data:i,success:function(i){if(200===i.statusCode){if(400===i.data.code&&("function"==typeof a&&a({code:i.data.code,msg:i.data.msg}),_.error("\u767b\u5f55\u6001\u5931\u6548\uff0c\u91cd\u65b0\u767b\u5f55"),q()))return!1;if(200===i.data.code){if(o&&z(A),""!==i.data.data)try{i.data.data=ne(o,i.data.data)}catch(e){_.error("\u8bf7\u6c42\u53d1\u751f\u5f02\u5e38",e)}"function"==typeof n&&n(i.data.data,i.header)}else 401===i.data.code?$(e,t,n,a,{code:i.data.code,msg:i.data.msg},i,o,r):"function"==typeof a&&a({code:i.data.code,msg:i.data.msg})}else $(e,t,n,a,{code:i.statusCode,msg:"\u7f51\u7edc\u9519\u8bef\uff0chttp\u72b6\u6001\u7801"+i.statusCode},i,o,r)},fail:function(i){$(e,t,n,a,{code:-111,msg:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",res:i},i,o,r)}})}function oe(e){var t=null,n=!1;M=D(y.USER);try{e.ext_data&&e.ext_data.s_update_time&&M&&M.ext_data&&M.ext_data.s_update_time&&M.ext_data.s_update_time>e.ext_data.s_update_time&&"object"==typeof(t=JSON.parse(JSON.stringify(M.ext_data)))&&null!==t&&(n=!0)}catch(t){_.error("\u5408\u5e76extData\u5f02\u5e38",M,e,t)}return M=W(M,e),n&&(_.error("extData\u7684\u672c\u5730\u6570\u636e\u662f\u6700\u65b0\u7684",e,t),M.ext_data=t),C(y.USER,M),S=!1,n}var re={};function ie(e,t,n){if(void 0===n&&(n={}),1===b.innerConf.no_dau)return _.log("\u4e0d\u9700\u8981\u4e0a\u62a5Dau",e),!0;var a=Object.assign(b.config,e);a.is_new=A.is_new,a.reg_time=A.reg_time,a.openid=A.openid,a.sdk_version=c+"-"+b.config.version,a.version=b.config.wx_version,ee(m(i.PUSH_USER_DAU),a,t,n)}function ce(e,t,n){void 0===n&&(n={}),ae(g(r.UPDATE_FRIEND),{inviter_code:e},t,n)}var se={changeHost:function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),null!==e&&(l=!0===e?s.API:s.API_TEST),null!==t&&(l=t),null!==n&&(u=n)},initSdk:function(e,t,n,a,o,r,i,c){void 0===a&&(a={}),void 0===o&&(o=wx),void 0===r&&(r=!1),void 0===i&&(i=!0),void 0===c&&(c=null),p=i,r&&(v=null),null!==c&&c.log&&c.error&&(_=c),null!=o&&(x=o),b.config.application_id=e,b.config.version=t,b.loginSuccessCall=n,b.loginFailCall=a,K(!1);try{b.config.wx_version=B().version}catch(e){_.error("\u83b7\u53d6\u5fae\u4fe1\u7248\u672c\u5f02\u5e38",e)}if(!A.s)try{var s=D(y.SESSION_INFO);s&&(A=s)}catch(e){_.error("\u5fae\u4fe1getStorageSync\u5f02\u5e38",e)}var l=H(A);if(l&&p)q();else{void 0!==A.user_id&&Number(A.user_id)>0&&(d=Number(A.user_id));var u=JSON.parse(JSON.stringify(A));delete u.s,"function"==typeof b.loginSuccessCall&&b.loginSuccessCall(u),l?q():j()}},mergeObject:W,updateSdkConfByOptions:K,postData3rd:Z,postData:ae,postDataWithoutSession:ee,getAppConfig:function(e){return E&&!I?("function"==typeof e&&e(E),!0):!I&&((E=D(y.APP_CONFIG))&&"object"==typeof E&&E.hasOwnProperty("sdk")&&(b.innerConf=W(b.innerConf,E.sdk),delete E.sdk),E)?("function"==typeof e&&e(E),!0):void ae(g(r.GET_APP_CONFIG),{},function(t){E=W(E,t),C(y.APP_CONFIG,E),E&&"object"==typeof E&&E.hasOwnProperty("sdk")&&(b.innerConf=W(b.innerConf,E.sdk),delete E.sdk),I=!1,"function"==typeof e&&e(E)},function(t){I&&(E=D(y.APP_CONFIG)),E?(_.error("\u83b7\u53d6appConfig\u6570\u636e\u5931\u8d25\uff0c\u56de\u8c03\u672c\u5730\u6570\u636e",t),"function"==typeof e&&e(E)):(_.error("\u83b7\u53d6appConfig\u6570\u636e\u5931\u8d25\uff0c\u56de\u8c03\u7a7a\u6570\u636e",t),"function"==typeof e&&e({}))})},updateWxUser:function(e,t,n){void 0===n&&(n={}),ae(g(r.UPDATE_WX_USER),{__userInfo:e},function(e){"function"==typeof t&&t(e)},function(e){"function"==typeof n&&n(e)})},getUser:function(e,t){return void 0===t&&(t=!1),t&&(S=t),!M||S&&p?S&&p||!(M=D(y.USER))?p?void ae(g(r.GET_USER),{},function(t){var n=oe(t);S=!1,!p&&n||"function"==typeof e&&e(M)},function(t){(M=D(y.USER))?(_.log("\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25\uff0c\u56de\u8c03\u672c\u5730\u6570\u636e",t),p&&"function"==typeof e&&e(M)):(_.log("\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25\uff0c\u56de\u8c03\u7a7a\u6570\u636e",t),M={},p&&"function"==typeof e&&e({}))}):(M={},"function"==typeof e&&e(M),!0):("function"==typeof e&&e(M),_.log("\u83b7\u53d6\u7528\u6237\u6570\u636e\u672c\u5730\u8fd4\u56de",M),!0):("function"==typeof e&&e(M),!0)},updateUserExtData:function(e,t,n,a,o){void 0===n&&(n={}),void 0===a&&(a={rank_level:["world_week","world","province","province_week"]}),void 0===o&&(o="system");try{if(!M)return _.error("m_user\u5f02\u5e38",M),!1;if(e.s_update_time=(new Date).getTime(),M.ext_data=e,C(y.USER,M),"local"===o)return;if(w++,"system"===o&&w%b.innerConf.user_ext_data_push_interval!=0)return _.error("\u4e0d\u9700\u8981\u4e0a\u62a5\u7528\u6237ExtData",w,b.innerConf.user_ext_data_push_interval),!1;for(var i in a)re.hasOwnProperty(i)&&re[i]>=e[i]?delete e[i]:re[i]=e[i];return _.log("updateUserExtData",e),ae(g(r.UPDATE_USER_EXT_DATA),{ext_data:e,rank_option:a,province:O.province,city:O.city},function(e){"function"==typeof t&&t(e)},function(e){"function"==typeof n&&n(e)}),!0}catch(t){_.error("\u4e0a\u62a5\u7528\u6237\u6570\u636e\u5f02\u5e38",e,M,t)}},pushFormId:function(e,t,n){if(void 0===n&&(n={}),1===b.innerConf.no_form_id)return _.log("\u4e0d\u9700\u8981\u4e0a\u62a5formId",e),!0;ee(m(i.PUSH_FORM_ID),{openid:A.openid,application_id:b.config.application_id,form_id:e,is_black:A.is_black},function(e){"function"==typeof t&&t(e)},function(e){"function"==typeof n&&n(e)})},pushUserAction:function(e,t,n){if(void 0===n&&(n={}),1===b.innerConf.no_action)return _.log("\u4e0d\u9700\u8981\u4e0a\u62a5\u7528\u6237\u52a8\u4f5c",e),!0;var a={application_id:b.config.application_id,openid:A.openid,scene_id:b.config.scene_id,version:b.config.version},o=Object.assign(a,e);ee(m(i.PUSH_USER_ACTION),o,t,n)},pushUserExport:function(e,t,n){if(void 0===n&&(n={}),1===b.innerConf.no_export)return _.log("\u4e0d\u9700\u8981\u4e0a\u62a5\u5bfc\u51fa",e),!0;var a={application_id:b.config.application_id,openid:A.openid,scene_id:b.config.scene_id,channel_id:b.config.channel_id,is_new:A.is_new,reg_time:A.reg_time},o=Object.assign(a,e);ee(m(i.PUSH_USER_EXPORT),o,t,n)},pushAdv:function(e,t,n){if(void 0===n&&(n={}),1===b.innerConf.no_adv)return _.log("\u4e0d\u9700\u8981\u4e0a\u62a5adv",e),!0;var a={};a=Object.assign(b.config,a),null!==e&&(a.data=e),a.openid=A.openid,ee(m(i.PUSH_ADV),a,t,n)},pushSubscribeMsg:function(e,t,n){void 0===n&&(n={});try{if(1===b.innerConf.no_subscribe_msg)return _.log("\u4e0d\u9700\u8981\u4e0a\u62a5\u8ba2\u9605\u4e8b\u4ef6",e),!0;delete e.errMsg,ee(m(i.PUSH_SUBSCRIBE_MSG),{openid:A.openid,application_id:b.config.application_id,data:e,is_black:A.is_black},function(e){"function"==typeof t&&t(e)},function(e){"function"==typeof n&&n(e)})}catch(e){_.error("\u4e0a\u62a5\u8ba2\u9605\u4e8b\u4ef6\u5f02\u5e38",e)}},getFriend:function(e,t,n){void 0===n&&(n={}),ae(g(r.GET_FRIEND),e,t,n)},updateFriendStatus:function(e,t,n){void 0===n&&(n={}),ae(g(r.UPDATE_FRIEND_STATUS),e,t,n)},getAllRank:function(e,t){void 0===t&&(t={}),ae(g(r.GET_ALL_RANK),{},e,t)},getFriendRank:function(e,t){void 0===t&&(t={}),ae(g(r.GET_FRIEND_RANK),{},e,t)},addUserRecord:function(e,t,n){void 0===n&&(n={}),ae(g(r.ADD_USER_RECORD),e,t,n)},getUserRecord:function(e,t){void 0===t&&(t={}),ae(g(r.GET_USER_RECORD),{},e,t)},getFriendUser:function(e,t,n){void 0===n&&(n={}),ae(g(r.GET_FRIEND_USER),{user_code:e},t,n)},getLevel:function(e,t,n,a,o){void 0===n&&(n={}),void 0===a&&(a=0),void 0===o&&(o="zh_cn"),ee(g(r.GET_LEVEL),{level:e,page_size:a,lang:o},t,n)},getWithdrawOptions:function(e,t){void 0===t&&(t={}),ae(g(r.GET_WITHDRAW_OPTIONS),{},e,t)},doWithdraw:function(e,t,n){void 0===n&&(n={}),ae(g(r.DO_WITHDRAW),{num:e},t,n)},getRank:function(e,t,n){void 0===n&&(n={}),e.province=O.province,e.city=O.city,ae(g(r.GET_RANK),e,t,n)},getLocationInfo:function(){return O}};n.default=se,t.exports=n.default,cc._RF.pop()},{"../Frame/FrameLog":"FrameLog","./crypto_js":"crypto_js"}]},{},["BannerDisplay","FullDisplay","GameBoxDisplay","MenuBoxDisplay","PopBoxDisplay","TreaBoxDisplay","EndDisplay","GameDisplay","HomeDisplay","HomeItem","Item","J","K","L","Piece","ModalDisplay","ToastDisplay","AdvBase","AdvFree","WechatBanner","WechatGameBox","WechatScreen","WechatVideo","ConstData","FrameLog","Global","AppApi","WechatApi","ActionMgr","DisplayMgr","EventData","EventMgr","EventPar","GameMgr","LanguageConfig","LanguageMgr","LocalMgr","LockMgr","PoolMgr","ResMgr","SoundMgr","Tools","ViewPanel","ViewUI","ViewMgr","Loading","Main","crypto_js","sdk"]);